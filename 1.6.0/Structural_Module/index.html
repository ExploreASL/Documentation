
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://github.com/ExploreASL/1.6.0/Structural_Module/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.2">
    
    
      
        <title>Module Structural - ExploreASL</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6f955dcd.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ef6f36e2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#submodules-of-the-structural-module" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ExploreASL" class="md-header__button md-logo" aria-label="ExploreASL" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ExploreASL
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Module Structural
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/ExploreASL/Documentation/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ExploreASL" class="md-nav__button md-logo" aria-label="ExploreASL" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ExploreASL
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ExploreASL/Documentation/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Modules/" class="md-nav__link">
        Modules
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Import_Module/" class="md-nav__link">
        Module Import
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Module Structural
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Module Structural
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_cleanupwmh_segmm" class="md-nav__link">
    xASL_wrp_CleanUpWMH_SEGM.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_CleanUpWMH_SEGM.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_flair_biasfieldcorrectionm" class="md-nav__link">
    xASL_wrp_FLAIR_BiasfieldCorrection.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_FLAIR_BiasfieldCorrection.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format_1" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description_1" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_getvolumetricsm" class="md-nav__link">
    xASL_wrp_GetVolumetrics.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_GetVolumetrics.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format_2" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description_2" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_lst_segment_flair_wmhm" class="md-nav__link">
    xASL_wrp_LST_Segment_FLAIR_WMH.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_LST_Segment_FLAIR_WMH.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format_3" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description_3" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_lst_t1w_lesionfilling_wmhm" class="md-nav__link">
    xASL_wrp_LST_T1w_LesionFilling_WMH.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_LST_T1w_LesionFilling_WMH.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format_4" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description_4" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_linearreg_flair2t1wm" class="md-nav__link">
    xASL_wrp_LinearReg_FLAIR2T1w.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_LinearReg_FLAIR2T1w.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format_5" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description_5" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_linearreg_t1w2mnim" class="md-nav__link">
    xASL_wrp_LinearReg_T1w2MNI.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_LinearReg_T1w2MNI.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format_6" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description_6" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_resample2standardspacem" class="md-nav__link">
    xASL_wrp_Resample2StandardSpace.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_Resample2StandardSpace.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format_7" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description_7" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_segmentt1wm" class="md-nav__link">
    xASL_wrp_SegmentT1w.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_SegmentT1w.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format_8" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description_8" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_visualqc_structuralm" class="md-nav__link">
    xASL_wrp_VisualQC_Structural.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_VisualQC_Structural.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format_9" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description_9" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ASL_Module/" class="md-nav__link">
        Module ASL
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Population_Module/" class="md-nav__link">
        Module Population
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Functions/" class="md-nav__link">
        Functions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../SPMxASL/" class="md-nav__link">
        SPM xASL Functions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Tutorials/" class="md-nav__link">
        Tutorials & FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Requirements/" class="md-nav__link">
        Requirements
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../License/" class="md-nav__link">
        License
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../About/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_cleanupwmh_segmm" class="md-nav__link">
    xASL_wrp_CleanUpWMH_SEGM.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_CleanUpWMH_SEGM.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_flair_biasfieldcorrectionm" class="md-nav__link">
    xASL_wrp_FLAIR_BiasfieldCorrection.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_FLAIR_BiasfieldCorrection.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format_1" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description_1" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_getvolumetricsm" class="md-nav__link">
    xASL_wrp_GetVolumetrics.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_GetVolumetrics.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format_2" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description_2" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_lst_segment_flair_wmhm" class="md-nav__link">
    xASL_wrp_LST_Segment_FLAIR_WMH.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_LST_Segment_FLAIR_WMH.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format_3" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description_3" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_lst_t1w_lesionfilling_wmhm" class="md-nav__link">
    xASL_wrp_LST_T1w_LesionFilling_WMH.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_LST_T1w_LesionFilling_WMH.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format_4" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description_4" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_linearreg_flair2t1wm" class="md-nav__link">
    xASL_wrp_LinearReg_FLAIR2T1w.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_LinearReg_FLAIR2T1w.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format_5" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description_5" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_linearreg_t1w2mnim" class="md-nav__link">
    xASL_wrp_LinearReg_T1w2MNI.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_LinearReg_T1w2MNI.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format_6" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description_6" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_resample2standardspacem" class="md-nav__link">
    xASL_wrp_Resample2StandardSpace.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_Resample2StandardSpace.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format_7" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description_7" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_segmentt1wm" class="md-nav__link">
    xASL_wrp_SegmentT1w.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_SegmentT1w.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format_8" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description_8" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xasl_wrp_visualqc_structuralm" class="md-nav__link">
    xASL_wrp_VisualQC_Structural.m
  </a>
  
    <nav class="md-nav" aria-label="xASL_wrp_VisualQC_Structural.m">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format_9" class="md-nav__link">
    Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description_9" class="md-nav__link">
    Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ExploreASL/Documentation/edit/master/docs/Structural_Module.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="submodules-of-the-structural-module">Submodules of the Structural Module</h1>
<hr />
<h3 id="xasl_wrp_cleanupwmh_segmm">xASL_wrp_CleanUpWMH_SEGM.m</h3>
<h4 id="format">Format</h4>
<pre><code class="matlab">xASL_wrp_CleanUpWMH_SEGM(x)
</code></pre>

<h4 id="description">Description</h4>
<p>This submodule aims to clean up WMH under- or oversegmentations in a conservatively &amp; robust way,
i.e. erring on the side of caution. It uses input from the tissue class segmentation (e.g. CAT12) to repair the
WMH segmentation (e.g. LST LPA/LGA or externally provided). Note that before running the tissue segmentation, the T1w was
(conservatively) filled for WMH lesions. % This function is not tested a lot, so mainly conservatively set up to improve the
WMH volumetrics, rather than improve the registration.</p>
<p>This submodule contains the following steps:</p>
<ol>
<li>Administration</li>
<li>Correct pGM islands inside pWM
WMH can have an intensity similar to GM on the T1w, which erroneously classifies them as GM instead of WM(H).
The rule used here, is to define GM islands within the WM as clusters of pGM&gt;0.05 for which 3 layers (dilations)
have at least 95% pWM. For these islands, pGM is given 100% to pWM. 50% of pWM is given to pWMH (the pWMH/pNAWM distinction is
made later in the pipeline, here still pWM=pWMH+pNAWM). The reason is that not all low T1w intensities within the WM
are WMH, we still expect some lacunes, perivascular (Virchow-Robin) spaces, which could be considered pNAWM rather than pWMH.</li>
<li>Perform brainmasking &amp; join masks</li>
<li>Correct any WMH inside GM or CSF -&gt; here we assume that CAT12 did a good segmentation job. If pGM is larger than pWM &amp; larger
than pWMH, we consider a voxel to be pGM and remove the pWMH. This effectively removes pWMH segmentation noise in the GM or CSF,
it doesn't correct any significant misclassification of WMH in the GM or CSF. If the WMH segmentation does a significant misclassification
(e.g. setting the pWMH inside GM or CSF to a probability higher than GM or CSF is by tissue segmentation), this is lesion filled
after the WMH segmentation, on the T1w, hence the tissue segmentation won't have a chance to correct this. Fortunately, most
oversegmentations in the GM/CSF have low pWMH, as WMH segmentation algorithms already perform a light tissue prior-based
clean up themselves.</li>
<li>Saving &amp; file management</li>
<li>Prepare visuals for visual QC &amp; file management</li>
</ol>
<hr />
<h3 id="xasl_wrp_flair_biasfieldcorrectionm">xASL_wrp_FLAIR_BiasfieldCorrection.m</h3>
<h4 id="format_1">Format</h4>
<pre><code class="matlab">xASL_wrp_FLAIR_BiasfieldCorrection(x)
</code></pre>

<h4 id="description_1">Description</h4>
<p>This submodule performs a biasfield correction on T1w and applies it on FLAIR. This can be useful, when there are large lesions
on the FLAIR that hamper capturing the biasfield nicely on the FLAIR itself. In such cases, the biasfield of the T1w might be easier to obtain
and should be the same as the FLAIR, provided they are scanned in the same scan session (i.e.g same scanner, same coil).
BE CAREFUL: this submodule assumes that the biasfields of the T1w and FLAIR are comparable, which is not the case when one of the two (or both) are
already biasfield corrected.</p>
<hr />
<h3 id="xasl_wrp_getvolumetricsm">xASL_wrp_GetVolumetrics.m</h3>
<h4 id="format_2">Format</h4>
<pre><code class="matlab">xASL_wrp_GetVolumetrics(x)
</code></pre>

<h4 id="description_2">Description</h4>
<p>This submodule computes the total volume for each of the tissue classes &amp; stores them in a TSV file (per BIDS).
This is computed from the native space segmentation derivatives (GM, WM &amp; CSF), from which the ICV &amp; relative volumes can be
calculated. This is performed for CAT12 or SPM12 (whichever was used), and optionally for a WMH_SEGM.</p>
<hr />
<h3 id="xasl_wrp_lst_segment_flair_wmhm">xASL_wrp_LST_Segment_FLAIR_WMH.m</h3>
<h4 id="format_3">Format</h4>
<pre><code class="matlab">xASL_wrp_LST_Segment_FLAIR_WMH(x, rWMHPath[, WMHsegmAlg])
</code></pre>

<h4 id="description_3">Description</h4>
<p>This submodule runs the LST WMH segmentation, either with LGA or LPA.
LPA is the default choice, it outperforms LGA a bit, depending on the image quality. These algorithms
perform optimally with 3T images, with good contrast. Generally, LPA oversegments whereas LGA undersegments.
The LPA oversegmentation is corrected in a later submodule. If a WMH_SEGM
already existed, the LST is run quickly as dummy only, to be replaced by
the original WMH_SEGM image. This function has the following parts:</p>
<ol>
<li>Resample FLAIR (&amp; WMH_SEGM, if exists) to T1w space
where we assume WMH_SEGM_ORI == FLAIR space (if externally provided)
WMH_SEGM == T1w space</li>
<li>Define parameters for segmentation</li>
<li>Run the segmentation</li>
<li>Replace by already existing WMH_SEGM</li>
<li>File management</li>
<li>Remove NaNs from segmentations &amp; fix image edges</li>
<li>Remove lesion masks from WMH_SEGM</li>
</ol>
<hr />
<h3 id="xasl_wrp_lst_t1w_lesionfilling_wmhm">xASL_wrp_LST_T1w_LesionFilling_WMH.m</h3>
<h4 id="format_4">Format</h4>
<pre><code class="matlab">xASL_wrp_LST_T1w_LesionFilling_WMH(x)
</code></pre>

<h4 id="description_4">Description</h4>
<p>This submodule runs the LST WMH-based T1w lesion filling, which should improve the registration &amp; segmentation
of the T1w by e.g. CAT12/SPM12. The WMH can be either segmented in the previous submodule by LST LGA/LPGA or provided externally.
Before lesion filling, we clean up the WMH segmentation, to make the lesion filling a bit more conservative. Sometimes the WMH
segmentation oversegments inside the GM (as there can be hyperintensities on the FLAIR) &amp; we don't want to lesion-fill these
on the T1w (which would turn their intensities in intensities similar to WM, leading to misclassifications by the T1w segmentation).
Note that this is submodule only performs the lesion filling, and the clean up is also performed for the lesion filling only.
A more thorough WMH clean up (for e.g. WMH volumetrics) is performed later in the Structural module, using also the results from the
T1w segmentation.</p>
<p>Note when changing the lesion filling here, LST lesion filling expects a probability map, doesnt work nicely with binary mask
This function runs the following steps:</p>
<ol>
<li>File management</li>
<li>Clean up the WMH segmentation used for lesion filling</li>
<li>Run lesion filling</li>
<li>Correction of too much/erronous lesion filling</li>
<li>File management</li>
</ol>
<hr />
<h3 id="xasl_wrp_linearreg_flair2t1wm">xASL_wrp_LinearReg_FLAIR2T1w.m</h3>
<h4 id="format_5">Format</h4>
<pre><code class="matlab">xASL_wrp_LinearReg_FLAIR2T1w(x[, bAutoACPC])
</code></pre>

<h4 id="description_5">Description</h4>
<p>This submodule registers FLAIR linearly to the T1w
The same transformation is applied to all other related scans (FLAIR-segmented lesions, WMH specifically or other lesions)
This is required to enable the application of T1w derivatives (e.g. transformations to standard space, tissue segmentation) for FLAIR
and vice versa (e.g. WMH lesion-filling).</p>
<hr />
<h3 id="xasl_wrp_linearreg_t1w2mnim">xASL_wrp_LinearReg_T1w2MNI.m</h3>
<h4 id="format_6">Format</h4>
<pre><code class="matlab">xASL_wrp_LinearReg_T1w2MNI(x[, bAutoACPC])
</code></pre>

<h4 id="description_6">Description</h4>
<p>This submodule registers T1w linearly to the center of MNI space, a.k.a. ACPC alignment
The same transformation is applied to all other related scans (ASL4D, M0, FLAIR, etc.)
This facilitates MNI-based algorithms (e.g. SPM-based segmentation), and allows for visual QC with all images
roughly in the same space. This submodule first clips high values that can bias the registration algorithm, then performs
a center of mass-based ACPC alignment, and then several iterations of SPM coregistration.
Assuming that this submodule is run at the start of ExploreASL, all NIfTI orientation matrices are restored before running the registration.</p>
<hr />
<h3 id="xasl_wrp_resample2standardspacem">xASL_wrp_Resample2StandardSpace.m</h3>
<h4 id="format_7">Format</h4>
<pre><code class="matlab">xASL_wrp_Resample2StandardSpace(x)
</code></pre>

<h4 id="description_7">Description</h4>
<p>This submodule resamples all structural images &amp; their derivatives to standard space. It uses the transformation
fields that were obtained previously in the Structural module, concatenates all transformations into a single transformation
(if not already done) &amp; applies the transformation with a single interpolation (either trilinear for low quality or probability
maps, or 2nd order B-spline). Finally, it computes the Jacobian determinants (i.e. the derivative of the transformation field)
to obtain a map of the volumetric effects of the transformation. This Jacobian map is multiplied with the standard space resampled
images, to restore their (local &amp; global) total volume. The sum of volumes in native &amp; standard space are compared as QC.
This submodule is not only part of the structural module, but can be repeated when the transformation map is edited, e.g. after
longitudinal registration or after creation of a group-wise template.</p>
<hr />
<h3 id="xasl_wrp_segmentt1wm">xASL_wrp_SegmentT1w.m</h3>
<h4 id="format_8">Format</h4>
<pre><code class="matlab">[x] = xASL_wrp_SegmentT1w(x, SegmentSPM12)
</code></pre>

<h4 id="description_8">Description</h4>
<p>This submodule segments high resolution structural/anatomical scans into GM/WM/CSF/soft tissue/bone/air tissue classes.
It will save GM/WM/CSF in native space, and the transformation from native to standard space.
This transformation includes Geodesic Shooting/DARTEL for CAT12.</p>
<p>This submodule contains the following steps:</p>
<ol>
<li>Administration</li>
<li>Extra segmentation options by Jan Petr</li>
<li>Segmentation using CAT12
-&gt; If CAT12 fails, it will be repeated with higher contrast, higher strength affine preprocessing &amp; less biasfield regularization
-&gt; If CAT12 fails twice, it will be skipped &amp; SPM12 will be run</li>
<li>Segmentation using SPM12</li>
<li>File management CAT12</li>
<li>File management lesions</li>
<li>Resample lesions to standard space
-&gt; for the lesion masking. MORE EXPLANATION NEEDED BY JAN</li>
<li>Manage flowfields
-&gt; smooth combination non-linear flowfield outside the lesion &amp; uniform flowfield within the lesion</li>
<li>File management</li>
</ol>
<hr />
<h3 id="xasl_wrp_visualqc_structuralm">xASL_wrp_VisualQC_Structural.m</h3>
<h4 id="format_9">Format</h4>
<pre><code class="matlab">xASL_wrp_VisualQC_Structural(x)
</code></pre>

<h4 id="description_9">Description</h4>
<p>This submodule performs several visualizations for visual &amp; quantitative QC.</p>
<ol>
<li>After initial admin</li>
<li>It starts with the SPM UP parameters (courtesy of Cyril Pernet, his SPM UP scripts were
made more robust &amp; accurate by Jan &amp; Henk, &amp; are implemented here for T1w (&amp; optionally FLAIR).</li>
<li>Then it performs a collection of visualizations</li>
<li>Also repeated specifically for lesions &amp; manually provided ROIs</li>
<li>Finally, this contains a report of all missing raw &amp; derivative files, in native &amp; standard space,
printing the NIfTI orientation matrix content before (hdr.mat0) &amp; after registrations (hdr.mat)
The determinant of these matrices should be the same, otherwise LeftRight has flipped. This should
also be the same across a group scanned at the same scanner
Then various other QC functions are called &amp; all are summarized in a PDF report.</li>
</ol>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../Import_Module/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Module Import
            </div>
          </div>
        </a>
      
      
        <a href="../ASL_Module/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Module ASL
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.fe42c31b.min.js", "version": [{"mike": {"canonical_version": null, "css_dir": "css", "javascript_dir": "js", "version_selector": true}}]}</script>
    
    
      <script src="../assets/javascripts/bundle.4ea5477f.min.js"></script>
      
    
  </body>
</html>