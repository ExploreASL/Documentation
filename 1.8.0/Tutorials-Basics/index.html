
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://github.com/ExploreASL/1.8.0/Tutorials-Basics/">
      
      <link rel="icon" href="../img/favicon/favicon-96x96.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.2">
    
    
      
        <title>Tutorials (Basics) - ExploreASL</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6f955dcd.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ef6f36e2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tutorials-basics" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ExploreASL" class="md-header__button md-logo" aria-label="ExploreASL" data-md-component="logo">
      
  <img src="../img/favicon/brain_icon_500x500.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ExploreASL
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Tutorials (Basics)
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/ExploreASL/Documentation/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ExploreASL" class="md-nav__button md-logo" aria-label="ExploreASL" data-md-component="logo">
      
  <img src="../img/favicon/brain_icon_500x500.png" alt="logo">

    </a>
    ExploreASL
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ExploreASL/Documentation/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Modules/" class="md-nav__link">
        Modules
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Import_Module/" class="md-nav__link">
        Module Import
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Structural_Module/" class="md-nav__link">
        Module Structural
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ASL_Module/" class="md-nav__link">
        Module ASL
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Population_Module/" class="md-nav__link">
        Module Population
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Functions/" class="md-nav__link">
        Functions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../SPMxASL/" class="md-nav__link">
        SPM xASL Functions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Tutorials-ASL-BIDS/" class="md-nav__link">
        Tutorials (ASL-BIDS)
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Tutorials (Basics)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Tutorials (Basics)
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-to-run-exploreasl-using-matlab" class="md-nav__link">
    How to run ExploreASL using Matlab
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-run-a-compiled-exploreasl-version" class="md-nav__link">
    How to run a compiled ExploreASL Version
  </a>
  
    <nav class="md-nav" aria-label="How to run a compiled ExploreASL Version">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#windows" class="md-nav__link">
    Windows
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    Linux
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-run-exploreasl-using-the-docker-image" class="md-nav__link">
    How to run ExploreASL using the docker image
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-run-the-import-module" class="md-nav__link">
    How to run the import module
  </a>
  
    <nav class="md-nav" aria-label="How to run the import module">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sourcestructurejson" class="md-nav__link">
    sourcestructure.json
  </a>
  
    <nav class="md-nav" aria-label="sourcestructure.json">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-folderhierarchy" class="md-nav__link">
    1. folderHierarchy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-tokenordering" class="md-nav__link">
    2. tokenOrdering
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-tokensessionaliases" class="md-nav__link">
    3. tokenSessionAliases
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-tokenscanaliases" class="md-nav__link">
    4. tokenScanAliases
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-bmatchdirectories" class="md-nav__link">
    5. bMatchDirectories
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summary-of-the-2d_sleep-example" class="md-nav__link">
    Summary of the 2D_Sleep example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Tutorials-QC/" class="md-nav__link">
        Tutorials (QC)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Tutorials-Advanced/" class="md-nav__link">
        Tutorials (Advanced)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../DataParTemplate/" class="md-nav__link">
        Parameter Descriptions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../FAQ/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Requirements/" class="md-nav__link">
        Requirements
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Changes/" class="md-nav__link">
        Change Log
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../License/" class="md-nav__link">
        License
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../About/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-to-run-exploreasl-using-matlab" class="md-nav__link">
    How to run ExploreASL using Matlab
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-run-a-compiled-exploreasl-version" class="md-nav__link">
    How to run a compiled ExploreASL Version
  </a>
  
    <nav class="md-nav" aria-label="How to run a compiled ExploreASL Version">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#windows" class="md-nav__link">
    Windows
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    Linux
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-run-exploreasl-using-the-docker-image" class="md-nav__link">
    How to run ExploreASL using the docker image
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-run-the-import-module" class="md-nav__link">
    How to run the import module
  </a>
  
    <nav class="md-nav" aria-label="How to run the import module">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sourcestructurejson" class="md-nav__link">
    sourcestructure.json
  </a>
  
    <nav class="md-nav" aria-label="sourcestructure.json">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-folderhierarchy" class="md-nav__link">
    1. folderHierarchy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-tokenordering" class="md-nav__link">
    2. tokenOrdering
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-tokensessionaliases" class="md-nav__link">
    3. tokenSessionAliases
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-tokenscanaliases" class="md-nav__link">
    4. tokenScanAliases
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-bmatchdirectories" class="md-nav__link">
    5. bMatchDirectories
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summary-of-the-2d_sleep-example" class="md-nav__link">
    Summary of the 2D_Sleep example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ExploreASL/Documentation/edit/master/docs/Tutorials-Basics.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="tutorials-basics">Tutorials (Basics)</h1>
<hr />
<h2 id="how-to-run-exploreasl-using-matlab">How to run ExploreASL using Matlab</h2>
<p>The first thing you have to do, to use <strong>ExploreASL</strong>, is to clone the <strong>ExploreASL</strong> repository. If you want to run <strong>ExploreASL</strong> from Matlab, we recommend to clone the main repository directly from the official <a href="https://github.com/ExploreASL/ExploreASL">GitHub website</a>. You also have the option to download the zipped version or to download an older <a href="https://github.com/ExploreASL/ExploreASL/releases">release</a>.</p>
<p>If you are new to Matlab, we recommend checking out a <a href="https://www.mathworks.com/support/learn-with-matlab-tutorials.html">Matlab tutorial</a>. It can be helpful to add the <strong>ExploreASL</strong> directory to your Matlab paths. Open Matlab, select the <strong>Home</strong> tab, and add the <strong>ExploreASL</strong> directory including its subfolders using the <strong>Set Path</strong> option. Now change your working directory, using the <strong>Current Folder</strong> tab or the <strong>cd</strong> command, to the <strong>ExploreASL</strong> directory.</p>
<p>To run <strong>ExploreASL</strong> you have to type in the following command in the <strong>Command Window</strong>: <code>ExploreASL</code>. If you already created an <strong>ASL-BIDS dataset</strong> in sourcedata format, you can run the full default <strong>ExploreASL</strong> pipeline like this:</p>
<pre><code class="matlab">DatasetRoot = 'C:\...\MY-BIDS-DATASET';
ImportModules = true;
ProcessModules = true;
bPause = false;
[x] = ExploreASL_Master(DatasetRoot, ImportModules, ProcessModules, bPause);
</code></pre>

<hr />
<h2 id="how-to-run-a-compiled-exploreasl-version">How to run a compiled ExploreASL Version</h2>
<p>To compile ExploreASL you have to run the <code>xASL_adm_MakeStandalone.m</code> script. If necessary, you can also ask the developer team for a specific compiled version. Providing a compiled version for every operating system and corresponding Matlab version is currently not feasible for us. Please feel free to ask us for help though!
A compiled version of ExploreASL always requires the corresponding Matlab Runtime. Please checkout the official <a href="https://mathworks.com/products/compiler/matlab-runtime.html">Matlab Documentation</a>. Download the Matlab Runtime of the Matlab Version which was used for the compilation. Make sure to install the Matlab Runtime correctly. If you're using Windows, it is important that the path to the Matlab Runtime is added to Windows <strong>PATH</strong> during the installation.</p>
<h3 id="windows">Windows</h3>
<p>Let's assume you want to run the compiled version of <strong>ExploreASL latest</strong>. Check the contents of the folder created by <code>xASL_adm_MakeStandalone.m</code>, which contains the compiled version. There should be a file called <code>xASL_latest.exe</code>. We recommend using the command line interface now. For this you can go to the address bar of your file explorer. Type in <code>cmd</code> to open the command prompt in the current folder. The following command will start <strong>ExploreASL</strong>, import the <strong>ASL-BIDS dataset</strong> in sourcedata format, and process the dataset corresponding to your <code>DatasetRoot</code> directory:</p>
<pre><code class="console">xASL_latest.exe &quot;c:\MY-BIDS-DATASET&quot; &quot;1&quot; &quot;1&quot;
</code></pre>

<p>The executable will extract all necessary data from the CTF archive within the folder. This is totally normal. Within the command window you should see that <strong>ExploreASL</strong> is starting to process the given dataset:</p>
<pre><code class="console">xASL_latest.exe &quot;c:\MY-BIDS-DATASET&quot; &quot;1&quot; &quot;1&quot;
(insert example here)
</code></pre>

<p>To test if it is possible to initialize <strong>ExploreASL</strong> without the processing of a dataset, you could run the following command:</p>
<pre><code class="console">xASL_latest.exe &quot;&quot; &quot;0&quot; &quot;0&quot;
</code></pre>

<p>The usual <strong>ExploreASL</strong> parameters (<code>DatasetRoot</code>, <code>ImportModules</code>, <code>ProcessModules</code>, <code>bPause</code>, <code>iWorker</code>, <code>nWorkers</code>) have to be given to the compiled <strong>ExploreASL</strong> version as strings. The resulting output could look like this:</p>
<pre><code class="console">xASL_latest.exe &quot;&quot; &quot;0&quot; &quot;0&quot;
(insert example here)
</code></pre>

<h3 id="linux">Linux</h3>
<p>On Linux you can basically do the same as above. We can run the ExploreASL shell script with a specified Matlab MCR (here we use <strong>version 96</strong> e.g.) using the following command:</p>
<pre><code class="console">./run_xASL_latest.sh /usr/local/MATLAB/MATLAB_Runtime/v96/ &quot;&quot; &quot;0&quot; &quot;0&quot;
</code></pre>

<p>Using the options <code>"" "0" "0"</code> we initialize <strong>ExploreASL</strong>, but do not process a dataset. To run a dataset, we have to switch the <code>ImportModules</code> and/or the <code>ProcessModules</code> parameter from <code>0</code> to <code>1</code> and pass a path for the <code>DatasetRoot</code> directory. This could look something like this:</p>
<pre><code class="console">./run_xASL_latest.sh /usr/local/MATLAB/MATLAB_Runtime/v96/ &quot;/home/MY-BIDS-DATASET&quot; &quot;1&quot; &quot;1&quot;
(insert example here)
</code></pre>

<hr />
<h2 id="how-to-run-exploreasl-using-the-docker-image">How to run ExploreASL using the docker image</h2>
<p>First you have to pull an official docker image from the <strong>ExploreASL</strong> repository:</p>
<pre><code class="console">docker pull exploreasl/xasl:latest
</code></pre>

<p>Check out your local images using <code>docker images</code>. If you want to rename the docker image, tag your image using the docker tag command:</p>
<pre><code class="console">docker tag exploreasl/xasl:latest xasl:my-version
</code></pre>

<p>To start a docker container of <strong>ExploreASL v1.7.0</strong> e.g., you can use the following command:</p>
<pre><code class="console">docker run -e DATASETROOT=MY-BIDS-DATASET
       -e IMPORTMODULES=1 -e PROCESSMODULES=1
       -v /home/.../incoming:/data/incoming 
       -v /home/.../outgoing:/data/outgoing xasl:1.7.0
</code></pre>

<ul>
<li>Here <code>DATASETROOT</code> is an environment variable which is a relative path to the <code>DATASETROOT</code> directory of your dataset.</li>
<li>The <code>IMPORTMODULES</code> and <code>PROCESSMODULES</code> are the parameters of ExploreASL_Master</li>
<li><code>/home/.../incoming:/data/incoming</code> is used to mount your dataset folder (<code>/home/.../incoming</code>) to its corresponding docker dataset folder (<code>/data/incoming</code>). </li>
<li>The same notation is used to mount the docker dataset output folder (<code>/data/outgoing</code>) to its corresponding real output folder on your drive (<code>/home/.../outgoing</code>).</li>
</ul>
<hr />
<h2 id="how-to-run-the-import-module">How to run the import module</h2>
<p>A separate import module has been created for two reasons:</p>
<ol>
<li>to perform a DICOM to NIFTI conversion and store ancillary DICOM header information in <code>*.mat</code> files and</li>
<li>to restructure an existing arbitrary scan directory structure into a structure that ExploreASL is familiar with.</li>
</ol>
<p>This import module uses regular expressions and the directory structure can be can be flexibly defined as long as it is fixed per study.
The search function then searches across these directories and copies all files to the ExploreASL directory structure, and performs the conversion to NIFTI if necessary.</p>
<p>For the import of the data, the best is to execute...</p>
<pre><code class="matlab">ExploreASL_Master('/home/username/Path_for_the_root_folder', 1, 0);
</code></pre>

<p>...where 1 here is the whole Import module, which is divided in 4 parts <code>[1 1 1 1]</code> <a href="https://exploreasl.github.io/Documentation/latest/Tutorials-ASL-BIDS/">ASL-BIDS Tutorial</a>.</p>
<p>The 2D_Sleep study data example has an original directory structure as follows: <code>ROOT\sourcedata\subject\session\scan_ID</code>, and the directories containing the DICOMs. See image below:</p>
<pre><code>2D_Sleep/
  analysis/
  sourcedata/
    101/
      Session1/
        M0/
        PSEUDO_10_min/
        T1_weighted/
      Session2/
        ...
    102/
      ...
</code></pre>

<p>Explore ASL creates the following directory structure <code>ROOT\analysis\subject\</code> and puts structural images directly and ASL images to directories <code>ASL_1</code>, <code>ASL_2</code> depending on the session - see below:</p>
<pre><code>2D_Sleep/
  derivatives/
    101/
      ASL_1/
      ASL_2/
    102/
      ...
</code></pre>

<hr />
<h3 id="sourcestructurejson">sourcestructure.json</h3>
<p>The <code>sourcestructure.json</code> file contains the following code (different for each study):</p>
<pre><code>{  
       &quot;folderHierarchy&quot; = [^(\d{3}).*', '^Session([12])$','^(PSEUDO_10_min|T1-weighted|M0)$'],
       &quot;tokenOrdering&quot; = [ 1 2 3],
       &quot;tokenSessionAliases&quot; = [ '^1$', 'ASL_1'; '^2$', 'ASL_2' ],
       &quot;tokenScanAliases&quot; = [ '^PSEUDO_10_min$', 'ASL4D'; '^M0$', 'M0'; '^T1-weighted$', 'T1' ],
       &quot;bMatchDirectories&quot; = true;
}
</code></pre>

<h4 id="1-folderhierarchy">1. folderHierarchy</h4>
<pre><code>folderHierarchy = {'^(\d{3}).*', '^Session([12])$','^(PSEUDO_10_min|T1-weighted|M0)$'}
</code></pre>

<p>This specifies the names of all directories at all levels. In this case, we have specified regular expressions for directories at three different levels:</p>
<ul>
<li><code>^(\d{3}).*</code></li>
<li><code>^Session([12])$</code></li>
<li><code>^(PSEUDO_10_min|T1-weighted|M0)$</code></li>
</ul>
<p>This means that we will identify three directory levels, each with a certain name, following regular expressions (find more in the <a href="https://de.mathworks.com/help/matlab/ref/regexp.html">matlab definition</a> of regular expressions).</p>
<p>At each directory level, it first decides if the directory matches the regular expression, then it also decides if it extract tokens from the string or not - typically tokens are in brackets. More below.</p>
<ul>
<li>Extracting a token: <code>^(\d{3}).*</code></li>
<li>Not extracting a token: <code>^\d{3}.*</code></li>
</ul>
<p>Tokens information extracted from the directory name at each directory level. 
The tokens are numbered by the directory level and can be later used to label patients, sequences etc. See <strong>tokenOrdering</strong> below.</p>
<p>We use normal characters and metacharacters.
Expressions from characters and metacharacters are then further coupled with quantifiers, grouping operators, and conditional operators.
Some basic regular expressions are described here with examples - for a full description see the link above:</p>
<p><strong>Metacharacters:</strong></p>
<ul>
<li><code>.</code> -- any character -- <code>'..ain'</code> == <code>'drain'</code> == <code>'train'</code> != <code>'pain'</code> != <code>'rain'</code></li>
<li><code>[c1c2]</code> -- any character within the brackets -- <code>'[rp.]ain'</code> == <code>'rain'</code> == <code>'pain'</code> == <code>'.ain'</code> != <code>'wain'</code></li>
<li><code>\d</code> -- any numeric digit, equivalent to <code>[0-9]</code></li>
</ul>
<p><strong>Quantifiers (applied on an expression):</strong></p>
<ul>
<li><code>expr*</code> -- repeat 0+ times -- <code>'.*'</code> can give anything</li>
<li><code>expr?</code> -- repeat 0 or 1 times - <code>'.?'</code> == <code>''</code> == <code>'p'</code> != <code>'pp'</code></li>
<li><code>expr+</code> -- repeat 1+ times</li>
<li><code>expr{n}</code> -- repeat n times consecutively</li>
</ul>
<p><strong>Grouping operators (allows to capture tokens):</strong></p>
<ul>
<li><code>expr</code> -- group elements and capture tokens as a part of the text -- <code>'(.)ain'</code> matches * * <code>'rain'</code> or <code>'pain'</code> and returns <code>'r'</code> or <code>'p'</code> as a token</li>
<li><code>(?:expr)</code> -- group elements but do not capture tokens</li>
</ul>
<p><strong>Anchors:</strong></p>
<ul>
<li><code>^expr</code> -- beginning of a text -- <code>'^M.*'</code> is any string starting with M</li>
<li><code>expr$</code> -- end of the text -- <code>'.*M$'</code> is any string ending with M</li>
</ul>
<p><strong>Conditional operators:</strong></p>
<ul>
<li><code>expr1|expr2</code> -- matches expression 1 or 2</li>
</ul>
<p><strong>Some examples of strings:</strong></p>
<ul>
<li>
<p><code>^(\d{3}).*</code> -- a string starting with 3 digits and any ending, the digits are extracted as tokens. <code>001a, 212abasd, 231absd</code>.</p>
</li>
<li>
<p><code>^(P\d{2})$</code> -- a string starting with P and ending with two digits, the whole string is taken as a token. <code>P12, P32</code>.</p>
</li>
<li>
<p><code>.*(T1_MPR|pcasl|M0).*\.PAR$</code> -- a string with any beginning, containing T1_MPR or pcasl or M0 (this is taken as a token), and ending by <code>.PAR</code>. <code>test_T1_MPR_testtest.PAR, another_pcasl.PAR, M0_test_.PAR</code>.</p>
</li>
<li>
<p><code>.*(T1|ASL).*(PCASL|PASL)</code> -- extracts string containing T1 or ASL and PCASL and PASL. Two tokens are extracted. In the above example, the first level is subject, which has three digits (e.g. <code>101</code> or <code>102</code>), specified by <code>\d{3}</code> as regular expression. This is between brackets <code>( )</code> to define that this is the first token.</p>
</li>
</ul>
<h4 id="2-tokenordering">2. tokenOrdering</h4>
<pre><code>tokenOrdering = [1 2 3];
</code></pre>

<p>Tokens (parts of the directory names) were extracted according to the regular expressions above. Here we decide how the tokens are used.</p>
<p>This is specified by tokenOrdering = <code>[patientName, SessionName, ScanName]</code></p>
<ul>
<li><code>tokenOrdering = [1 2 3];</code> = first token is used for patient name, second for session name, third for scan name</li>
<li><code>tokenOrdering = [1 0 2];</code> = first token is used for patient name, second for scan name, session name is not assigned</li>
<li><code>tokenOrdering = [1 3 2];</code> = first token is used for patient name, third for session name, second for scan name</li>
<li><code>tokenOrdering = [2 1 3];</code> = second token is used for patient name, first for session name, third for scan name</li>
</ul>
<h4 id="3-tokensessionaliases">3. tokenSessionAliases</h4>
<pre><code>tokenSessionAliases = {'^1$', 'ASL_1'; '^2$', 'ASL_2'};
</code></pre>

<p>The second token defines the name of the session. The token was extracted using a regular expression <code>*^Session([12])$*</code>. This can represent a string <code>Session1</code> or <code>Session2</code>. And either <code>1</code> or <code>2</code> is taken as the token.</p>
<p>In the session-aliases, each row represents one session name. The first column is the regular expression for the token, the second column gives the final name.</p>
<ul>
<li>
<p><code>^1$ ASL_1</code></p>
</li>
<li>
<p><code>^2$ ASL_2</code></p>
</li>
</ul>
<p>Here, the token name <code>^1$</code> - that is a string equaling to <code>"1"</code> is replaced in the analysis folder by the session name <code>ASL_1</code>.</p>
<h4 id="4-tokenscanaliases">4. tokenScanAliases</h4>
<pre><code>tokenScanAliases = {'^PSEUDO_10_min$', 'ASL4D'; '^M0$', 'M0'; '^T1-weighted$', 'T1'};
</code></pre>

<p>The third token defines the name of the scan. Each row represents one scan name. The first column is the regular expression for the token, the second column gives the final name of the scan.</p>
<ul>
<li>
<p><code>^PSEUDO_10_min$ ASL4D</code></p>
</li>
<li>
<p><code>^M0$ M0</code></p>
</li>
<li>
<p><code>^T1-weighted$ T1</code></p>
</li>
</ul>
<p>The DICOMs in the directory <code>PSEUDO_10_min</code> are thus extracted to a NIFTI file called <code>ASL4D.nii</code>.</p>
<p>Note: The names ASL4D, M0, T1, FLAIR and WMH_SEGM are fixed names in the pipeline data structure. ASL4D and T1 are required, whereas M0, FLAIR and WMH_SEGM are optionally. When M0 is available, the pipeline will divide the perfusion-weighted image by the M0 image in the quantification part. When FLAIR and WMH_SEGM are available, tissue misclassification in the T1 gray matter (GM) and white matter (WM) because of white matter hyperintensities (WMH) will be corrected.</p>
<h4 id="5-bmatchdirectories">5. bMatchDirectories</h4>
<p>Set to <code>true</code> if it should look for directories and DICOMs inside. Set to <code>false</code> when you will.</p>
<hr />
<h3 id="summary-of-the-2d_sleep-example">Summary of the 2D_Sleep example</h3>
<p>In the current example of 2D_Sleep, we have two subjects: 101 and 102 with each two ASL sessions.
In ExploreASL, each subject has a single T1 scan and can have multiple ASL sessions.
This is the case when the anatomy is not expected to change for the different ASL sessions, e.g. when scans are repeated before and after a CO2 or treatment challenge.
The data structure will be <code>derivatives\ExploreASL\SubjectName\T1.nii</code> for the anatomical scans (T1 or FLAIR) and <code>derivatives\ExploreASL\SubjectName\ASL_1\ASL4D.nii</code> and <code>derivatives\ExploreASL\SubjectName\ASL_2\ASL4D.nii</code> for ASL sessions. </p>
<p>If it concerns a follow-up study, where scan sessions have months or years in between them and brain anatomy is expected to change significantly between the scan sessions, then the data should be set up as a longitudinal study design.
In this case, different time points are set up as <code>derivatives\ExploreASL\SubjectName_1\T1.nii</code> and <code>derivatives\ExploreASL\SubjectName_2\T1.nii</code> for two longitudinal scans of the same subject, where <code>_1</code> designates the time point.
So a longitudinal study with two ASL scans per scan session (e.g. a medication challenge is repeated with 6 months time difference) would look like:</p>
<ul>
<li>
<p><code>derivatives\ExploreASL\SubjectName_1\T1.nii</code>, <code>derivatives\ExploreASL\SubjectName_1\ASL_1\ASL4D.nii</code> &amp; <code>derivatives\ExploreASL\SubjectName_1\ASL_2\ASL4D.nii</code> for the first time point and</p>
</li>
<li>
<p><code>derivatives\ExploreASL\SubjectName_2\T1.nii</code>, <code>derivatives\ExploreASL\SubjectName_1\ASL_2\ASL4D.nii</code> &amp; <code>derivatives\ExploreASL\SubjectName_2\ASL_2\ASL4D.nii</code> for the second time point.</p>
</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../Tutorials-ASL-BIDS/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Tutorials (ASL-BIDS)
            </div>
          </div>
        </a>
      
      
        <a href="../Tutorials-QC/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Tutorials (QC)
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.fe42c31b.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.4ea5477f.min.js"></script>
      
    
  </body>
</html>