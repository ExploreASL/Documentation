<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Functions - ExploreASL</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Functions";
    var mkdocs_page_input_path = "Functions.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> ExploreASL</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../Modules/">Modules</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../Import_Module/">Module Import</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../Structural_Module/">Module Structural</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../ASL_Module/">Module ASL</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../Population_Module/">Module Population</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Functions</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_catchnumbersfromstring">xASL_adm_CatchNumbersFromString</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_checkfilecount">xASL_adm_CheckFileCount</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_1">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_1">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_checkpermissions">xASL_adm_CheckPermissions</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_2">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_2">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_checkspm">xASL_adm_CheckSPM</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_3">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_3">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_cleanupbeforererun">xASL_adm_CleanUpBeforeRerun</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_4">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_4">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_comparedatasets">xASL_adm_CompareDataSets</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_5">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_5">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_comparelistsm">xASL_adm_CompareLists.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_6">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_6">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_convertdate2nrm">xASL_adm_ConvertDate2Nr.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_7">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_7">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_convertnr2timem">xASL_adm_ConvertNr2Time.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_8">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_8">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_convertsubjsess2subj_sessm">xASL_adm_ConvertSubjSess2Subj_Sess.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_9">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_9">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_converttime2nrm">xASL_adm_ConvertTime2Nr.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_10">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_10">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_copymovefilelistm">xASL_adm_CopyMoveFileList.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_11">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_11">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_correctnamem">xASL_adm_CorrectName.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_12">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_12">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_createcsvfilem">xASL_adm_CreateCSVfile.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_13">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_13">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_createfilereportm">xASL_adm_CreateFileReport.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_14">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_14">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_defineaslresolutionm">xASL_adm_DefineASLResolution.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_15">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_15">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_deletefilepairm">xASL_adm_DeleteFilePair.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_16">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_16">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_dicom2parmsm">xASL_adm_Dicom2Parms.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_17">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_17">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_findbyregexpm">xASL_adm_FindByRegExp.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_18">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_18">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_findstrindexm">xASL_adm_FindStrIndex.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_19">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_19">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_getfslistm">xASL_adm_GetFsList.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_20">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_20">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_getnumfromstrm">xASL_adm_GetNumFromStr.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_21">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_21">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_getphilipsscalingm">xASL_adm_GetPhilipsScaling.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_22">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_22">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_getusernamem">xASL_adm_GetUserName.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_23">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_23">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_hex2numm">xASL_adm_Hex2Num.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_24">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_24">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_lesionreslicelistm">xASL_adm_LesionResliceList.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_25">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_25">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_load4dmemmappingm">xASL_adm_Load4DMemMapping.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_26">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_26">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_loadparmsm">xASL_adm_LoadParms.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_27">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_27">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_loadxm">xASL_adm_LoadX.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_28">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_28">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_orderfieldsm">xASL_adm_OrderFields.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_29">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_29">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_otherlistspmm">xASL_adm_OtherListSPM.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_30">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_30">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_par2parmsm">xASL_adm_Par2Parms.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_31">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_31">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_parreadheaderm">xASL_adm_ParReadHeader.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_32">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_32">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_remove_1_spmm">xASL_adm_Remove_1_SPM.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_33">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_33">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_replacesymbolsm">xASL_adm_ReplaceSymbols.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_34">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_34">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_resetvisualizationslicesm">xASL_adm_ResetVisualizationSlices.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_35">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_35">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_savejsonm">xASL_adm_SaveJSON.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_36">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_36">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_uigetinputm">xASL_adm_uiGetInput.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_37">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_37">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_unziporcopym">xASL_adm_UnzipOrCopy.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_38">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_38">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_voxel2realworldcoordinatesm">xASL_adm_Voxel2RealWorldCoordinates.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_39">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_39">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_adm_zipfilelistm">xASL_adm_ZipFileList.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_40">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_40">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_bids_add2participantstsvm">xASL_bids_Add2ParticipantsTSV.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_41">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_41">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_bids_dicom2jsonm">xASL_bids_Dicom2JSON.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_42">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_42">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_bids_insertjsonfieldsm">xASL_bids_InsertJSONFields.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_43">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_43">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_bids_parms2bidsm">xASL_bids_parms2BIDS.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_44">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_44">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_bids_parrec2jsonm">xASL_bids_PARREC2JSON.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_45">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_45">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_fsl_runfslm">xASL_fsl_RunFSL.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_46">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_46">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_fsl_setfsldirm">xASL_fsl_SetFSLdir.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_47">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_47">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_fsl_topupm">xASL_fsl_TopUp.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_48">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_48">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_import_jsonm">xASL_import_json.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_49">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_49">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_imwritem">xASL_imwrite.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_50">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_50">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_addim2qcm">xASL_im_AddIM2QC.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_51">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_51">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_bilateralfilterm">xASL_im_BilateralFilter.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_52">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_52">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_centerofmassm">xASL_im_CenterOfMass.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_53">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_53">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_cleanupwmhnoisem">xASL_im_CleanupWMHnoise.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_54">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_54">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_clipextremesm">xASL_im_ClipExtremes.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_55">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_55">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_colorbarm">xASL_im_colorbar.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_56">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_56">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_column2imm">xASL_im_Column2IM.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_57">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_57">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_compareniftiresolutionxyzm">xASL_im_CompareNIfTIResolutionXYZ.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_58">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_58">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_computedicem">xASL_im_ComputeDice.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_59">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_59">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_createasldeformationfieldm">xASL_im_CreateASLDeformationField.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_60">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_60">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_createpseudocbfm">xASL_im_CreatePseudoCBF.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_61">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_61">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_createslicegradientm">xASL_im_CreateSliceGradient.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_62">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_62">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_createvisualfigm">xASL_im_CreateVisualFig.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_63">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_63">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_createvisuallongregm">xASL_im_CreateVisualLongReg.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_64">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_64">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_cropparmsacquirem">xASL_im_CropParmsAcquire.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_65">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_65">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_cropparmsapplym">xASL_im_CropParmsApply.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_66">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_66">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_decomposeaffinetransformationm">xASL_im_DecomposeAffineTransformation.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_67">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_67">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_determineflipm">xASL_im_DetermineFlip.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_68">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_68">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_dilateerodefullm">xASL_im_DilateErodeFull.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_69">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_69">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_dilateerodeseparablem">xASL_im_DilateErodeSeparable.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_70">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_70">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_dilateerodespherem">xASL_im_DilateErodeSphere.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_71">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_71">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_dilateroim">xASL_im_dilateROI.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_72">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_72">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_dummyorientationniftim">xASL_im_DummyOrientationNIfTI.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_73">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_73">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_estimateresolutionm">xASL_im_EstimateResolution.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_74">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_74">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_flipm">xASL_im_Flip.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_75">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_75">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_fliporientationm">xASL_im_FlipOrientation.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_76">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_76">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_fliporientation2m">xASL_im_FlipOrientation2.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_77">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_77">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_im2columnm">xASL_im_IM2Column.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_78">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_78">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_joincolormapm">xASL_im_joinColormap.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_79">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_79">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_jointhistm">xASL_im_JointHist.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_80">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_80">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_lesion2catm">xASL_im_Lesion2CAT.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_81">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_81">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_lesion2maskm">xASL_im_Lesion2Mask.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_82">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_82">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_m0erodesmoothextrapolatem">xASL_im_M0ErodeSmoothExtrapolate.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_83">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_83">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_masknegativevascularsignalm">xASL_im_MaskNegativeVascularSignal.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_84">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_84">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_maskpeakvascularsignalm">xASL_im_MaskPeakVascularSignal.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_85">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_85">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_modulationm">xASL_im_Modulation.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_86">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_86">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_normalizelabelingterritoriesm">xASL_im_NormalizeLabelingTerritories.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_87">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_87">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_overlapt1_aslm">xASL_im_OverlapT1_ASL.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_88">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_88">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_pcam">xASL_im_PCA.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_89">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_89">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_presmoothm">xASL_im_PreSmooth.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_90">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_90">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_processm0conventionalm">xASL_im_ProcessM0Conventional.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_91">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_91">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_projectlabelsoverdatam">xASL_im_ProjectLabelsOverData.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_92">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_92">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_pvcbsplinem">xASL_im_PVCbspline.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_93">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_93">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_pvckernelm">xASL_im_PVCkernel.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_94">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_94">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_resamplelinearfairm">xASL_im_ResampleLinearFair.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_95">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_95">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_rescalelinearm">xASL_im_RescaleLinear.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_96">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_96">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_restoreorientationm">xASL_im_RestoreOrientation.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_97">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_97">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_rotatem">xASL_im_rotate.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_98">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_98">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_skullstripm">xASL_im_SkullStrip.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_99">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_99">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_smooth3dm">xASL_im_Smooth3D.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_100">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_100">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_tileimagesm">xASL_im_TileImages.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_101">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_101">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_transformdata2viewm">xASL_im_TransformData2View.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_102">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_102">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_upsamplem">xASL_im_Upsample.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_103">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_103">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_visualizeroism">xASL_im_VisualizeROIs.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_104">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_104">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_visualqc_topupm">xASL_im_VisualQC_TopUp.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_105">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_105">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_im_zeroedgesm">xASL_im_ZeroEdges.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_106">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_106">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_init_convertm2jsonm">xASL_init_ConvertM2JSON.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_107">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_107">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_init_defaulteffectiveresolutionm">xASL_init_DefaultEffectiveResolution.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_108">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_108">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_init_definestudydatam">xASL_init_DefineStudyData.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_109">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_109">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_init_filesystemm">xASL_init_FileSystem.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_110">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_110">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_init_initializemutexm">xASL_init_InitializeMutex.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_111">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_111">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_init_labelcolorsmat">xASL_init_LabelColors.mat</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_112">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_112">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_init_loadmetadatam">xASL_init_LoadMetadata.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_113">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_113">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_init_longitudinalregistrationm">xASL_init_LongitudinalRegistration.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_114">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_114">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_init_visualizationsettingsm">xASL_init_VisualizationSettings.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_115">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_115">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_io_createniftim">xASL_io_CreateNifti.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_116">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_116">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_io_dcm2niim">xASL_io_dcm2nii.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_117">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_117">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_io_dcmtkreadm">xASL_io_DcmtkRead.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_118">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_118">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_io_makenifti4dicomm">xASL_io_MakeNifti4DICOM.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_119">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_119">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_io_pairwisesubtractionm">xASL_io_PairwiseSubtraction.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_120">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_120">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_io_readthedicomm">xASL_io_ReadTheDicom.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_121">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_121">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_io_splitasl_m0m">xASL_io_SplitASL_M0.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_122">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_122">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_iterationm">xASL_Iteration.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_123">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_123">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_num2strm">xASL_num2str.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_124">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_124">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_asymmetryindexm">xASL_qc_AsymmetryIndex.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_125">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_125">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_cat12_iqrm">xASL_qc_CAT12_IQR.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_126">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_126">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_collectparametersm">xASL_qc_CollectParameters.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_127">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_127">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_collectqc_aslm">xASL_qc_CollectQC_ASL.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_128">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_128">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_collectqc_funcm">xASL_qc_CollectQC_func.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_129">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_129">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_collectqc_structuralm">xASL_qc_CollectQC_Structural.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_130">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_130">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_collectsoftwareversionsm">xASL_qc_CollectSoftwareVersions.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_131">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_131">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_comparetemplatem">xASL_qc_CompareTemplate.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_132">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_132">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_computefovcoveragem">xASL_qc_ComputeFoVCoverage.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_133">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_133">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_computeniftiorientationm">xASL_qc_ComputeNiftiOrientation.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_134">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_134">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_createpdfm">xASL_qc_CreatePDF.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_135">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_135">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_fa_outliersm">xASL_qc_FA_Outliers.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_136">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_136">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_obtainqccategoriesfromjpgm">xASL_qc_ObtainQCCategoriesFromJPG.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_137">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_137">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_pcpstructuralm">xASL_qc_PCPStructural.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_138">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_138">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_printorientationm">xASL_qc_PrintOrientation.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_139">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_139">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_tanimotocoeffm">xASL_qc_TanimotoCoeff.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_140">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_140">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_temporalsnrm">xASL_qc_temporalSNR.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_141">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_141">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_wadqcdcm">xASL_qc_WADQCDC.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_142">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_142">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_qc_wadqc_generatedescriptorm">xASL_qc_WADQC_GenerateDescriptor.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_143">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_143">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_quant_agesex2hctm">xASL_quant_AgeSex2Hct.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_144">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_144">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_quant_feastm">xASL_quant_FEAST.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_145">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_145">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_quant_getcontrollabelorderm">xASL_quant_GetControlLabelOrder.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_146">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_146">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_quant_hct2bloodt1m">xASL_quant_Hct2BloodT1.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_147">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_147">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_quant_m0m">xASL_quant_M0.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_148">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_148">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_quant_singlepldm">xASL_quant_SinglePLD.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_149">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_149">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_spm_affinem">xASL_spm_affine.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_150">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_150">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_spm_biasfieldcorrectionm">xASL_spm_BiasfieldCorrection.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_151">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_151">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_spm_coregm">xASL_spm_coreg.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_152">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_152">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_spm_defacem">xASL_spm_deface.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_153">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_153">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_spm_deformationsm">xASL_spm_deformations.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_154">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_154">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_atlasforstatsm">xASL_stat_AtlasForStats.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_155">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_155">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_computediffercovm">xASL_stat_ComputeDifferCoV.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_156">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_156">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_computemeanm">xASL_stat_ComputeMean.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_157">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_157">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_computespatialcovm">xASL_stat_ComputeSpatialCoV.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_158">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_158">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_equalvariancestestm">xASL_stat_EqualVariancesTest.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_159">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_159">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_fcdfm">xASL_stat_fcdf.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_160">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_160">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_getroistatisticsm">xASL_stat_GetROIstatistics.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_161">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_161">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_madnanm">xASL_stat_MadNan.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_162">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_162">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_meanssimm">xASL_stat_MeanSSIM.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_163">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_163">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_multiplelinregm">xASL_stat_MultipleLinReg.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_164">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_164">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_printstatsm">xASL_stat_PrintStats.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_165">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_165">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_psnrm">xASL_stat_PSNR.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_166">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_166">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_quantilenanm">xASL_stat_QuantileNan.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_167">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_167">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_robustmeanm">xASL_stat_RobustMean.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_168">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_168">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_shapirowilkm">xASL_stat_ShapiroWilk.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_169">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_169">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_stdnanm">xASL_stat_StdNan.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_170">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_170">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_sumnanm">xASL_stat_SumNan.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_171">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_171">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_tcdfm">xASL_stat_tcdf.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_172">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_172">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_ticdfm">xASL_stat_ticdf.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_173">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_173">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_ttestm">xASL_stat_ttest.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_174">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_174">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_ttest2m">xASL_stat_ttest2.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_175">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_175">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_stat_varnanm">xASL_stat_VarNan.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_176">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_176">Description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#xasl_str2numm">xASL_str2num.m</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#function_177">Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#description_177">Description</a>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../Requirements/">Requirements</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../License/">License</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../About/">About</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">ExploreASL</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Functions</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="list-of-exploreasl-functions">List of ExploreASL Functions</h2>
<hr />
<h3 id="xasl_adm_catchnumbersfromstring">xASL_adm_CatchNumbersFromString</h3>
<h4 id="function">Function</h4>
<pre><code class="matlab">function [OutputNumber] = xASL_adm_CatchNumbersFromString(InputString)
</code></pre>

<h4 id="description">Description</h4>
<p>...</p>
<hr />
<h3 id="xasl_adm_checkfilecount">xASL_adm_CheckFileCount</h3>
<h4 id="function_1">Function</h4>
<pre><code class="matlab">function [result, files] = xASL_adm_CheckFileCount(path, expr, mincount, failifmissing)
</code></pre>

<h4 id="description_1">Description</h4>
<p>Checks the given PATH for files corresponding to the SPM_SELECT regular expression EXPR. Returns if the number of files is equal to or higher than MINCOUNT. If FAILIFMISSING is true and not enough files, then throw and error. If everything goes ok and second output argument is specified then return also the list of files.</p>
<hr />
<h3 id="xasl_adm_checkpermissions">xASL_adm_CheckPermissions</h3>
<h4 id="function_2">Function</h4>
<pre><code class="matlab">function [FilesList, FilesExeList, FoldersList] = xASL_adm_CheckPermissions(InputPath, FilesExecutable)
</code></pre>

<h4 id="description_2">Description</h4>
<p>This function does a recursive search through the root folder &amp; makes a list of the attributes of all files and folders.
It tries to reset the attributes to what we desire, which is by default:</p>
<ul>
<li>664 for files (meaning only reading &amp; writing for users &amp; group, &amp; read-only for others) </li>
<li>775 for folders (meaning reading, writing &amp; opening for current user &amp; current group, &amp; for others only reading &amp; opening) </li>
</ul>
<p>For executable files we also want 775. Note that the permission to 'execute a folder' means opening them</p>
<hr />
<h3 id="xasl_adm_checkspm">xASL_adm_CheckSPM</h3>
<h4 id="function_3">Function</h4>
<pre><code class="matlab">function [spm_path, spm_version] = xASL_adm_CheckSPM(modality, proposed_spm_path, check_mode)
</code></pre>

<h4 id="description_3">Description</h4>
<p>Checks if the spm function exists and if the reported version matches our development version (SPM8 or SPM12). If the spm toolbox is not available yet, it will try the PROPOSED_SPM_PATH (if specified) or the user selected directory and add it to PATH. The function will fail if SPM cannot be found or if detecting an unsupported version.</p>
<hr />
<h3 id="xasl_adm_cleanupbeforererun">xASL_adm_CleanUpBeforeRerun</h3>
<h4 id="function_4">Function</h4>
<pre><code class="matlab">function xASL_adm_CleanUpBeforeRerun(AnalysisDir, iModule, bRemoveWMH, bAllSubjects, SubjectID, SessionID)
</code></pre>

<h4 id="description_4">Description</h4>
<p>This function (partly) reverts previous ExploreASL runs, deleting derivatives, while keeping raw data intact. if bAllSubjects==true, then all subjects and all module derivatives will be removed. This function performs the following steps:</p>
<ol>
<li>If a Population folder doesn't exist yet but dartel does, rename it</li>
<li>Remove whole-study data files in AnalysisDir if bAllSubjects</li>
<li>Remove lock files/folders for reprocessing</li>
<li>Restore backupped _ORI (original) files</li>
<li>Delete native space CAT12 temporary folders (always, independent of iModule)</li>
<li>Remove native space files for iModule</li>
<li>Remove standard space files for iModule</li>
<li>Remove population module files</li>
<li>Remove or clean up stored x-struct &amp; QC file -&gt; THIS HAS NO SESSION SUPPORT YET</li>
</ol>
<hr />
<h3 id="xasl_adm_comparedatasets">xASL_adm_CompareDataSets</h3>
<h4 id="function_5">Function</h4>
<pre><code class="matlab">function [RMS] = xASL_adm_CompareDataSets(RefAnalysisRoot,SourceAnalysisRoot,x,type,mutexState)
</code></pre>

<h4 id="description_5">Description</h4>
<p>Compares two ExploreASL datasets for reproducibility.</p>
<hr />
<h3 id="xasl_adm_comparelistsm">xASL_adm_CompareLists.m</h3>
<h4 id="function_6">Function</h4>
<pre><code class="matlab">function [NewList] = xASL_adm_CompareLists(list1, list2)
</code></pre>

<h4 id="description_6">Description</h4>
<p>Compare 2 single dimension lists.</p>
<hr />
<h3 id="xasl_adm_convertdate2nrm">xASL_adm_ConvertDate2Nr.m</h3>
<h4 id="function_7">Function</h4>
<pre><code class="matlab">function [Nr DayInYear] = xASL_adm_ConvertDate2Nr(TempDate)
</code></pre>

<h4 id="description_7">Description</h4>
<p>Converts date to number input mmdd -&gt; output mm (with days in fractions/floating point). Inverse from ConvertNrDate.</p>
<hr />
<h3 id="xasl_adm_convertnr2timem">xASL_adm_ConvertNr2Time.m</h3>
<h4 id="function_8">Function</h4>
<pre><code class="matlab">function Time = xASL_adm_ConvertNr2Time(Nr)
</code></pre>

<h4 id="description_8">Description</h4>
<p>Converts number to time input hh (with minutes in fractions/floating point) -&gt; output hhmm. Inverse from xASL_adm_ConvertTime2Nr.</p>
<hr />
<h3 id="xasl_adm_convertsubjsess2subj_sessm">xASL_adm_ConvertSubjSess2Subj_Sess.m</h3>
<h4 id="function_9">Function</h4>
<pre><code class="matlab">function [iSubj iSess] = xASL_adm_ConvertSubjSess2Subj_Sess(nSessions, iSubjSess)
</code></pre>

<h4 id="description_9">Description</h4>
<p>Converts combined SubjectSession index to subject &amp; session indices. Useful for data lists in ExploreASL.</p>
<hr />
<h3 id="xasl_adm_converttime2nrm">xASL_adm_ConvertTime2Nr.m</h3>
<h4 id="function_10">Function</h4>
<pre><code class="matlab">function Nr = xASL_adm_ConvertTime2Nr(Time)
</code></pre>

<h4 id="description_10">Description</h4>
<p>Converts time to number input hhmm -&gt; output hh (with minutes in fractions/floating point). Inverse from xASL_adm_ConvertNr2Time.</p>
<hr />
<h3 id="xasl_adm_copymovefilelistm">xASL_adm_CopyMoveFileList.m</h3>
<h4 id="function_11">Function</h4>
<pre><code class="matlab">function [List] = xASL_adm_CopyMoveFileList(OriDir, DstDir, StrRegExp, bMove, bDir, bRecursive, bOverwrite, bVerbose)
</code></pre>

<h4 id="description_11">Description</h4>
<p>Moves a file to a file, a file to a directory, or a directory to a directory. It keeps the initial extensions, no unzipping or zipping after the move. But it makes sure that only one of .nii and .nii.gz exists in the destination directory. Useful to split a large database.</p>
<hr />
<h3 id="xasl_adm_correctnamem">xASL_adm_CorrectName.m</h3>
<h4 id="function_12">Function</h4>
<pre><code class="matlab">function strOut = xASL_adm_CorrectName(strIn, bOption, strExclude)
</code></pre>

<h4 id="description_12">Description</h4>
<p>Finds and replaces all non-word characters either by empty space or by an underscore. Optionally leaves in few selected special characters. Note that if '_' is excluded from replacement, but option 2 is on, then underscores are replaced anyway.</p>
<hr />
<h3 id="xasl_adm_createcsvfilem">xASL_adm_CreateCSVfile.m</h3>
<h4 id="function_13">Function</h4>
<pre><code class="matlab">function xASL_adm_CreateCSVfile(CSVfilename,CSVdata)
</code></pre>

<h4 id="description_13">Description</h4>
<p>Creates a CSV file that can be opened with excel from your data.</p>
<hr />
<h3 id="xasl_adm_createfilereportm">xASL_adm_CreateFileReport.m</h3>
<h4 id="function_14">Function</h4>
<pre><code class="matlab">function x = xASL_adm_CreateFileReport(x, bHasFLAIR, bHasMoCo, bHasM0, bHasLongitudinal)
</code></pre>

<h4 id="description_14">Description</h4>
<p>Prints a summary of created files or the individual modules (i.e. Structural, Longiutudinal &amp; ASL modules).
Provides a quick check to see what has been skipped, an whether all files are present.</p>
<p>This script iterates across Native space 1) subject and 2) session files, resampled 3) subject and 4) session files, 5) Lock files and 6) QC Figure files.</p>
<p>For all we perform a A) count of the files present, summarized in fileReportSummary.csv, and we B) list the missing files in
"Missing*.csv" files</p>
<p><strong>PM:</strong> simplify/optimize this code, to make filename variable changing, search within subject-directories, etc. Combine the parts searching for missing &amp; summarizing count</p>
<hr />
<h3 id="xasl_adm_defineaslresolutionm">xASL_adm_DefineASLResolution.m</h3>
<h4 id="function_15">Function</h4>
<pre><code class="matlab">function x = xASL_adm_DefineASLResolution(x)
</code></pre>

<h4 id="description_15">Description</h4>
<p>...</p>
<hr />
<h3 id="xasl_adm_deletefilepairm">xASL_adm_DeleteFilePair.m</h3>
<h4 id="function_16">Function</h4>
<pre><code class="matlab">function filepaths = xASL_adm_DeleteFilePair(path, varargin)
</code></pre>

<h4 id="description_16">Description</h4>
<p>Delete the file given in PATH, and also deletes files with the same name, but with extension given in EXT1, and potentially also EXT2, EXT3... </p>
<hr />
<h3 id="xasl_adm_dicom2parmsm">xASL_adm_Dicom2Parms.m</h3>
<h4 id="function_17">Function</h4>
<pre><code class="matlab">function [parms, pathDcmDictOut] = xASL_adm_Dicom2Parms(imPar, inp, parmsfile, dcmExtFilter, bUseDCMTK, pathDcmDictIn)
</code></pre>

<h4 id="description_17">Description</h4>
<p>The function goes through the INP files, reads the DICOM or PAR/REC files and parses their headers.
It extracts the DICOM parameters important for ASL, makes sure they are in the correct format, if missing then replaces with default value, it also checks if the parameters are consistent across DICOM files for a single sequence.</p>
<hr />
<h3 id="xasl_adm_findbyregexpm">xASL_adm_FindByRegExp.m</h3>
<h4 id="function_18">Function</h4>
<pre><code class="matlab">function [tree, optionalTokens] = xASL_adm_FindByRegExp(root, dirSpecs, varargin)
</code></pre>

<h4 id="description_18">Description</h4>
<p>Recursively find files in the root directory according to the dirSpecs.</p>
<hr />
<h3 id="xasl_adm_findstrindexm">xASL_adm_FindStrIndex.m</h3>
<h4 id="function_19">Function</h4>
<pre><code class="matlab">function INDEX = xASL_adm_FindStrIndex(ARRAY, STRING)
</code></pre>

<h4 id="description_19">Description</h4>
<p>Similar to find, but then for a cell array filled with strings. Only takes 4 dimensions.</p>
<hr />
<h3 id="xasl_adm_getfslistm">xASL_adm_GetFsList.m</h3>
<h4 id="function_20">Function</h4>
<pre><code class="matlab">function  RES = xASL_adm_GetFsList(strDirectory, strRegEx, bGetDirNames, bExcludeHidden, bIgnoreCase, nRequired)
</code></pre>

<h4 id="description_20">Description</h4>
<p>List files or directories from a given path. And optionally uses regular expressions to filter the result with options to exclude hidden files, ignore case, and set a minimal requirement on the number of results. Sorts the results at the end.</p>
<hr />
<h3 id="xasl_adm_getnumfromstrm">xASL_adm_GetNumFromStr.m</h3>
<h4 id="function_21">Function</h4>
<pre><code class="matlab">function num = xASL_adm_GetNumFromStr(str)
</code></pre>

<h4 id="description_21">Description</h4>
<p>Obtains single number from string. CAVE there should only be one number!</p>
<hr />
<h3 id="xasl_adm_getphilipsscalingm">xASL_adm_GetPhilipsScaling.m</h3>
<h4 id="function_22">Function</h4>
<pre><code class="matlab">function scaleFactor = xASL_adm_GetPhilipsScaling(parms,header)
</code></pre>

<h4 id="description_22">Description</h4>
<p>This script provides the correct scaling factors for a NIfTI file. It checks the header of the NIfTI that normally has the same scaling as RescaleSlope in DICOM, it checks if dcm2nii (by the info in JSON) has already converted the scale slopes to floating point. And if not, the derive the correct scaling factor to be applied.</p>
<hr />
<h3 id="xasl_adm_getusernamem">xASL_adm_GetUserName.m</h3>
<h4 id="function_23">Function</h4>
<pre><code class="matlab">function UserName = xASL_adm_GetUserName()
</code></pre>

<h4 id="description_23">Description</h4>
<p>...</p>
<hr />
<h3 id="xasl_adm_hex2numm">xASL_adm_Hex2Num.m</h3>
<h4 id="function_24">Function</h4>
<pre><code class="matlab">function outNum = xASL_adm_Hex2Num(inStr, type, endian)
</code></pre>

<h4 id="description_24">Description</h4>
<p>Takes a hexadecimal string and converts it to number. Works also when the string contains escape characters, and for single-floats and for a little and big endian. If containing 8 and less characters than treat as float, if more than as double.</p>
<hr />
<h3 id="xasl_adm_lesionreslicelistm">xASL_adm_LesionResliceList.m</h3>
<h4 id="function_25">Function</h4>
<pre><code class="matlab">function [INname, OUTname] = xASL_wrp_LesionResliceList(x,bLesion_T1,bLesion_FLAIR,bROI_T1,bROI_FLAIR)
</code></pre>

<h4 id="description_25">Description</h4>
<p>Creates list of structural image paths to reslice.</p>
<hr />
<h3 id="xasl_adm_load4dmemmappingm">xASL_adm_Load4DMemMapping.m</h3>
<h4 id="function_26">Function</h4>
<pre><code class="matlab">function LoadFile = xASL_adm_Load4DMemMapping(x, WhichModality)
</code></pre>

<h4 id="description_26">Description</h4>
<p>Part of ExploreASL analysis module. Loads data &amp; maps it to memory mapping file on disc, if not done before.</p>
<hr />
<h3 id="xasl_adm_loadparmsm">xASL_adm_LoadParms.m</h3>
<h4 id="function_27">Function</h4>
<pre><code class="matlab">function [Parms, x, Oldx] = xASL_adm_LoadParms(ParmsPath, x, bVerbose)
</code></pre>

<h4 id="description_27">Description</h4>
<p>This function loads the internal memory x struct, any legacy *_parms.mat sidecar, any *.json BIDS sidecar, to use scan-specific parameters for image processing/quantification. Also, per BIDS inheritance, any x.S.SetsID parameters (from participants.tsv) are loaded as well. This function performs the following steps:</p>
<ol>
<li>Load .mat parameter file</li>
<li>Load JSON file</li>
<li>Deal with warnings</li>
<li>Find fields with scan-specific data in x.S.Sets, and use this if possible (per BIDS inheritance)</li>
<li>Sync Parms.* with x.(Q.)* (overwrite x/x.Q)</li>
<li>Fix M0 parameter if not set</li>
</ol>
<hr />
<h3 id="xasl_adm_loadxm">xASL_adm_LoadX.m</h3>
<h4 id="function_28">Function</h4>
<pre><code class="matlab">function [x, IsLoaded] = xASL_adm_LoadX(x, Path_xASL, bOverwrite)
</code></pre>

<h4 id="description_28">Description</h4>
<p>This function loads x.Output &amp; x.Output_im struct fields from the x.mat on the hard drive &amp; adds them to the current x struct located in memory. If it didnt exist in the x.mat, it will set IsLoaded to false, which can be catched externally &amp; a warning issued if managed so in the calling function. If it didnt exist in the memory x struct, or bOverwrite was requested, the contents of x.mat will be loaded to the memory x struct.</p>
<hr />
<h3 id="xasl_adm_orderfieldsm">xASL_adm_OrderFields.m</h3>
<h4 id="function_29">Function</h4>
<pre><code class="matlab">function outStruct = xASL_adm_OrderFields(inStruct,orderStruct)
</code></pre>

<h4 id="description_29">Description</h4>
<p>Order fields in the structure inStruct to match orderStruct, unmatching fields in inStruct are copied as they are at the end, unmatching fields in orderStruct are ignored. This is just a cosmetic change and no values are edited.</p>
<hr />
<h3 id="xasl_adm_otherlistspmm">xASL_adm_OtherListSPM.m</h3>
<h4 id="function_30">Function</h4>
<pre><code class="matlab">function [OtherListSPM, OtherListOut] = xASL_adm_OtherListSPM(OtherList, bList4D)
</code></pre>

<h4 id="description_30">Description</h4>
<p>Takes care of the others list for registration functions. </p>
<p><strong>bPadComma1:</strong> is to add the ,1 to the end of the pathstring, which SPM uses to assign the first image of a 4D image array (OPTIONAL, DEFAULT = true)</p>
<p><strong>bList4D:</strong> boolean, true for listing multiple 4D volumes separately in the list (OPTIONAL, DEFAULT=true).</p>
<hr />
<h3 id="xasl_adm_par2parmsm">xASL_adm_Par2Parms.m</h3>
<h4 id="function_31">Function</h4>
<pre><code class="matlab">function parms = xASL_adm_Par2Parms(pathPar, pathParms, bRecreate)
</code></pre>

<h4 id="description_31">Description</h4>
<p>Opens the Philips type PAR file. Reads the relevant DICOM headers and saves them to .MAT file. Only recreates an existing file if bRecreate option is set to TRUE.</p>
<hr />
<h3 id="xasl_adm_parreadheaderm">xASL_adm_ParReadHeader.m</h3>
<h4 id="function_32">Function</h4>
<pre><code class="matlab">function info = xASL_adm_ParReadHeader(filename)
</code></pre>

<h4 id="description_32">Description</h4>
<p>Function for reading the header of a Philips Par / Rec  MR V4.* file.</p>
<hr />
<h3 id="xasl_adm_remove_1_spmm">xASL_adm_Remove_1_SPM.m</h3>
<h4 id="function_33">Function</h4>
<pre><code class="matlab">function [OtherList] = xASL_adm_Remove_1_SPM(OtherList)
</code></pre>

<h4 id="description_33">Description</h4>
<p>Remove, 1 at end of OtherLists, if exists. These are appended in CoregInit, OldNormalizeWrapper etc, since this should allow 4rd dim (e.g. as in ASL4D).</p>
<hr />
<h3 id="xasl_adm_replacesymbolsm">xASL_adm_ReplaceSymbols.m</h3>
<h4 id="function_34">Function</h4>
<pre><code class="matlab">function [x] = xASL_adm_ResetVisualizationSlices(x)
</code></pre>

<h4 id="description_34">Description</h4>
<p>Removes any predefined slices that should be visualized, allowing to show the default slices. Comes in handy when different pipeline visualization parts are repeated.</p>
<hr />
<h3 id="xasl_adm_resetvisualizationslicesm">xASL_adm_ResetVisualizationSlices.m</h3>
<h4 id="function_35">Function</h4>
<pre><code class="matlab">function [x] = xASL_adm_ResetVisualizationSlices(x)
</code></pre>

<h4 id="description_35">Description</h4>
<p>Removes any predefined slices that should be visualized, allowing to show the default slices. Comes in handy when different pipeline visualization parts are repeated.</p>
<hr />
<h3 id="xasl_adm_savejsonm">xASL_adm_SaveJSON.m</h3>
<h4 id="function_36">Function</h4>
<pre><code class="matlab">function xASL_adm_SaveJSON(data, jsonFileName)
</code></pre>

<h4 id="description_36">Description</h4>
<p>Saves the values in the structure 'data' to a file in JSON forma</p>
<hr />
<h3 id="xasl_adm_uigetinputm">xASL_adm_uiGetInput.m</h3>
<h4 id="function_37">Function</h4>
<pre><code class="matlab">function [Parms] = xASL_adm_uiGetInput(Parms)
</code></pre>

<h4 id="description_37">Description</h4>
<p>Checks whether input fields are present, or requests them.</p>
<hr />
<h3 id="xasl_adm_unziporcopym">xASL_adm_UnzipOrCopy.m</h3>
<h4 id="function_38">Function</h4>
<pre><code class="matlab">function unpackedFiles = xASL_adm_UnzipOrCopy(srcDir, wildCard, destDir, bOverwrite)
</code></pre>

<h4 id="description_38">Description</h4>
<p>Unpacks (or copy if unpacked) one or more files matching the regular expression.</p>
<hr />
<h3 id="xasl_adm_voxel2realworldcoordinatesm">xASL_adm_Voxel2RealWorldCoordinates.m</h3>
<h4 id="function_39">Function</h4>
<pre><code class="matlab">function [X Y Z] = xASL_adm_Voxel2RealWorldCoordinates(X,Y,Z,VoxelSize)
</code></pre>

<h4 id="description_39">Description</h4>
<p>Converts MNI coordinates from voxel coordinates/indices.
Assumes X Y Z = LR LeftRight AP AnteriorPosterior IS InferiorSuperior.
VoxelSize should be [1 3]-sized input.</p>
<hr />
<h3 id="xasl_adm_zipfilelistm">xASL_adm_ZipFileList.m</h3>
<h4 id="function_40">Function</h4>
<pre><code class="matlab">function filepaths = xASL_adm_ZipFileList(strDirectory, strRegExp, bRecurse, bUseGzip, nRequired, bDelete)
</code></pre>

<h4 id="description_40">Description</h4>
<p>Zip the files that match regular expression STRREGEXP in the given directory STRDIRECTORY.
Zips recursively if specified in BRECURSE. Zips all files unless the number is specified by NREQUIRED, if the number is not met, then does not zip anything and throws an error.</p>
<hr />
<h3 id="xasl_bids_add2participantstsvm">xASL_bids_Add2ParticipantsTSV.m</h3>
<h4 id="function_41">Function</h4>
<pre><code class="matlab">function xASL_bids_Add2ParticipantsTSV(DataIn, DataName, x, bOverwrite)
</code></pre>

<h4 id="description_41">Description</h4>
<p>This function adds metadata/statistical variables to the participants.tsv in the root/analysis folder, by the following steps. 
This function will iterate over Data provided at DataIn and fill them in the participants.tsv, overwriting if allowed.
Empty data is filled in as 'n/a', and the first column "participants_id" is sorted for participants.</p>
<hr />
<h3 id="xasl_bids_dicom2jsonm">xASL_bids_Dicom2JSON.m</h3>
<h4 id="function_42">Function</h4>
<pre><code class="matlab">function [parms, pathDcmDictOut] = xASL_bids_Dicom2JSON(imPar, inp, PathJSON, dcmExtFilter, bUseDCMTK, pathDcmDictIn)
</code></pre>

<h4 id="description_42">Description</h4>
<p>The function goes through the INP files, reads the DICOM or PAR/REC files and parses their headers.
It extracts the DICOM parameters important for ASL, makes sure they are in the correct format, if missing then replaces with default value, it also checks if the parameters are consistent across DICOM files for a single sequence.</p>
<hr />
<h3 id="xasl_bids_insertjsonfieldsm">xASL_bids_InsertJSONFields.m</h3>
<h4 id="function_43">Function</h4>
<pre><code class="matlab">function [ChildJSON] = xASL_bids_InsertJSONFields(ParentJSON, ChildJSON, Fields2Skip)
</code></pre>

<h4 id="description_43">Description</h4>
<p>This function takes all parameters from the "parent" JSON &amp; moves them into the "child" JSON.
In case of co-existence of a field with different values, then the value in the child JSON will prevail, per BIDS inheritance.</p>
<hr />
<h3 id="xasl_bids_parms2bidsm">xASL_bids_parms2BIDS.m</h3>
<h4 id="function_44">Function</h4>
<pre><code class="matlab">function outParms = xASL_bids_parms2BIDS(inXasl, inBids, bOutBids, bPriorityBids)
</code></pre>

<h4 id="description_44">Description</h4>
<p>This functions takes two parameter structures and merges them. At the same time, renames all fields according to the output type (note that only some fields have two standardised names different between the two formats.</p>
<p>In case of duplicities, takes the field value from the preferred format. 
Also takes into account that the units in BIDS are s, but in xASL ms.
This function performs the following steps:</p>
<ol>
<li>Define field names that need to be convert/renamed/merged</li>
<li>Convert XASL fields to the output format (BIDS or XASL)</li>
<li>Convert BIDS fields to the output format (BIDS or XASL)</li>
<li>Merge the BIDS and XASL fields, convert field values</li>
</ol>
<hr />
<h3 id="xasl_bids_parrec2jsonm">xASL_bids_PARREC2JSON.m</h3>
<h4 id="function_45">Function</h4>
<pre><code class="matlab">function parms = xASL_bids_PARREC2JSON(pathPar, PathJSON)
</code></pre>

<h4 id="description_45">Description</h4>
<p>Opens the Philips type PAR file. Reads the relevant DICOM header fields and adds them to the .json sidecar file.</p>
<hr />
<h3 id="xasl_fsl_runfslm">xASL_fsl_RunFSL.m</h3>
<h4 id="function_46">Function</h4>
<pre><code class="matlab">function [x, Result1] = xASL_fsl_RunFSL(FSLCommand, x, OutputZipping, NicenessValue, bVerbose)
</code></pre>

<h4 id="description_46">Description</h4>
<p>This function runs an FSL command from ExploreASL:</p>
<ol>
<li>Checking the FSL dir</li>
<li>Manage CUDA/CPU parallelization (currently disabled, WIP)</li>
<li>Setting up FSL environment</li>
<li>Running the command</li>
</ol>
<p>Supports .nii &amp; .nii.gz, Linux, MacOS &amp; Windows (WSL).</p>
<hr />
<h3 id="xasl_fsl_setfsldirm">xASL_fsl_SetFSLdir.m</h3>
<h4 id="function_47">Function</h4>
<pre><code class="matlab">function [FSLdir, x, RootWSLdir] = xASL_fsl_SetFSLdir(x, bAutomaticallyDetectFSL)
</code></pre>

<h4 id="description_47">Description</h4>
<p>This function finds the FSLdir &amp; puts it out, also in x.FSLdir to allow repeating this function without having to repeat searching.
If the FSLdir &amp; RootFSLDir are already defined in x.FSLdir &amp; x.RootFSLDir, this function is skipped.
Supports Linux, MacOS &amp; Windows (WSL), &amp; several different default installation folders for different Linux distributions.</p>
<hr />
<h3 id="xasl_fsl_topupm">xASL_fsl_TopUp.m</h3>
<h4 id="function_48">Function</h4>
<pre><code class="matlab">function [bSuccess] = xASL_fsl_TopUp(InDir, ScanType, x, OutputPath)
</code></pre>

<h4 id="description_48">Description</h4>
<p>This function runs FSL TopUp. It assumes that there are 2 TopUp images, i.e. 1 blip up &amp; 1 blip down.</p>
<ol>
<li>Admin: manage ScanType, NIfTI paths, create TopUp parameter file for image to apply TopUp to &amp; for the TopUp NIfTIs, delete files from previous run, define the image with the same acquisition parameters as TopUp (does the image we apply TopUp to, have the Blip up or down?)</li>
<li>Register images to image that we apply TopUp to (registration between blip up/down images is performed by TopUp)</li>
<li>Run TopUp estimate (i.e. estimate the geometric distortion field from B0 NIfTI &amp; parameters file), this takes quite long. Also has a x.Quality=0 option that is very fast but inaccurate, to try out this pipeline part. Before TopUp, NaNs (e.g. from resampling) are removed from the images TopUp is run with default settings</li>
<li>Apply TopUp</li>
</ol>
<hr />
<h3 id="xasl_import_jsonm">xASL_import_json.m</h3>
<h4 id="function_49">Function</h4>
<pre><code class="matlab">function [x] = xASL_import_json(DataParFile)
</code></pre>

<h4 id="description_49">Description</h4>
<p>This function reads in a DATA_PAR file and creates the x structure. The name of the DATA_PAR file is given as a string or character array. The output is the x structure.</p>
<p>If the DATA_PAR file is the dataset_description.json file of the BIDS standard, the x structure is created according to BIDS.</p>
<hr />
<h3 id="xasl_imwritem">xASL_imwrite.m</h3>
<h4 id="function_50">Function</h4>
<pre><code class="matlab">function [ImOut] = xASL_imwrite(ImIn, PathOut, ColorMap, bRescale)
</code></pre>

<h4 id="description_50">Description</h4>
<p>This functions takes an input image matrix, interpolates it to HD resolution (1920x1080) for visibility, and saves the image as jpg. This function avoids the graphic interface of Matlab, for running from CLI. 
<strong>Careful:</strong> this function overwrites any existing PathOut.</p>
<hr />
<h3 id="xasl_im_addim2qcm">xASL_im_AddIM2QC.m</h3>
<h4 id="function_51">Function</h4>
<pre><code class="matlab">function [x] = xASL_im_AddIM2QC(x,parms)
</code></pre>

<h4 id="description_51">Description</h4>
<p>Checks which images already are loaded, and  adds new image.</p>
<hr />
<h3 id="xasl_im_bilateralfilterm">xASL_im_BilateralFilter.m</h3>
<h4 id="function_52">Function</h4>
<pre><code class="matlab">function [ovol] = xASL_im_BilateralFilter(volIM, mask, VoxelSize, x)
</code></pre>

<h4 id="description_52">Description</h4>
<p>This function runs a spatial lowpass temporally highpass filter, and removes outliers within this signal, and adapts the time-series accordingly</p>
<hr />
<h3 id="xasl_im_centerofmassm">xASL_im_CenterOfMass.m</h3>
<h4 id="function_53">Function</h4>
<pre><code class="matlab">function xASL_im_CenterOfMass(PathNIfTI, OtherList, AllowedDistance)
</code></pre>

<h4 id="description_53">Description</h4>
<p>This function estimates the center of mass of the image matrix, and if this is too far off the current orientation matrix center, the center will be reset.
This fixes any incorrect orientation outputted by the scanner.
The realignment is only applied when any of the X/Y/Z dimensions have a higher offset than AllowedDistance</p>
<hr />
<h3 id="xasl_im_cleanupwmhnoisem">xASL_im_CleanupWMHnoise.m</h3>
<h4 id="function_54">Function</h4>
<pre><code class="matlab">function xASL_im_CleanupWMHnoise(InputPath, OutputPath, MinLesionVolume, pThresh)
</code></pre>

<h4 id="description_54">Description</h4>
<p>Threshold white matter lesions, acknowledging the fact that they may be confluent with subresolution connection through a dilation. This part is executed conservatively, as FLAIR hyperintensities inside the GM can be erroneously segmented as WMH, and should not be lesion-filled (otherwise these cannot be fixed later in the Structural module).</p>
<p>Note that LST lesion filling expects a probability map, doesnt work nicely with binary mask.</p>
<hr />
<h3 id="xasl_im_clipextremesm">xASL_im_ClipExtremes.m</h3>
<h4 id="function_55">Function</h4>
<pre><code class="matlab">function [NewIM] = xASL_im_ClipExtremes(InputIm, ThreshHigh, ThreshLow, bVerbose)
</code></pre>

<h4 id="description_55">Description</h4>
<p>Clips image to given percentile. The percentile is found using non-zeros sorted intensities, so both isfinite &amp; non-zeros.</p>
<hr />
<h3 id="xasl_im_colorbarm">xASL_im_colorbar.m</h3>
<h4 id="function_56">Function</h4>
<pre><code class="matlab">function axesBar = xASL_io_colorbar(ColorMap,TickLabels)
</code></pre>

<h4 id="description_56">Description</h4>
<p>Display a color bar, but replace it with a colorbar with given 'ticks' and colormap.</p>
<hr />
<h3 id="xasl_im_column2imm">xASL_im_Column2IM.m</h3>
<h4 id="function_57">Function</h4>
<pre><code class="matlab">function [ImageOut] = xASL_im_Column2IM(ColumnIn, BrainMask)
</code></pre>

<h4 id="description_57">Description</h4>
<p>This function "decompresses" an image matrix (or multiple matrices) from a single-dimensional column, by reconstructing the image matrix from the voxel positions within the BrainMask. </p>
<p><strong>NB:</strong> Important to use the same BrainMask as used for converting the image matrix to the column!</p>
<p><strong>See also:</strong> xASL_im_IM2Column.m</p>
<p>The mask mostly used for xASL_im_IM2Column is x.WBmask, which completely engulfes pGM, pWM &amp; pCSF.</p>
<hr />
<h3 id="xasl_im_compareniftiresolutionxyzm">xASL_im_CompareNIfTIResolutionXYZ.m</h3>
<h4 id="function_58">Function</h4>
<pre><code class="matlab">function [IsEqualResolution] = xASL_im_CompareNIfTIResolutionXYZ(PathNIfTI1, PathNIfTI2)
</code></pre>

<h4 id="description_58">Description</h4>
<p>This function checks whether the X, Y and Z resolution of a NIfTI with any number of dimensions is equal. It rounds for 2 floating points, for both NIfTIs, to ensure that the same precision is compared.</p>
<hr />
<h3 id="xasl_im_computedicem">xASL_im_ComputeDice.m</h3>
<h4 id="function_59">Function</h4>
<pre><code class="matlab">function DiceCoeff = xASL_im_ComputeDice(imA, imB)
</code></pre>

<h4 id="description_59">Description</h4>
<p>Calculate Dice coefficient of image overlap.</p>
<hr />
<h3 id="xasl_im_createasldeformationfieldm">xASL_im_CreateASLDeformationField.m</h3>
<h4 id="function_60">Function</h4>
<pre><code class="matlab">function xASL_im_CreateASLDeformationField(x, bOverwrite, EstimatedResolution, PathLowResNIfTI)
</code></pre>

<h4 id="description_60">Description</h4>
<p>This function smooths a transformation flow field to a lower resolution. Usually, we use a high resolution anatomical image (e.g. 3D T1w) to obtain the flowfields from native space to standard space, and apply these to the lower resolution ASL images. Because of the resolution differences, the flowfields need to be downsampled/smoothed, to avoid deformation effects that are crispier than the functional image that is investigated. This function performs the following steps:</p>
<ol>
<li>Obtain resolutions</li>
<li>Fill NaNs at edges y_T1.nii flowfield to prevent interpolation artifact</li>
<li>Smooth flowfield</li>
<li>Fill NaNs at edges y_ASL.nii</li>
</ol>
<p>Note that if the resolution of ASL is not significantly (i.e. &gt;0.5 mm in any dimension) lower than T1w, the y_T1.nii is copied to y_ASL.nii</p>
<hr />
<h3 id="xasl_im_createpseudocbfm">xASL_im_CreatePseudoCBF.m</h3>
<h4 id="function_61">Function</h4>
<pre><code class="matlab">function xASL_im_CreatePseudoCBF(x, spatialCoV)
</code></pre>

<h4 id="description_61">Description</h4>
<p>This function creates a pseudo-CBF image from mean CBF template, arterial transit time (ATT) bias field &amp; vascular artifacts, weighted through spatial CoV.
The first part of this code puts templates in the native space and creates a pseudoCBF image from a downsampled pGM &amp; pWM tissue (PseudoTissue). The latter is used for registration but also as reference for the template registration, to speed this up.
The second part of this code computes a pseudoCBF image based on the pseudoTissue &amp; the CBF templates of CBF, ATT biasfield and vascular peaks, based on spatial CoV.
This submodule performs the following steps:</p>
<ol>
<li>Create the pseudoTissue CBF reference image, if it doesnt exist already</li>
<li>Create the native space copies of ASL templates, if they dont exist already</li>
<li>Spatial CoV input argument check</li>
<li>Load native space copies of templates</li>
<li>Create pseudoTissue from segmentations, mix this with the mean CBF template depending on spatial CoV</li>
<li>Create pseudoCBF reference image used for CBF-based registration</li>
<li>Scale mean_PWI_Clipped source image to the same range as PseudoCBF</li>
</ol>
<hr />
<h3 id="xasl_im_createslicegradientm">xASL_im_CreateSliceGradient.m</h3>
<h4 id="function_62">Function</h4>
<pre><code class="matlab">function xASL_im_CreateSliceGradient(x)
</code></pre>

<h4 id="description_62">Description</h4>
<p>When a 2D readout is used with ASL, post-label delay and hence T1 decay will be dependent on slice timing.
Therefore, quantification part needs slice reference to quantify per slice and correct for effective post-label delay differences</p>
<p>This function uses exact same ASL matrix changes that occurred due to registration to MNI, motion correction and registration to T1.</p>
<ol>
<li>Create slice gradient in same space as input file</li>
<li>Reslice slice gradient to MNI (using existing ASL matrix changes from e.g. registration to MNI, motion correction, registration to GM)</li>
<li>Creating average slice gradient</li>
</ol>
<hr />
<h3 id="xasl_im_createvisualfigm">xASL_im_CreateVisualFig.m</h3>
<h4 id="function_63">Function</h4>
<pre><code class="matlab">function [ImOut, FileName] = xASL_im_CreateVisualFig(x, ImIn, DirOut, IntScale, NamePrefix, ColorMap, bClip, MaskIn, bWhite, MaxWindow, bTransparancy)
</code></pre>

<h4 id="description_63">Description</h4>
<p>This function creates a visualization Figure by merging flexibly rearranging NIfTI slices, input matrix or path, managing colormaps for different merged image layers. Current use is for visual QC figures and overview in papers.
Function is structured as:</p>
<ol>
<li>Admin, deal with input arguments</li>
<li>Process image layers separately<ul>
<li>xASL_im_TransformData2View: Reshapes image data into visualization figure</li>
<li>xASL_im_ClipExtremes: Clips image to given percentile also we scale for peak intensity, we make sure that there is no visible clipping/distortion</li>
<li>Convert to colors, using any input colormaps</li>
</ul>
</li>
<li>Combine image layers, using input argument IntScale</li>
<li>Print figure</li>
</ol>
<p>This function assumes that the first image is a grascale background image (e.g. for transparancy reasons), if there are multiple images.</p>
<hr />
<h3 id="xasl_im_createvisuallongregm">xASL_im_CreateVisualLongReg.m</h3>
<h4 id="function_64">Function</h4>
<pre><code class="matlab">function xASL_im_CreateVisualLongReg(x, CurrentSub)
</code></pre>

<h4 id="description_64">Description</h4>
<p>Creates for each Other TimePoint (TP):</p>
<ul>
<li>First row 1) First TP 2) Other TP.</li>
<li>Second row First TP with normalized difference image between TPs without (1) and with (2) Longitudinal Registration.</li>
</ul>
<hr />
<h3 id="xasl_im_cropparmsacquirem">xASL_im_CropParmsAcquire.m</h3>
<h4 id="function_65">Function</h4>
<pre><code class="matlab">function [xmin xmax ymin ymax] = xASL_im_CropParmsAcquire(temp_image)
</code></pre>

<h4 id="description_65">Description</h4>
<p>Goes from outside to inside to acquire crop settings. Works with grayscale images (2 dimensions per slice).image position information (2D matrix) should be first 2 dimensions. Could include colordimension later on.</p>
<hr />
<h3 id="xasl_im_cropparmsapplym">xASL_im_CropParmsApply.m</h3>
<h4 id="function_66">Function</h4>
<pre><code class="matlab">function ImageOut = xASL_im_CropParmsApply(ImageIn,CropParameters,Xmax,Ymin,Ymax)
</code></pre>

<h4 id="description_66">Description</h4>
<p>This function crops 2D image matrices.</p>
<hr />
<h3 id="xasl_im_decomposeaffinetransformationm">xASL_im_DecomposeAffineTransformation.m</h3>
<h4 id="function_67">Function</h4>
<pre><code class="matlab">function [M, P] = xASL_im_DecomposeAffineTransformation(Mtransformation)
</code></pre>

<h4 id="description_67">Description</h4>
<p>This function splits a transformation matrix into individual components, which can be useful to guide the SPM reslicing.
The components are the same as in spm_(i)matrix.m, except for the shearing: these are included in the rotations, and the 90 degree rotations, these are separated.</p>
<p>Reason for the separation of the 90 degree rotations, is that these indicate if orientations (transversal, coronal &amp; sagittal) have been switched in the NIfTI.</p>
<p>This can be useful to correct for any erroneous 90degree rotations from registration, or to put two images in the same orientation order or voxelsize without applying their subtle realignment (e.g. for manipulating registration references).</p>
<hr />
<h3 id="xasl_im_determineflipm">xASL_im_DetermineFlip.m</h3>
<h4 id="function_68">Function</h4>
<pre><code class="matlab">function [QCstruct] = xASL_im_DetermineFlip(x,iS,PathOrientationResults,QCstruct)
</code></pre>

<h4 id="description_68">Description</h4>
<p>Check determinants, should be the same before &amp; after registration, otherwise a left-right flip is applied. This is not visible, but detrimental for image analysis/stats.</p>
<hr />
<h3 id="xasl_im_dilateerodefullm">xASL_im_DilateErodeFull.m</h3>
<h4 id="function_69">Function</h4>
<pre><code class="matlab">function new_mask = xASL_im_DilateErodeFull(mask,type,kernel)
</code></pre>

<h4 id="description_69">Description</h4>
<p>Runs dilation or erosion on a binary mask in full three dimensions.
It uses its own dilate_erode function and crops the image so that it contains only the mask</p>
<hr />
<h3 id="xasl_im_dilateerodeseparablem">xASL_im_DilateErodeSeparable.m</h3>
<h4 id="function_70">Function</h4>
<pre><code class="matlab">function new_mask = xASL_im_DilateErodeSeparable(mask, type, kernel_x, kernel_y, kernel_z)
</code></pre>

<h4 id="description_70">Description</h4>
<p>Runs dilation or erosion on a binary mask separably in three dimensions.
It uses its own dilate_erode function and crops the image so that it contains only the mask</p>
<hr />
<h3 id="xasl_im_dilateerodespherem">xASL_im_DilateErodeSphere.m</h3>
<h4 id="function_71">Function</h4>
<pre><code class="matlab">function el = xASL_im_DilateErodeSphere(R)
</code></pre>

<h4 id="description_71">Description</h4>
<p>3D structuring element (binary) sphere.</p>
<hr />
<h3 id="xasl_im_dilateroim">xASL_im_dilateROI.m</h3>
<h4 id="function_72">Function</h4>
<pre><code class="matlab">function xASL_im_dilateROI(PathIn, PathTemp)
</code></pre>

<h4 id="description_72">Description</h4>
<p>...</p>
<hr />
<h3 id="xasl_im_dummyorientationniftim">xASL_im_DummyOrientationNIfTI.m</h3>
<h4 id="function_73">Function</h4>
<pre><code class="matlab">function xASL_im_DummyOrientationNIfTI(PathSrc, PathRef, PathDummyOut, bApplyRotationMinor, bApplyRotation90, bApplyZoom, bApplyTranslation)

</code></pre>

<h4 id="description_73">Description</h4>
<p>This function creates a dummy image as reference for xASL_spm_reslice, allowing to only apply specific parts of the transformation between the two images. E.g. only the rotation, or only the zooming.
This can be useful to correct for any erroneous rotations from registration, or to put two images in the same space without applying their realignment. This function performs the following steps:</p>
<ol>
<li>Load orientations &amp; calculate transformation</li>
<li>Calculate the desired transformation</li>
<li>Calculate new orientation matrix</li>
<li>Calculate the new image size</li>
<li>Save the dummy NIfTI</li>
</ol>
<hr />
<h3 id="xasl_im_estimateresolutionm">xASL_im_EstimateResolution.m</h3>
<h4 id="function_74">Function</h4>
<pre><code class="matlab">function [ resFWHM, resSigma,resErr,imSmo,imMask] = xASL_im_EstimateResolution(imCBF,imGM,imWM,imMaskOrig,PSFtype,maxIter)
</code></pre>

<h4 id="description_74">Description</h4>
<p>NB: everything in this code is in voxels, not in mm.</p>
<hr />
<h3 id="xasl_im_flipm">xASL_im_Flip.m</h3>
<h4 id="function_75">Function</h4>
<pre><code class="matlab">function [MatrixOut] = xASL_im_Flip(MatrixIn, varargin)
</code></pre>

<h4 id="description_75">Description</h4>
<p>Backwards compatibility for flipping left-right in standard space (NB: this can be different than in native space!).</p>
<hr />
<h3 id="xasl_im_fliporientationm">xASL_im_FlipOrientation.m</h3>
<h4 id="function_76">Function</h4>
<pre><code class="matlab">function image_out = xASL_im_FlipOrientation(image_in)
</code></pre>

<h4 id="description_76">Description</h4>
<p>This function flips the 3 dimensions from sagittal to transversal or tra to cor. Leaves other dimensions untouched.</p>
<hr />
<h3 id="xasl_im_fliporientation2m">xASL_im_FlipOrientation2.m</h3>
<h4 id="function_77">Function</h4>
<pre><code class="matlab">function image_out = xASL_im_FlipOrientation2(image_in)
</code></pre>

<h4 id="description_77">Description</h4>
<p>This function flips the 3 dimensions from sagittal to cor or tra to sag. Leaves other dimensions untouched.</p>
<hr />
<h3 id="xasl_im_im2columnm">xASL_im_IM2Column.m</h3>
<h4 id="function_78">Function</h4>
<pre><code class="matlab">function [ColumnOut] = xASL_im_IM2Column(ImageIn, BrainMask, ApplyShiftDim)
</code></pre>

<h4 id="description_78">Description</h4>
<p>QC Converts an image matrix to a single-dimensional column to save memory space &amp; computation time.</p>
<hr />
<h3 id="xasl_im_joincolormapm">xASL_im_joinColormap.m</h3>
<h4 id="function_79">Function</h4>
<pre><code class="matlab">function joinedColormap = xASL_io_joinColormap(blackMiddle,colormap1,colormap2)
</code></pre>

<h4 id="description_79">Description</h4>
<p>Take two colormaps and put them together, creating a colormap with 256 values input colormaps 1 and 2 are stacked as colormap1 first, then colormap2.
They can be of anylength [N1,3] and [N2,3], joinedColormap has size [256,3].</p>
<hr />
<h3 id="xasl_im_jointhistm">xASL_im_JointHist.m</h3>
<h4 id="function_80">Function</h4>
<pre><code class="matlab">function imHist = xASL_im_JointHist(imA,imB,imMask,minA,maxA,minB,maxB,nBins)
</code></pre>

<h4 id="description_80">Description</h4>
<p>It calculates a joint histogram of two images of any dimensions over a mask of the same size. The boundaries and number of bins can either be given or min and max values are used. Values outside of the bins are counted to the first/last bin.</p>
<hr />
<h3 id="xasl_im_lesion2catm">xASL_im_Lesion2CAT.m</h3>
<h4 id="function_81">Function</h4>
<pre><code class="matlab">function LesionPathOut = xASL_im_Lesion2CAT(PathIn)
</code></pre>

<h4 id="description_81">Description</h4>
<p>For all lesion masks in the anatomical directory, load them, merge them and save them for the CAT segmentation.</p>
<hr />
<h3 id="xasl_im_lesion2maskm">xASL_im_Lesion2Mask.m</h3>
<h4 id="function_82">Function</h4>
<pre><code class="matlab">function LesionIM = xASL_im_Lesion2Mask(LesionPath, T1path, pGMpath, pWMpath, x)
</code></pre>

<h4 id="description_82">Description</h4>
<p>For a standard space lesion mask (or map), this stores the lesion mask, and in additional its perimask (15 mm) and contralateral mask, as 2nd and 3rd volumes.
It plots the masks on a T1 image, and masks the new masks with the subjects' brainmask (pGM+pWM).</p>
<hr />
<h3 id="xasl_im_m0erodesmoothextrapolatem">xASL_im_M0ErodeSmoothExtrapolate.m</h3>
<h4 id="function_83">Function</h4>
<pre><code class="matlab">function [ImOut] = xASL_im_M0ErodeSmoothExtrapolate(ImIn, x)
</code></pre>

<h4 id="description_83">Description</h4>
<p>This function erodes, smooths &amp; extrapolates M0 in standard space.
It assumes that the M0 image is in standard space &amp; that the GM &amp; WM probability maps are aligned. Here, we mask the M0, to remove high CSF signal and low extracranial signal, enabling us to smooth the image without inserting wrong signal. See also the ExploreASL manuscript for a more extensive explanation. This function performs the following steps:</p>
<ul>
<li>Mask 1) Load segmentations, create structural mask</li>
<li>Mask 2) Create intensity-based mask to remove extracranial signal</li>
<li>Mask 3) Erode the combined masks</li>
<li>Mask 4) Determine any odd borders</li>
<li>5) Smoothing</li>
<li>6) Extrapolating only</li>
<li>7) Scale back to the GM M0</li>
<li>8) Print visual QC figure</li>
</ul>
<p>A visual QC figure is created, showing the M0 image processing steps for a single transversal slice (slice 53 in 1.5 mm MNI standard space).</p>
<p>OutputFile = fullfile(x.D.M0regASLdir, ['M0_im_proc_' x.P.SubjectID '.jpg']);
The original M0 image (a) is masked with a (pGM+pWM)&gt;50% mask (b) eroded with a two-voxel sphere to limit the influence of the ventricular and extracranial signal (c) and thresholded to exclude significantly high (i.e. median + 3 * mean absolute deviation (MAD)) border region values (d) This masked M0 image is smoothed with a 16x16x16 mm full- width-half-maximum Gaussian filter (Mutsaerts et al., 2018) (e) after which the signal at the border is smoothly extrapolated until the full image is filled (f).</p>
<hr />
<h3 id="xasl_im_masknegativevascularsignalm">xASL_im_MaskNegativeVascularSignal.m</h3>
<h4 id="function_84">Function</h4>
<pre><code class="matlab">function [NegativeMask, TreatedCBF] = xASL_im_MaskNegativeVascularSignal(x, IsSpace)
</code></pre>

<h4 id="description_84">Description</h4>
<p>This function segments clusters with significant negative ASL signal. This can be tricky as there is also the negative tail of Gaussian noise from the ASL subtraction. The image feature we use here, is that negative vascular signal will be a relatively large region with significant median negative value, whereas noise will be regions with relatively small negative signal.
Negative signal from wrong background suppression timing (e.g. in the first slice with 2D EPI) can be masked out with this as well.
The procedure works as follows:</p>
<ol>
<li>Obtain mask of negative voxels within pGM&gt;0.5 mask</li>
<li>Obtain distribution of subzero clusters</li>
<li>Define the negative threshold</li>
<li>Create mask by thresholding whole image</li>
</ol>
<p>Note that the definition of the threshold is obtained within the GM only, but that this threshold is applied to the full image.</p>
<hr />
<h3 id="xasl_im_maskpeakvascularsignalm">xASL_im_MaskPeakVascularSignal.m</h3>
<h4 id="function_85">Function</h4>
<pre><code class="matlab">function [MaskIM, TreatedCBF] = xASL_im_MaskPeakVascularSignal(PathCBF, Path_M0, bClip, ClipThresholdValue, CompressionRate)
</code></pre>

<h4 id="description_85">Description</h4>
<p>This function searches for an acceptable high threshold as definition of high intra-vascular ASL signal.
It also allows to compress the values here (when
bClip==true). Compression retains some variability, but limits their outlying influence on statistics. The procedure works as follows:</p>
<ol>
<li>Segment GM on ASL image at 80th percentile of CBF image distribution</li>
<li>For PWI &amp; CBF images, select voxels higher than median + ClipThresholdValue MAD Vascular artifacts will have a high intensity in both images, whereas errors by division by M0 will only have a high intensity on the M0 image, and high values due to a biasfield will only be noticeable on the PWI image</li>
<li>Combine the two created masks</li>
<li>Obtain average clipping value from selected voxels from the combined masks</li>
<li>Apply compression if requested. If not, output image will have NaNs for intra-vascular voxels.</li>
</ol>
<p>Note that the definition of the threshold is obtained within the GM only, but that this threshold is applied to the full image to also remove extracranial extreme values</p>
<hr />
<h3 id="xasl_im_modulationm">xASL_im_Modulation.m</h3>
<h4 id="function_86">Function</h4>
<pre><code class="matlab">function xASL_im_Modulation(x)
</code></pre>

<h4 id="description_86">Description</h4>
<p>Combines the transformations to create Jacobians, &amp; multiplies the standard space segmentations with these to create volumetric images for volumetric analyses.</p>
<hr />
<h3 id="xasl_im_normalizelabelingterritoriesm">xASL_im_NormalizeLabelingTerritories.m</h3>
<h4 id="function_87">Function</h4>
<pre><code class="matlab">function image_out = xASL_im_NormalizeLabelingTerritories(imageIN, GMmask, x)
</code></pre>

<h4 id="description_87">Description</h4>
<p>Normalizes per perfusion territory mask should be GM mask.</p>
<hr />
<h3 id="xasl_im_overlapt1_aslm">xASL_im_OverlapT1_ASL.m</h3>
<h4 id="function_88">Function</h4>
<pre><code class="matlab">function xASL_im_OverlapT1_ASL(x, ASL)
</code></pre>

<h4 id="description_88">Description</h4>
<p>Part of ExploreASL. Shows spatial agreement ASL and probability maps.</p>
<hr />
<h3 id="xasl_im_pcam">xASL_im_PCA.m</h3>
<h4 id="function_89">Function</h4>
<pre><code class="matlab">function [pc, score, eigenvalues, tsquare, loadings, Xmean] = xASL_im_PCA(dataIn)
</code></pre>

<h4 id="description_89">Description</h4>
<p>...</p>
<hr />
<h3 id="xasl_im_presmoothm">xASL_im_PreSmooth.m</h3>
<h4 id="function_90">Function</h4>
<pre><code class="matlab">function pathOut = xASL_im_PreSmooth(pathRef, pathSrc, pathSmo, resRef, resSrc, srcAffinePath, bInvAffine)
</code></pre>

<h4 id="description_90">Description</h4>
<p>It assumes that the FWHM is equal to voxel size, unless the real resolution is given. Then takes into account the voxel sizes and orientation difference between the volumes, but performs the smoothing according to the given real resolution (it is possible to supply the resolution for just one image) - this should be helpful primarily when the. It creates a Gaussian covariance matrix for the reference, transforms it according to the difference between the two images a produces the Gaussian covariance matrix of the pre-smoothing in the source space. Then it performs the smoothing.
The following steps are performed:</p>
<ol>
<li>Obtain the voxel size</li>
<li>Skip this function if reference resolution is equal to, or lower than source resolution</li>
<li>Deal with affine transformation</li>
<li>Obtain the transformation matrix from the Reference to the Source space</li>
<li>Apply the smoothing filter on the source image(s)</li>
<li>Save the smoothed image</li>
</ol>
<hr />
<h3 id="xasl_im_processm0conventionalm">xASL_im_ProcessM0Conventional.m</h3>
<h4 id="function_91">Function</h4>
<pre><code class="matlab">function [Corr_M0] = xASL_im_ProcessM0Conventional(ImIn, x)
</code></pre>

<h4 id="description_91">Description</h4>
<p>This function uses the conventional M0 masking, and only a little smoothing, following what Philips uses for its 3D GRASE. Advantages of the newer M0 processing in ExploreASL are the lack of use of M0 threshold-based masking, the removal of high CSF values and higher SNR for ASL division.</p>
<hr />
<h3 id="xasl_im_projectlabelsoverdatam">xASL_im_ProjectLabelsOverData.m</h3>
<h4 id="function_92">Function</h4>
<pre><code class="matlab">function OutputIM = xASL_im_ProjectLabelsOverData(DataIM, LabelIM, x, ScaleFactorData, ScaleFactorLabel)
</code></pre>

<h4 id="description_92">Description</h4>
<p>This script projects labels over an image, but works only in 2D. Make sure to make a 2D image from a 3D or 4D image using xASL_im_TransformData2View.m can be used in combination with xASL_imwrite.m</p>
<hr />
<h3 id="xasl_im_pvcbsplinem">xASL_im_PVCbspline.m</h3>
<h4 id="function_93">Function</h4>
<pre><code class="matlab">function [imPVEC,imCBFrec,imResidual,FWHM] = xASL_im_PVCbspline(imCBF, imPV, bsplineNum)
</code></pre>

<h4 id="description_93">Description</h4>
<p>PVEc correction of ASL data using prior GM-,WM-partial volume maps.
Follows the principles of the PVEc algorithm by I. Asllani (MRM, 2008).
The PV-corrected CBF_GM and CBF_WM maps are approximated using an uniformly sampled cubic B-splines.
Free for research use without guarantee. </p>
<hr />
<h3 id="xasl_im_pvckernelm">xASL_im_PVCkernel.m</h3>
<h4 id="function_94">Function</h4>
<pre><code class="matlab">function [imPVEC,imCBFrec,imResidual] = xASL_im_PVCkernel(imCBF, imPV,kernel,mode)
</code></pre>

<h4 id="description_94">Description</h4>
<p>PVEc correction of ASL data using prior GM-,WM-partial volume maps.
Follows the principles of the PVEc algorithm by I. Asllani (MRM, 2008).
Free for research use without guarantee. If used in a study or publication. Please, acknowledge the author.</p>
<hr />
<h3 id="xasl_im_resamplelinearfairm">xASL_im_ResampleLinearFair.m</h3>
<h4 id="function_95">Function</h4>
<pre><code class="matlab">function [output_res]=xASL_im_ResampleLinearFair(im_input,newsize)
</code></pre>

<h4 id="description_95">Description</h4>
<p>Downsample (or upsample, works similarly) old_res image to low_res image, trilinear.</p>
<p><strong>NB:</strong> new_res should fit exactly integer fold in old_res.</p>
<p><strong>NB:</strong> All dimensions of new_res should have equal size.</p>
<hr />
<h3 id="xasl_im_rescalelinearm">xASL_im_RescaleLinear.m</h3>
<h4 id="function_96">Function</h4>
<pre><code class="matlab">function [ NewMatrix ] = xASL_im_RescaleLinear(OriMatrix, NewMin, NexMax, NonZerosOption)
</code></pre>

<h4 id="description_96">Description</h4>
<p>Linearly rescales input matrix to output matrix, applying a new minimum and new maximum.</p>
<hr />
<h3 id="xasl_im_restoreorientationm">xASL_im_RestoreOrientation.m</h3>
<h4 id="function_97">Function</h4>
<pre><code class="matlab">function xASL_im_RestoreOrientation(PathNIfTI)
</code></pre>

<h4 id="description_97">Description</h4>
<p>This function reverts the NIfTI header orientation matrix to the original orientation from the scanner/dcm2nii conversion.</p>
<hr />
<h3 id="xasl_im_rotatem">xASL_im_rotate.m</h3>
<h4 id="function_98">Function</h4>
<pre><code class="matlab">function rotated = xASL_im_rotate(im, angle)
</code></pre>

<h4 id="description_98">Description</h4>
<p>Simple rotation of the first two dimension of a ND image by 0, 90, 180, 270 degrees.</p>
<hr />
<h3 id="xasl_im_skullstripm">xASL_im_SkullStrip.m</h3>
<h4 id="function_99">Function</h4>
<pre><code class="matlab">function xASL_im_SkullStrip(InPath, PathMNIMask, x, OutPath)
</code></pre>

<h4 id="description_99">Description</h4>
<p>Creates skull-stripped T1w image based on MNI -&gt; native space registration from segmentation.</p>
<hr />
<h3 id="xasl_im_smooth3dm">xASL_im_Smooth3D.m</h3>
<h4 id="function_100">Function</h4>
<pre><code class="matlab">function [imSmo,imGaussX,imGaussY,imGaussZ] = xASL_im_Smooth3D(sigma, imIn, PSFtype)
</code></pre>

<h4 id="description_100">Description</h4>
<p>...</p>
<hr />
<h3 id="xasl_im_tileimagesm">xASL_im_TileImages.m</h3>
<h4 id="function_101">Function</h4>
<pre><code class="matlab">function [ImOut] = xASL_im_TileImages(ImIn, nColumns)
</code></pre>

<h4 id="description_101">Description</h4>
<p>Merges selected slices (3D) into one single 2D picture.</p>
<p>Plots all slices in one figure with specified rows and columns, aiming for a square tile.</p>
<p><strong>PM:</strong> can be extended to multiple slices.</p>
<hr />
<h3 id="xasl_im_transformdata2viewm">xASL_im_TransformData2View.m</h3>
<h4 id="function_102">Function</h4>
<pre><code class="matlab">function FigureOut = xASL_im_TransformData2View(ImagesIn, x)
</code></pre>

<h4 id="description_102">Description</h4>
<p>This function changes the dimensionality and reshapes the input images in such a way that they are nicely tiled in a mosaic for visualization purposes.
Reshaping a series of images with this function can be useful for visualization of SPM/voxel-based analyses.</p>
<hr />
<h3 id="xasl_im_upsamplem">xASL_im_Upsample.m</h3>
<h4 id="function_103">Function</h4>
<pre><code class="matlab">function xASL_im_Upsample(PathOrig, PathDest, NewVoxelSize, LeaveEmpty, PaddingDim, Kernel)
</code></pre>

<h4 id="description_103">Description</h4>
<p>Upsamples an ASL image, without changing the orientation matrix, which can be used e.g. for PVEc in higher resolution but same space.</p>
<hr />
<h3 id="xasl_im_visualizeroism">xASL_im_VisualizeROIs.m</h3>
<h4 id="function_104">Function</h4>
<pre><code class="matlab">function xASL_im_VisualizeROIs(x, ROI_T1_list, ROI_FLAIR_list)
</code></pre>

<h4 id="description_104">Description</h4>
<p>Creates for each subject  a JPEG image containing the original T1w, WMH_SEGM and T1w after lesion-filling.</p>
<hr />
<h3 id="xasl_im_visualqc_topupm">xASL_im_VisualQC_TopUp.m</h3>
<h4 id="function_105">Function</h4>
<pre><code class="matlab">function [MeanAI_PreTopUp_Perc, MeanAI_PostTopUp_Perc] = xASL_im_VisualQC_TopUp(PathPopB0, PathPopUnwarped, x, iSubject, CheckDir)
</code></pre>

<h4 id="description_105">Description</h4>
<p>This function creates a Figure that showes the effect of TopUp with 6 images with axial slices: the NormPE, RevPE and their difference image in colorscale, and this before (upper row) &amp; after (lower row) TopUp.</p>
<hr />
<h3 id="xasl_im_zeroedgesm">xASL_im_ZeroEdges.m</h3>
<h4 id="function_106">Function</h4>
<pre><code class="matlab">function [IM] = xASL_im_ZeroEdges(IM, EdgeThicknessPerc)
</code></pre>

<h4 id="description_106">Description</h4>
<p>Resampling can sometimes give some strange errors near image edges. These should be NaNs, but sometimes can be zeros or ones, or even weird numbers. For resampling, NaNs should be set to 0 (this is done in another function) as they can influence the resampling (depending on the transformation matrix). To be sure that the edges are nicely fixed, this function sets a border at the image matrix edges to zero.</p>
<hr />
<h3 id="xasl_init_convertm2jsonm">xASL_init_ConvertM2JSON.m</h3>
<h4 id="function_107">Function</h4>
<pre><code class="matlab">function [PathJSON] = xASL_init_ConvertM2JSON(PathM, bOverwrite)
</code></pre>

<h4 id="description_107">Description</h4>
<p>This function converts and replaces the legacy data parameter m-format by a JSON file. A DataPar.m was the settings/parameter file, specific to a dataset to be processed by ExploreASL, now replaced to JSON by BIDS. Note that the deployed/compiled version of ExploreASL requires the JSON file, this function should not be compiled along. This function performs the following steps:</p>
<ol>
<li>Run the m-file to load parameters</li>
<li>Escape characters that are illegal in JSON</li>
<li>Write the JSON</li>
</ol>
<hr />
<h3 id="xasl_init_defaulteffectiveresolutionm">xASL_init_DefaultEffectiveResolution.m</h3>
<h4 id="function_108">Function</h4>
<pre><code class="matlab">function [EffectiveResolution] = xASL_init_DefaultEffectiveResolution(PathASL, x)
</code></pre>

<h4 id="description_108">Description</h4>
<p>This ExploreASL module provides an educated guess on  the effective spatial resolution of ASL. This may depend on the combination of acquisition PSF, reconstruction filter, head motion. Note that the derived/processed images may have a lower effective resolution because of smoothing effects from interpolation. Note that this remains an educated-guess, the actual FWHM may still differ, especially for 3D GRASE sequences, where e.g. the choice of number of segments can affect the smoothness.
This function conducts the following steps:</p>
<ol>
<li>Educated-guess FWHM</li>
<li>Attempt accounting for in-plane interpolation in reconstruction</li>
<li>Calculate and report effective spatial resolution</li>
</ol>
<hr />
<h3 id="xasl_init_definestudydatam">xASL_init_DefineStudyData.m</h3>
<h4 id="function_109">Function</h4>
<pre><code class="matlab">function [x] = xASL_init_DefineStudyData(x)
</code></pre>

<h4 id="description_109">Description</h4>
<p>This initialization wrapper initializes the parameters for this pipeline run, i.e. subjects, sessions (runs), timepoints (visits), exclusions, sites, cohorts etc.</p>
<p>Note that ASL sessions are defined here as what BIDS calls "runs".</p>
<p>The "longitudinal_Registration functions here manage different TimePoints, which is what BIDS calls "visits".
With different structural scans, from the same participant. This is managed by subject name suffixes _1 _2 _n, and can be used for comparing visits in the population module, or running SPM's longitudinal within-subject registration</p>
<p>Parallelization is allowed here by calling ExploreASL different times, where it divides the subjects/images for processing across the nWorkers, using iWorker as the reference for the part that the current ExploreASL call will process. This requires having a Matlab license that can be started multiple times on a server, or alternatively running the ExploreASL compilation, and doesn't require the Matlab parallel toolbox.</p>
<p>This function exists from the following parts:</p>
<ol>
<li>Manage included &amp; excluded subjects</li>
<li>Create dummy defaults (exclusion list, ASL sessions)</li>
<li>Create list of total baseline &amp; follow-up subjects, before exclusions</li>
<li>Create TimePoint data-lists</li>
<li>Manage exclusions</li>
<li>Add sessions as statistical variable, if they exist</li>
<li>Parallelization: If running parallel, select cases for this worker</li>
<li>Add Longitudinal TimePoints (different T1 volumes) as covariate/set, after excluding</li>
<li>Load &amp; add statistical variables</li>
<li>Make x.S.SetsOptions horizontal if vertical by transposing</li>
<li>Create single site dummy, if there were no sites specified</li>
<li>Check for time points sets</li>
<li>Create list of baseline &amp; follow-up subjects (i.e. after exclusion)</li>
<li>Check what excluded from which TimePoints</li>
</ol>
<hr />
<h3 id="xasl_init_filesystemm">xASL_init_FileSystem.m</h3>
<h4 id="function_110">Function</h4>
<pre><code class="matlab">function [x] = xASL_init_FileSystem(x)
</code></pre>

<h4 id="description_110">Description</h4>
<p>This function initializes the file system used throughout ExploreASL, for processing a single dataset/scan.</p>
<p>It is repeated for each scan, and runs the following parts:</p>
<ol>
<li>Create folders</li>
<li>Subject/session definitions</li>
<li>Add prefixes &amp; suffixes</li>
<li>Add Subject-specific prefixes</li>
<li>Add sidecars</li>
</ol>
<hr />
<h3 id="xasl_init_initializemutexm">xASL_init_InitializeMutex.m</h3>
<h4 id="function_111">Function</h4>
<pre><code class="matlab">function [x] = xASL_init_InitializeMutex(x, ModuleName)
</code></pre>

<h4 id="description_111">Description</h4>
<p>This function initializes the mutex/lock system of ExploreASL for a module. Mutex (for mutual exclusion) is a synchronization mechanism for enforcing limits of access to data (here a module for a single scan) to allow parallelization. It also allows stopping and continuing of ExploreASL. This function runs the following steps:</p>
<ol>
<li>Lock folder management</li>
<li>Initialize mutex object</li>
</ol>
<hr />
<h3 id="xasl_init_labelcolorsmat">xASL_init_LabelColors.mat</h3>
<h4 id="function_112">Function</h4>
<pre><code class="matlab">...
</code></pre>

<h4 id="description_112">Description</h4>
<p>...</p>
<hr />
<h3 id="xasl_init_loadmetadatam">xASL_init_LoadMetadata.m</h3>
<h4 id="function_113">Function</h4>
<pre><code class="matlab">function [x] = xASL_init_LoadMetadata(x)
</code></pre>

<h4 id="description_113">Description</h4>
<p>This function loads all metadata used in the study, either statistical covariates (age, MMSE) or groups to compare between (site, sequence, cohort), or parameters to be used in quantification/image processing</p>
<p>These parameters should be provided in .mat files in the root analysis folder. Each .mat file should contain a single type of metadata, and the filename should equal the variable name. Metadata content should be a cell array with subjects as first column and metadata as last column. Sessions (runs) can be included as second column.</p>
<p>Metadata can be in any string or numerical format.</p>
<p>participants.tsv is now added per BIDS. It looks for metadata in participants.tsv first, before going through the mat-files.</p>
<p>This function iterates through the following steps for each variable:</p>
<ol>
<li>Admin (what nOptions do we call ordinal, convert subject numeric to string, remove white spaces from data)</li>
<li>Get unique list of data options &amp; check for missing data</li>
<li>Deal with data format (correct NaNs, deal with numeric vs strings)</li>
<li>Distinguish continous data (e.g. age) or ordinal data (groups to compare, e.g. cohort)</li>
<li>Check if data is complete for all subjects</li>
<li>Include complete data in x.S.SETS</li>
</ol>
<hr />
<h3 id="xasl_init_longitudinalregistrationm">xASL_init_LongitudinalRegistration.m</h3>
<h4 id="function_114">Function</h4>
<pre><code class="matlab">function [SubjectNlist, TimePoint, IsSubject, SubjectID_FirstVolume] = xASL_init_LongitudinalRegistration(x)
</code></pre>

<h4 id="description_114">Description</h4>
<p>This function initializes the longitudinal registration for ExploreASL, which implements the SPM longitudinal registration.</p>
<p>This function recognizes and defines visits (i.e. multiple scans per subject) in the initialization of ExploreASL, based on the suffixes _1 _2 _n in the subject names (identified as foldernames).</p>
<p>Specifically, this function is called in the registration modules LongReg and DARTEL, the first carrying out within-subject registration and the second between-subject registration, based on the first time point only.
For the first function, we specify here a list of visits/timepoints that should be registered longitudinally, for the second function we specify a list of first visits only, as the between-subject registration in ExploreASL is based on the first scan (as opposed to the average subject's scan).
This function runs the following steps:</p>
<ol>
<li>Get TimePoint-list (list of visits)</li>
<li>Find subject IDs</li>
</ol>
<hr />
<h3 id="xasl_init_visualizationsettingsm">xASL_init_VisualizationSettings.m</h3>
<h4 id="function_115">Function</h4>
<pre><code class="matlab">function [x] = xASL_init_VisualizationSettings(x)
</code></pre>

<h4 id="description_115">Description</h4>
<p>This function defines several visualization settings are used throughout ExploreASL's pipeline and tools, assuming a [121 145 121] matrix with 1.5 mm isotropic resolution in MNI space</p>
<p>INCLUDING:</p>
<ul>
<li>Slices*    - defines which transversal slices to show by default</li>
<li>TransCrop  - defines default cropping settings for all orientations</li>
<li>ColorMaps  - Generate several colormaps</li>
<li>VoxelSize  - default voxel-size in standard space/MNI as used by ExploreASL: 1.5 mm</li>
<li>skull      - brainmask for skullstripping</li>
</ul>
<hr />
<h3 id="xasl_io_createniftim">xASL_io_CreateNifti.m</h3>
<h4 id="function_116">Function</h4>
<pre><code class="matlab">function xASL_io_CreateNifti(pathNewNifti, imNew, resMat, nBits, bGZip)
</code></pre>

<h4 id="description_116">Description</h4>
<p>This function creates a new NIfTI file, using the SPM "nifti" functionality, with the parameters specified as input arguments. This function performs the following steps:</p>
<ol>
<li>Initialize NIfTI</li>
<li>Choose datatype (bit resolution)</li>
<li>Create scale slopes</li>
<li>Create orientation matrix</li>
<li>Write the new NIfTI, image matrix &amp; scale slopes</li>
<li>Zip and deal with zipping (.nii vs. .nii.gz)</li>
</ol>
<hr />
<h3 id="xasl_io_dcm2niim">xASL_io_dcm2nii.m</h3>
<h4 id="function_117">Function</h4>
<pre><code class="matlab">function [niifiles, ScanNameOut, usedinput, msg] = xASL_io_dcm2nii(inpath, destdir, series_name, varargin)
</code></pre>

<h4 id="description_117">Description</h4>
<p>Convert DICOM NIfTI/BIDS format using the dcm2nii command line utility.</p>
<hr />
<h3 id="xasl_io_dcmtkreadm">xASL_io_DcmtkRead.m</h3>
<h4 id="function_118">Function</h4>
<pre><code class="matlab">function header = xASL_io_DcmtkRead(filepath, bPixel)
</code></pre>

<h4 id="description_118">Description</h4>
<p>Calls the MEX function that uses DCMTK library to read the DICOM header.
To change which parameters are read and their names - the MEX file needs to be edited. This function also corrects formating of certain parameters.</p>
<hr />
<h3 id="xasl_io_makenifti4dicomm">xASL_io_MakeNifti4DICOM.m</h3>
<h4 id="function_119">Function</h4>
<pre><code class="matlab">function xASL_io_MakeNifti4DICOM(PathIn, x, DataType, OrientationPath, ResamplePath)
</code></pre>

<h4 id="description_119">Description</h4>
<p>This function converts a NIfTI file to one that is ready to convert to DICOM for PACS visualization purposes:</p>
<p>For scaling/visualization:</p>
<ol>
<li>Remove peak signal</li>
<li>Remove valley signal</li>
<li>Remove NaNs</li>
<li>Rescale to 12 bit integers</li>
<li>Save NIfTI. We also zip the NIfTI as this NIfTI won't be opened by ExploreASL</li>
<li>Manage scale slope/datatype</li>
<li>Apply original orientation</li>
<li>Zip NIfTI</li>
</ol>
<hr />
<h3 id="xasl_io_pairwisesubtractionm">xASL_io_PairwiseSubtraction.m</h3>
<h4 id="function_120">Function</h4>
<pre><code class="matlab">function xASL_io_PairwiseSubtraction(InputFile,outputPath,do_mask,switch_sign)
</code></pre>

<h4 id="description_120">Description</h4>
<p>Subtracts controls from labels and takes mean.
Creates new perfusion-weighted delta_M file, prefaced with 's'.
Converts into single precision floating point values (32 bit), removes scale slope.
Only runs if ['s' input_file_ASL] doesn't exist.
Remember to consider motion correction/ SPM realign (isotropically).
Alternative to this function is robust fit (Camille Maumet).</p>
<hr />
<h3 id="xasl_io_readthedicomm">xASL_io_ReadTheDicom.m</h3>
<h4 id="function_121">Function</h4>
<pre><code class="matlab">function [Info] = xASL_io_ReadTheDicom(bUseDCMTK, DicomPath)
</code></pre>

<h4 id="description_121">Description</h4>
<p>This function tries to read a DICOM and throws a warning if it fails to.</p>
<hr />
<h3 id="xasl_io_splitasl_m0m">xASL_io_SplitASL_M0.m</h3>
<h4 id="function_122">Function</h4>
<pre><code class="matlab">function xASL_io_SplitASL_M0(InPath,iM0)
</code></pre>

<h4 id="description_122">Description</h4>
<p>This function splits ASL4D &amp; M0 if they were in the same sequence.
If dcm2niiX has already splitted the ASL4D NIfTI, this is reconstructed first.
If no M0 exists, or only ASL splitting is desired, leave iM0 empty ([])</p>
<p>Vendor product sequence examples:</p>
<ul>
<li>GE 3D spiral sometimes puts the M0 at the last volume of the series -&gt; iM0 = [2];</li>
<li>Philips 3D GRASE puts the M0 as control-label volume pair -&gt; iM0 = [1 2];</li>
<li>Siemens 3D GRASE puts the M0 as the first volume -&gt; iM0 = 1;</li>
</ul>
<hr />
<h3 id="xasl_iterationm">xASL_Iteration.m</h3>
<h4 id="function_123">Function</h4>
<pre><code class="matlab">function [bAborted, xOut] = xASL_Iteration(x, moduleName, dryRun, stopAfterErrors, SelectedSubjects)
</code></pre>

<h4 id="description_123">Description</h4>
<p>Parses the settings and runs the DatabaseLoop sub-function.</p>
<hr />
<h3 id="xasl_num2strm">xASL_num2str.m</h3>
<h4 id="function_124">Function</h4>
<pre><code class="matlab">function [DataOut] = xASL_num2str(DataIn, f)
</code></pre>

<h4 id="description_124">Description</h4>
<p>When the provided data is numeric, this function will convert the number to string/characters, rewriting NaN into 'n/a' (BIDS convention) but otherwise preserving the Matlab builtin functionality, also for the second argument "f".
If non-numeric data is provided, it is bypassed (avoiding any issues "num2str" will have with non-numeric data).
See builtin num2str for more details.</p>
<hr />
<h3 id="xasl_qc_asymmetryindexm">xASL_qc_AsymmetryIndex.m</h3>
<h4 id="function_125">Function</h4>
<pre><code class="matlab">function [AI_perc] = xASL_qc_AsymmetryIndex(ImageIn)
</code></pre>

<h4 id="description_125">Description</h4>
<p>Extract voxel-wise asymmetry index for QC purposes.</p>
<hr />
<h3 id="xasl_qc_cat12_iqrm">xASL_qc_CAT12_IQR.m</h3>
<h4 id="function_126">Function</h4>
<pre><code class="matlab">function [QA_Output] = xASL_qc_CAT12_IQR(InputImage, InputC1, InputC2, InputC3, bFLAIR)
</code></pre>

<h4 id="description_126">Description</h4>
<p>Prepare and run CAT12s QC parameters (also for other images).</p>
<hr />
<h3 id="xasl_qc_collectparametersm">xASL_qc_CollectParameters.m</h3>
<h4 id="function_127">Function</h4>
<pre><code class="matlab">function x = xASL_qc_CollectParameters(x, iSubject, ScanType)
</code></pre>

<h4 id="description_127">Description</h4>
<p>This function collects QC parameters for a module.</p>
<hr />
<h3 id="xasl_qc_collectqc_aslm">xASL_qc_CollectQC_ASL.m</h3>
<h4 id="function_128">Function</h4>
<pre><code class="matlab">function [x] = xASL_qc_CollectQC_ASL(x, iSubject)
</code></pre>

<h4 id="description_128">Description</h4>
<p>This functions collects QC parameters for the ASL module.
These are stored in x.Output.ASL:</p>
<ul>
<li>ID - SubjectName</li>
<li>ASL_LR_flip_YesNo - Checks whether any image processing changed the left-right orientation by checking whether the determinant differs between nii.mat &amp; nii.mat0 SPM realign (too much motion is suspicious)</li>
<li>MotionMean_mm    - mean motion</li>
<li>MotionExcl_Perc  - percentage of excluded outliers</li>
<li>MotionMax_mm     - max motion</li>
<li>MotionSD_mm      - SD motion</li>
</ul>
<p>ASL quantification (strange average CBF, or strange GM-WM contrast). ASL acquisition parameters (should be fairly consistent over subjects/scans):</p>
<ul>
<li>TE - echo time</li>
<li>TR - repetition time</li>
<li>RescaleSlope - Philips</li>
<li>Scaleslope - Philips</li>
<li>Matrix X Y Z - matrix size</li>
<li>Matrix Z - number of slices</li>
<li>VoxelSize X Y - in plane resolution</li>
<li>VoxelSize Z - slice thickness</li>
<li>RigidBody2Anat_mm - Net Displacement Vector (RMS) from ASL to T1w image (mm) from registration</li>
</ul>
<hr />
<h3 id="xasl_qc_collectqc_funcm">xASL_qc_CollectQC_func.m</h3>
<h4 id="function_129">Function</h4>
<pre><code class="matlab">function [x] = xASL_qc_CollectQC_func(x, iSubject)
</code></pre>

<h4 id="description_129">Description</h4>
<p>This functions collects QC parameters for the func module. These are stored in x.Output.func:</p>
<ul>
<li>ID - SubjectName</li>
<li>func_LR_flip_YesNo - Checks whether any image processing changed the left-right orientation by checking whether the determinant differs between nii.mat &amp; nii.mat0 SPM realign (too much motion is suspicious)</li>
<li>MotionMean_mm    - mean motion</li>
<li>MotionExcl_Perc  - percentage of excluded outliers</li>
<li>MotionMax_mm     - max motion</li>
<li>MotionSD_mm      - SD motion</li>
</ul>
<p>Func quantification (strange average CBF, or strange GM-WM contrast):</p>
<ul>
<li>CBF_GM_Median_mL100gmin - median GM CBF</li>
<li>CBF_WM_Median_mL100gmin - median WM CBF</li>
<li>SpatialCoV_GM_Perc      - GM spatial CoV</li>
<li>SpatialCoV_WM_Perc      - WM spatial CoV</li>
<li>CBF_GM_WM_Ratio         - GM-WM CBF ratio</li>
</ul>
<p>Func acquisition parameters (should be fairly consistent over subjects/scans):</p>
<ul>
<li>TE - echo time</li>
<li>TR - repetition time</li>
<li>RescaleSlope - Philips</li>
<li>Scaleslope - Philips</li>
<li>Matrix X Y Z - matrix size</li>
<li>Matrix Z - number of slices</li>
<li>VoxelSize X Y - in plane resolution</li>
<li>VoxelSize Z - slice thickness</li>
<li>RigidBody2Anat_mm - Net Displacement Vector (RMS) from func to T1w image (mm) from registration</li>
</ul>
<hr />
<h3 id="xasl_qc_collectqc_structuralm">xASL_qc_CollectQC_Structural.m</h3>
<h4 id="function_130">Function</h4>
<pre><code class="matlab">function [x] = xASL_qc_CollectQC_Structural(x, iSubject)
</code></pre>

<h4 id="description_130">Description</h4>
<p>This functions collects QC parameters for the structural module. These are stored in x.Output.Structural:</p>
<ul>
<li>ID - SubjectName</li>
<li>T1w_LR_flip_YesNo - Checks whether any image processing changed the left-right orientation by checking whether the determinant differs between nii.mat &amp; nii.mat0</li>
</ul>
<p>LST output:</p>
<ul>
<li>WMH_vol_mL        - WMH volume</li>
<li>WMH_n             - WMH number of lesions</li>
</ul>
<p>CAT12 output:</p>
<ul>
<li>T1w_IQR_Perc      - CAT12 IQR quality parameter for T1w</li>
</ul>
<p>Volumetric: GM_vol_mL, WM_vol_mL, CSF_vol_mL, ICV_vol_mL, GM_ICV_Ratio</p>
<hr />
<h3 id="xasl_qc_collectsoftwareversionsm">xASL_qc_CollectSoftwareVersions.m</h3>
<h4 id="function_131">Function</h4>
<pre><code class="matlab">function [x] = xASL_qc_CollectSoftwareVersions(x)
</code></pre>

<h4 id="description_131">Description</h4>
<p>This functions collects software versions for matlab, SPM, CAT, LST &amp; ExploreASL. These are stored in x.Output.Software.</p>
<hr />
<h3 id="xasl_qc_comparetemplatem">xASL_qc_CompareTemplate.m</h3>
<h4 id="function_132">Function</h4>
<pre><code class="matlab">function [QC] = xASL_qc_CompareTemplate(x, ScanTypePrefix, iSubjectSession)
</code></pre>

<h4 id="description_132">Description</h4>
<p>This function computes several advanced template-based QC parameters:</p>
<ul>
<li>RMSE_Perc        - Root Mean Square Error between image and template (%)</li>
<li>nRMSE_Perc       - Same but then normalized</li>
<li>AI_Perc          - Asymmetry Index between image and template (%)</li>
<li>Mean_SSIM_Perc   - mean structural similarity index -&gt; xASL_stat_MeanSSIM.m</li>
<li>PeakSNR_Ratio    - peak signal-to-noise ratio -&gt; xASL_stat_PSNR.m</li>
</ul>
<hr />
<h3 id="xasl_qc_computefovcoveragem">xASL_qc_ComputeFoVCoverage.m</h3>
<h4 id="function_133">Function</h4>
<pre><code class="matlab">function [CoveragePerc] = xASL_qc_ComputeFoVCoverage(InputPath, x)
</code></pre>

<h4 id="description_133">Description</h4>
<p>This function computes the intersection/overlap between brainmask on field-of-view (FoV) of low resolution image (native space) &amp; the same brainmask with expanded FoV. It uses the pGM+pWM+pCSF as brainmask.
This assumes that the structural reference image has full brain coverage, and was properly segmented into GM, WM and CSF. Also, we assume that the InputPath contains a single 3D volume.</p>
<hr />
<h3 id="xasl_qc_computeniftiorientationm">xASL_qc_ComputeNiftiOrientation.m</h3>
<h4 id="function_134">Function</h4>
<pre><code class="matlab">function [Struct] = xASL_qc_ComputeNiftiOrientation(x, PathNIfTI, Struct)
</code></pre>

<h4 id="description_134">Description</h4>
<p>...</p>
<hr />
<h3 id="xasl_qc_createpdfm">xASL_qc_CreatePDF.m</h3>
<h4 id="function_135">Function</h4>
<pre><code class="matlab">function xASL_qc_CreatePDF(x, DoSubject)
</code></pre>

<h4 id="description_135">Description</h4>
<p>This function iterates over all values in x.Output and all images in x.Output_im, and prints them in a PDF file.
x.Output &amp; x.Output_im should contain the QC/result output of all ExploreASL pipeline steps.</p>
<p>Further code explanation:</p>
<p>Below, using the Matlab &amp; SPM Figure tools we create an image, which is then printed to a PDF file.</p>
<ul>
<li>fg = the main Figure handle</li>
<li>ax = "axes" handles, these are objects containing either 1) text or 2) images, with fg as "parent" (1) &amp; (2) images have ax as "parent".</li>
</ul>
<p>Positions are calculated in such a way that 4 categories can be printed, which will be the first 4 fields found in x.Output then allowing 8 single slice images, and 15 text lines (name &amp; value columns).</p>
<hr />
<h3 id="xasl_qc_fa_outliersm">xASL_qc_FA_Outliers.m</h3>
<h4 id="function_136">Function</h4>
<pre><code class="matlab">function [FA_Outliers_mL] = xASL_qc_FA_Outliers(InputFA)
</code></pre>

<h4 id="description_136">Description</h4>
<p>Extract the number of FA outliers, i.e. values of FA above 1 or below 0, from a FA image.</p>
<hr />
<h3 id="xasl_qc_obtainqccategoriesfromjpgm">xASL_qc_ObtainQCCategoriesFromJPG.m</h3>
<h4 id="function_137">Function</h4>
<pre><code class="matlab">function xASL_qc_ObtainQCCategoriesFromJPG(x)
</code></pre>

<h4 id="description_137">Description</h4>
<p>This function obtains QC categories as covariant/set, based on the JPGs in //Population/ASLCheck. These are initially sorted by spatial CoV, and should be visually checked &amp; put in the correct folder.</p>
<hr />
<h3 id="xasl_qc_pcpstructuralm">xASL_qc_PCPStructural.m</h3>
<h4 id="function_138">Function</h4>
<pre><code class="matlab">function [anatQA] = xASL_qc_PCPStructural(PathT1, Pathc1T1, Pathc2T1, x, PopPathT1)
</code></pre>

<h4 id="description_138">Description</h4>
<p>This function computes several anatomical QC parameters as proposed in SPM Univariate Plus:</p>
<ul>
<li>WM_ref_vol_mL    - volume of the WM reference region (mL)</li>
<li>WMref_vol_Perc   - same but as percentage of total WM volume</li>
<li>SNR_GM           - GM signal-to-Noise Ratio (SNR), ie the mean intensity within GM divided by SD of WM reference region. Higher = better.</li>
<li>CNR_GM_WM        - GM-WM Contrast-to-Noise Ratio (CNR), i.e. the mean of GM - mean of WM divided by the SD of the WM reference region. Higher = better.</li>
<li>FBER_WMref_Ratio - Foreground to Background Energy Ratio (FBER), i.e. the variance of voxels within the brain (in pGM+pWM mask) divided by the variance of voxels in the WM reference region. Higher = better.</li>
<li>EFC_bits         - Shannon Entropy Focus Criterion (EFC), i.e. the entropy of voxel intensities proportional to the maximum possibly entropy for a similarly sized image. Indicates ghosting and head motion-induced blurring. Lower = better.</li>
<li>Mean_AI_Perc     - mean relative voxel-wise absolute Asymmetry Index (AI) within the brain (pGM+pWM mask) (%)</li>
<li>SD               - same but SD (%)</li>
</ul>
<hr />
<h3 id="xasl_qc_printorientationm">xASL_qc_PrintOrientation.m</h3>
<h4 id="function_139">Function</h4>
<pre><code class="matlab">function xASL_qc_PrintOrientation(DIR, reg_exp_INPUT,OUTPUT_DIR,Name)
</code></pre>

<h4 id="description_139">Description</h4>
<p>Check orientation of niftis, useful to detect accidental left-right flips (all other flips will be visible). Translations, rotations or shears are not to be worried about, only negative zooms. This can be detected by negative determinants.
So orientation parameters and determinants should be similar across all scans from single scanner/coil, and registration should not give negative determinant.</p>
<hr />
<h3 id="xasl_qc_tanimotocoeffm">xASL_qc_TanimotoCoeff.m</h3>
<h4 id="function_140">Function</h4>
<pre><code class="matlab">function TC = xASL_qc_TanimotoCoeff(Image1, Image2, imMask, type, bClip, bSmooth)
</code></pre>

<h4 id="description_140">Description</h4>
<p>Compares images Image1 and Image2 within the mask imMask. TYPE specifies the input data type.</p>
<hr />
<h3 id="xasl_qc_temporalsnrm">xASL_qc_temporalSNR.m</h3>
<h4 id="function_141">Function</h4>
<pre><code class="matlab">function tSNR = xASL_qc_temporalSNR(pathIm4D,pathImTissueProb)
</code></pre>

<h4 id="description_141">Description</h4>
<p>This function computes several temporal SNR QC parameters as proposed in SPM Univariate Plus:</p>
<ul>
<li>tSNR.tSNR_GM_Ratio      : mean GM signal / std GM over time </li>
<li>tSNR.tSNR.tSNR_WM_Ratio : mean WM signal / std WM over time</li>
<li>tSNR.tSNR.tSNR_CSF_Ratio: mean CSF signal / std CSF over time</li>
<li>tSNR.tSNR_WMref_Ratio   : mean signal/std over time in eroded deep WM</li>
<li>tSNR.tSNR_GMWM_Ratio    : mean (GM+WM) signal / sqrt(std(GM+WM)^2+std(WMref)^2)</li>
<li>tSNR.tSNR_GMWM_WMref_Ratio: mean (GM+WM) signal / std WMref over time</li>
<li>tSNR.tSNR_Physio2Thermal_Ratio: sqrt((tSNR(GM+WM)/tSNR_GMWM_WMref_Ratio))^2-1)</li>
<li>tSNR.tSNR_Slope_Corr:</li>
</ul>
<p>Differences to the SPM U+ suggestion: 
* Eroded WM is used for estimating background noise
* Brainmask is determined in the same way as the structural anatQC,
* CSF is determined from the pGM&amp;pWM maps;</p>
<hr />
<h3 id="xasl_qc_wadqcdcm">xASL_qc_WADQCDC.m</h3>
<h4 id="function_142">Function</h4>
<pre><code class="matlab">function xASL_qc_WADQCDC(x, iSubject, ScanType)
</code></pre>

<h4 id="description_142">Description</h4>
<p>This QC function runs WAD-QC specific Python script to zip QC information &amp; incorporate this into a DICOM field for analysis on the WAD-QC server, by the following:</p>
<ol>
<li>Define QCDC script: this is the Python script written by Gaspare, edited by Joost Kuijer &amp; copied to the EPAD CustomScripts folder of ExploreASL</li>
<li>Python installation location is checked, with several known locations, for several servers. If we cannot find it, the QCDC is not ran</li>
<li>Previous QCDC results are cleaned. QCDC stores all its results in a separate folder (Something like 2 layers up from the current folder, here referred to as QCDCDir = [x.D.ROOT 'qcdc_output']) from these result files, only the filled DICOM file is interesting, all the rest are copies of the QC results that we embedded into the DICOM</li>
<li>Run QCDC (if Python installation detected). The following files need to be set as executable:<ul>
<li>('QCDC', 'src', 'qc_data_collector.py')</li>
<li>('QCDC', 'src', 'bash', 'create_dcm_only_wadqc.sh')</li>
<li>('QCDC', 'src', 'bash', 'sendwadqc.sh')</li>
</ul>
</li>
<li>Clean up new QCDC results (as above) &amp; move the filled. DICOM to ['qcdc_' DummyFile] within the current ScanType folder.</li>
<li>Sending the DICOM to the WAD-QC server using storescu</li>
</ol>
<hr />
<h3 id="xasl_qc_wadqc_generatedescriptorm">xASL_qc_WADQC_GenerateDescriptor.m</h3>
<h4 id="function_143">Function</h4>
<pre><code class="matlab">function xASL_qc_WADQC_GenerateDescriptor(x, iSubject, ScanTypeIs)
</code></pre>

<h4 id="description_143">Description</h4>
<p>This QC function generates a JSON descriptor for Gaspare' QCDC script, by the following steps:</p>
<ol>
<li>include information about where to find the dummy DICOM (i.e. placeholder DICOM)</li>
<li>For ExploreASL' QC fields (as passed through in x.Output), here we note all these QC fields for each ScanType, as the x.Output should have been collected equally in the QC file 'QC_collection_SubjectName.json' by function xASL_qc_CollectParameters</li>
<li>Subfunction xASL_qc_WADQC_images - Includes visual standard space QC images, by searching them on prescribed paths within the Population folder (where currently all derivatives reside)</li>
<li>Insert the PDF report; this PDF report is subject-specific, not scan-specific. For completeness it is added to each QCDC descriptor</li>
<li>Add WAD-QC server details (i.e. IP address etc)</li>
<li>Save the Descriptor JSON file.</li>
</ol>
<hr />
<h3 id="xasl_quant_agesex2hctm">xASL_quant_AgeSex2Hct.m</h3>
<h4 id="function_144">Function</h4>
<pre><code class="matlab">function Hct = xASL_quant_AgeSex2Hct(age, gender)
</code></pre>

<h4 id="description_144">Description</h4>
<p>Function to return estimated Hct, based on age and gender. Enter age in years, and for gender: 0=female, 1=male pass NaN is either not known.</p>
<hr />
<h3 id="xasl_quant_feastm">xASL_quant_FEAST.m</h3>
<h4 id="function_145">Function</h4>
<pre><code class="matlab">function xASL_quant_FEAST(x)
</code></pre>

<h4 id="description_145">Description</h4>
<p>Computation FEAST-based transit times (uses images that were not vasculary treated) if there is a crushed &amp; non-crushed scan, then transit times will be computed by division of these scans, provided sessions are exactly named as defined below.</p>
<hr />
<h3 id="xasl_quant_getcontrollabelorderm">xASL_quant_GetControlLabelOrder.m</h3>
<h4 id="function_146">Function</h4>
<pre><code class="matlab">function [ControlIm, LabelIm, OrderContLabl] = xASL_quant_GetControlLabelOrder(ASLTimeSeries)
</code></pre>

<h4 id="description_146">Description</h4>
<p>This function automatically checks (and corrects if required) the control and label order of ASL timeseries based on the larger signal in control volumes.
It supposes that data is acquired in pairs.</p>
<hr />
<h3 id="xasl_quant_hct2bloodt1m">xASL_quant_Hct2BloodT1.m</h3>
<h4 id="function_147">Function</h4>
<pre><code class="matlab">function BloodT1 = xASL_quant_Hct2BloodT1(Hematocrit, Y, B0, bVerbose)
</code></pre>

<h4 id="description_147">Description</h4>
<p>This function converts hematocrit to blood T1, according to calculations defined by Patrick Hales. With courtesy and thanks!
Note that we assume a venous O2 saturation of 68% (Yv=0.68)</p>
<p>This function performs the following steps:</p>
<ol>
<li>Check fraction vs percentage hematocrit &amp; Y, should be between 0 and 1</li>
<li>Specify defaults (Hb, Fe)</li>
<li>Perform calculation</li>
<li>Convert s to ms</li>
<li>Print what we did</li>
</ol>
<hr />
<h3 id="xasl_quant_m0m">xASL_quant_M0.m</h3>
<h4 id="function_148">Function</h4>
<pre><code class="matlab">function [M0IM] = xASL_quant_M0(M0IM, x)
</code></pre>

<h4 id="description_148">Description</h4>
<p>This function quantifies the M0, except for the difference in voxel size between the M0 and ASL source data (which is scaled in xASL_wrp_ProcessM0.m).</p>
<hr />
<h3 id="xasl_quant_singlepldm">xASL_quant_SinglePLD.m</h3>
<h4 id="function_149">Function</h4>
<pre><code class="matlab">function [ScaleImage, CBF] = xASL_quant_SinglePLD(PWI, M0_im, SliceGradient, x)
</code></pre>

<h4 id="description_149">Description</h4>
<p>This script performs a multi-step quantification, by initializing a ScaleImage that travels through this script &amp; gets changed by the following quantification factors:</p>
<ol>
<li>PLD scalefactor (gradient if 2D multi-slice) (if x.ApplyQuantification(3))</li>
<li>Label decay scale factor for single (blood T1) - or dual-compartment (blood+tissue T1) model, CASL or PASL. Single-compartment model: Alsop MRM 2014.
 Dual-compartment model: Wang MRM 2002: Gevers JMRI 2012 (if x.ApplyQuantification(3))</li>
<li>Scaling to physiological units [ml/gr/ms =&gt;ml/100gr/min =&gt;(60,000 ms=&gt;min)(1 gr=&gt;100gr)] (if x.ApplyQuantification(3))</li>
<li>Vendor-specific scalefactor (if x.ApplyQuantification(1) -&gt; future move to dcm2niiX stage)</li>
<li>Divide PWI/M0 (if x.ApplyQuantification(5))</li>
<li>Print parameters used</li>
</ol>
<p>Note that the output always goes to the CBF image (in the future this could go to different stages, e.g. dcm2niiX or PWI stage)</p>
<hr />
<h3 id="xasl_spm_affinem">xASL_spm_affine.m</h3>
<h4 id="function_150">Function</h4>
<pre><code class="matlab">function xASL_spm_affine(srcPath, refPath, fwhmSrc, fwhmRef, otherList, bDCT)
</code></pre>

<h4 id="description_150">Description</h4>
<p>This SPM wrapper runs SPM's old normalize-estimate function, which calculates the affine transformation (i.e. linear + zooming and shearing) that is required to align the source image with the reference image. By default it does not estimate the low-degree Discrete Cosine Transform (DCT) to have a simple affine transformation  but this can be enabled in this wrapper. Also note that this affine transformation uses a correlation cost function, hence it requires the source and reference images to have similar contrasts and resolution - or provide the resolution estimates so the smoothing can be done.
This function does not change the orientation header by default, but it allows to change those of others through the otherList. If bDCT is used or no otherList given, it stores its estimated affine transformation as orientation difference matrix in a file with the same path but _sn.mat extension. For the provided smoothing FWHM, note that smoothnesses combine with Pythagoras' rule (i.e. square summing).</p>
<hr />
<h3 id="xasl_spm_biasfieldcorrectionm">xASL_spm_BiasfieldCorrection.m</h3>
<h4 id="function_151">Function</h4>
<pre><code class="matlab">function xASL_spm_BiasfieldCorrection(PathIn, SPMdir, Quality, PathMask, PathOut)
</code></pre>

<h4 id="description_151">Description</h4>
<p>This function is a wrapper around the SPM "old segment" function, for biasfield removal. It is tested for M0 and mean control images. It conducts the following steps:</p>
<ol>
<li>Create implicit mask</li>
<li>Define SPM 'old segmentation' settings</li>
<li>Run SPM 'old segmentation'</li>
<li>Delete temporary files</li>
<li>Rename temporary SPM file into output file</li>
</ol>
<hr />
<h3 id="xasl_spm_coregm">xASL_spm_coreg.m</h3>
<h4 id="function_152">Function</h4>
<pre><code class="matlab">function xASL_spm_coreg(refPath, srcPath, OtherList, x, sep, FastReg)
</code></pre>

<h4 id="description_152">Description</h4>
<p>This SPM wrapper runs SPMs coregister-estimate function, which calculates the 6 parameter rigid-body transformation (a.k.a. linear) that is required to align the source image with the reference image. This 6 parameter transformation (i.e. 3 XYZ translations and 3 rotations) is applied to the orientation header of the source NIfTI image, and also to the images provided in OtherList (optional).</p>
<p>Note that this SPM registration function uses a normalized mutual information (NMI) by default, enabling registration between two images with different contrast. Note that this algorithm will use the first volume of a multi-volume NIfTI</p>
<hr />
<h3 id="xasl_spm_defacem">xASL_spm_deface.m</h3>
<h4 id="function_153">Function</h4>
<pre><code class="matlab">function xASL_spm_deface(PathIn, bReplace)
</code></pre>

<h4 id="description_153">Description</h4>
<p>This function removes the face from an anatomical NIfTI image, e.g. T1w or FLAIR, for disidentification/privacy purposes. When this script is run after the ExploreASL structural module, it does a pretty good job even for 2D images.
However, note that this can always fail, strip part of the brain, or change the output of pipelines. So best not to compare results from defaced and non-defaced images.
Also, note that defacing makes it difficult to ensure that the FLAIR and T1w are from the same subject.</p>
<hr />
<h3 id="xasl_spm_deformationsm">xASL_spm_deformations.m</h3>
<h4 id="function_154">Function</h4>
<pre><code class="matlab">function xASL_spm_deformations(x, PathIn, PathOut, Interpolation, InverseSpace, AffineTrans, DeformationPath, VoxelSize)
</code></pre>

<h4 id="description_154">Description</h4>
<p>This ExploreASL wrapper manages the SPM deformation tool. It takes multiple (ExploreASL pipeline) transformations and combines/concatenates them into a single transformation prior to applying it to the input images. 
This allows to apply multiple transformations with a single interpolation, avoiding propagation of undesired interpolation effects. Mainly used to get native space images into standard space, or vice versa.
Best to combine as many files as possible within this function, since the deformation calculation (which is the most computation intensive part) needs to be performed once for multi-file resampling.</p>
<hr />
<h3 id="xasl_stat_atlasforstatsm">xASL_stat_AtlasForStats.m</h3>
<h4 id="function_155">Function</h4>
<pre><code class="matlab">function [x] = xASL_stat_AtlasForStats(x)
</code></pre>

<h4 id="description_155">Description</h4>
<p>This function loads atlases, checks them, and their ROI names, for later use as ROI definition in xASL_stat_GetROIstatistics.
Note that the atlases should be integer values, or different 4rd dimensions (i.e. multiple images), that are mutually exclusive. This function takes the following steps:</p>
<ol>
<li>Load atlas ROI names. There should be a TSV sidecar to the atlas NIfTI file, as explained above.</li>
<li>deal with memory mapping</li>
<li>Resample atlas 50 1.5 mm^3 MNI</li>
<li>Converted atlas with integers to 4D binary image</li>
<li>Convert/compress masks into Columns</li>
<li>Print atlas overview image</li>
</ol>
<hr />
<h3 id="xasl_stat_computediffercovm">xASL_stat_ComputeDifferCoV.m</h3>
<h4 id="function_156">Function</h4>
<pre><code class="matlab">function diffCoV = xASL_stat_ComputeDifferCoV(imCBF,imMask,bPVC,imGM,imWM,b3D)
</code></pre>

<h4 id="description_156">Description</h4>
<p>It calculates the spatial DiffCoV value on finite part of imCBF. Optionally a mask IMMASK is provide, and PVC is done for bPVC==2 using imGM and imWM masks and constructing pseudoCoV from pseudoCBF image. For bPVC\~=2, imGM and imWM are ignored. It is calculated in 2D or assuming also 3D edges based on B3D. Calculate derivate spatial CoV, by summing up differences in CBF between neighbors. The derivative uses Sobels filter.</p>
<hr />
<h3 id="xasl_stat_computemeanm">xASL_stat_ComputeMean.m</h3>
<h4 id="function_157">Function</h4>
<pre><code class="matlab">function [CBF_GM, CBF_WM] = xASL_stat_ComputeMean(imCBF, imMask, nMinSize, bPVC, imGM, imWM)
</code></pre>

<h4 id="description_157">Description</h4>
<p>It behaves in a similar way as VAR.</p>
<hr />
<h3 id="xasl_stat_computespatialcovm">xASL_stat_ComputeSpatialCoV.m</h3>
<h4 id="function_158">Function</h4>
<pre><code class="matlab">function sCov = xASL_stat_ComputeSpatialCoV(imCBF,imMask,nMinSize,bPVC,imGM,imWM)
</code></pre>

<h4 id="description_158">Description</h4>
<p>It calculates the spatial CoV value on finite part of imCBF. Optionally a mask IMMASK is provide, ROIs of size &lt; NMINSIZE are ignored, and PVC is done for bPVC==2 using imGM and imWM masks and constructing pseudoCoV from pseudoCBF image. For bPVC\~=2, imGM and imWM are ignored.</p>
<hr />
<h3 id="xasl_stat_equalvariancestestm">xASL_stat_EqualVariancesTest.m</h3>
<h4 id="function_159">Function</h4>
<pre><code class="matlab">function [resTest, P] = xASL_stat_EqualVariancesTest(X, alpha, type)
</code></pre>

<h4 id="description_159">Description</h4>
<p>Brown-Forsythe or Levene's test for equality of variances. The response variable is transformed (yij = abs(xij - median(xj)) for Brown-Forsythe and yij = abs(xij - mean(xj)) for Levene's test). And then runs a one-way ANOVA F-test to check if the variances are equal.</p>
<hr />
<h3 id="xasl_stat_fcdfm">xASL_stat_fcdf.m</h3>
<h4 id="function_160">Function</h4>
<pre><code class="matlab">function p = xASL_stat_fcdf(F,M,N)
</code></pre>

<h4 id="description_160">Description</h4>
<p>Calculates the cumulative distribution function of the F-distribution for degrees of freedom M, N at value F.</p>
<hr />
<h3 id="xasl_stat_getroistatisticsm">xASL_stat_GetROIstatistics.m</h3>
<h4 id="function_161">Function</h4>
<pre><code class="matlab">function [x] = xASL_stat_GetROIstatistics(x)
</code></pre>

<h4 id="description_161">Description</h4>
<p>This function computes mean and spatial CoV for each ROI, in a [1.5 1.5 1.5] mm MNI space, with several ASL-specific adaptions:</p>
<ol>
<li>Skip ROI masks that are smaller than 1 mL as this would be too noisy for ASL (skipped when x.S.IsASL==false)</li>
<li>Expand each ROI mask such that it has sufficient WM content (skipped when IsASL==false)</li>
<li>Create for each ROI mask a left, right and bilateral copy</li>
<li>Iterate over all subjects:<ul>
<li>Load partial volume maps</li>
<li>Correct for WMH SEGM -&gt; IS THIS STILL REQUIRED???</li>
<li>Load data</li>
<li>Show ROIs projected on ASL image</li>
<li>Actual data computations<ul>
<li>Partial Volume Correction (PVC) options:</li>
<li>PVC==0 -&gt; perform masking only, no regression</li>
<li>PVC==1 -&gt; single compartment regression, for pGM</li>
<li>PVC==2 -&gt; dual compartment regression for pGM &amp; pWM (i.e. normal PVC)</li>
<li>Here we mask out susceptibility artifacts (including outside FoV) for all ASL computations, and also mask out vascular artifacts for computing the mean.</li>
</ul>
</li>
<li>While other artifacts/FoV can be masked out on population level (i.e. &gt;0.95 subjects need to have a valid signal in a certain voxel), vascular artifacts differ too much in their location between subjects, so we mask this on subject-level.</li>
</ul>
</li>
</ol>
<p>Note that the words "mask" and "ROI" are used interchangeably throughout this function, where they can have a different or the same meaning</p>
<p><strong>PM:</strong> WE COULD CHANGE THIS, INTO MASK BEING USED TO EXCLUDE VOXELS AND ROI FOR INCLUDING VOXELS</p>
<hr />
<h3 id="xasl_stat_madnanm">xASL_stat_MadNan.m</h3>
<h4 id="function_162">Function</h4>
<pre><code class="matlab">function y = xASL_stat_MadNan(x,flag,dim)
</code></pre>

<h4 id="description_162">Description</h4>
<p>Calculates a Median/Mean Absolute deviation, but ignoring NaNs in the calculation.</p>
<p>xASL_stat_MadNan(X) or xASL_stat_MadNan(X,0) computes xASL_stat_MeanNan(ABS(X-xASL_stat_MeanNan(X))</p>
<p>xASL_stat_MadNan(X,1) computes xASL_stat_MedianNan(ABS(X-xASL_st_MedianNan(X)).</p>
<hr />
<h3 id="xasl_stat_meanssimm">xASL_stat_MeanSSIM.m</h3>
<h4 id="function_163">Function</h4>
<pre><code class="matlab">function mssim=xASL_stat_MeanSSIM(imRef,imSrc,dynRange)
</code></pre>

<h4 id="description_163">Description</h4>
<p>Calculates the similarity index according to Want et al. </p>
<hr />
<h3 id="xasl_stat_multiplelinregm">xASL_stat_MultipleLinReg.m</h3>
<h4 id="function_164">Function</h4>
<pre><code class="matlab">function [b,CI,pval,stats] = xASL_stat_MultipleLinReg(X,Y,bIntercept)
</code></pre>

<h4 id="description_164">Description</h4>
<p>Performs a multiple linear regression Y=b * X+a and provides the intercept and regression coefficients beta including their significance and confidence intervals. It calculates additionally the goodness of the fit.</p>
<hr />
<h3 id="xasl_stat_printstatsm">xASL_stat_PrintStats.m</h3>
<h4 id="function_165">Function</h4>
<pre><code class="matlab">function [x] = xASL_stat_PrintStats(x)
</code></pre>

<h4 id="description_165">Description</h4>
<p>This function prints an overview of statistics from data that were acquired per ROI, in a TSV file. It starts by printing covariates (called "Sets"). Rows will be subjects/sessions, columns will be the sets and</p>
<p>ROI-statistics:</p>
<ol>
<li>First remove previous TSV-file, if already existed printing to a TSV file can be tricky if it is opened by Excel. Make sure to close previous versions first, otherwise this part will crash.</li>
<li>Print overview of sets to TSV as explained above. Uses subfunction xASL_stat_CreateLegend to put legends. Aim is to create a single TSV file that has a proper overview of the data, &amp; is self-explanatory to those reading/using it.</li>
<li>Define number of ASL sessions, force to 1 in case of TT or volume metrics</li>
<li>Print the overview</li>
</ol>
<hr />
<h3 id="xasl_stat_psnrm">xASL_stat_PSNR.m</h3>
<h4 id="function_166">Function</h4>
<pre><code class="matlab">function PSNR=xASL_stat_PSNR(imRef,imSrc)
</code></pre>

<h4 id="description_166">Description</h4>
<p>Calculates the PSNR, needs two input arguments - 3D images of the same size. 
Uses 95% percentile instead of MAX.</p>
<hr />
<h3 id="xasl_stat_quantilenanm">xASL_stat_QuantileNan.m</h3>
<h4 id="function_167">Function</h4>
<pre><code class="matlab">function y = xASL_stat_QuantileNan(x,quant,dim)
</code></pre>

<h4 id="description_167">Description</h4>
<p>Calculates a quantile, but ignoring NaNs in the calculation.</p>
<hr />
<h3 id="xasl_stat_robustmeanm">xASL_stat_RobustMean.m</h3>
<h4 id="function_168">Function</h4>
<pre><code class="matlab">function [NotOutliers, iOutliers] = xASL_stat_RobustMean(IM, ParameterFunction)
</code></pre>

<h4 id="description_168">Description</h4>
<p>This function detects outlier images, that can be used to create a robust average, e.g. for template or biasfield creation. This is based either on the sum-of-squares with the mean image (SoS), or on the average relative asymmetry index (AI). Images that are median+/-3 mad off are defined as outliers. MAD = median/mean absolute difference.</p>
<hr />
<h3 id="xasl_stat_shapirowilkm">xASL_stat_ShapiroWilk.m</h3>
<h4 id="function_169">Function</h4>
<pre><code class="matlab">function [H, P, W] = xASL_stat_ShapiroWilk(x, alpha)
</code></pre>

<h4 id="description_169">Description</h4>
<p>Performs the statistical test of normality - null hypothesis is that the sample is from normal distribution with unspecified mean and variance. Based on the sample kurtosis it performs either Shapiro-Wilk (for platykurtic) or Shapiro-Francia test (for leptokurtic).</p>
<hr />
<h3 id="xasl_stat_stdnanm">xASL_stat_StdNan.m</h3>
<h4 id="function_170">Function</h4>
<pre><code class="matlab">function y = xASL_stat_StdNan(varargin)
</code></pre>

<h4 id="description_170">Description</h4>
<p>It behaves in a similar way as VAR - it directly passes all arguments to xASL_stat_VarNan.</p>
<hr />
<h3 id="xasl_stat_sumnanm">xASL_stat_SumNan.m</h3>
<h4 id="function_171">Function</h4>
<pre><code class="matlab">function y = xASL_stat_SumNan(x,dim)
</code></pre>

<h4 id="description_171">Description</h4>
<p>It uses the function SUM, but it sets all the NaNs to zero before calling it.</p>
<hr />
<h3 id="xasl_stat_tcdfm">xASL_stat_tcdf.m</h3>
<h4 id="function_172">Function</h4>
<pre><code class="matlab">function F = xASL_stat_tcdf(T,nu)
</code></pre>

<h4 id="description_172">Description</h4>
<p>Calculates the cumulative distribution function of the Student's t-distribution for degrees of freedom nu at value T.</p>
<hr />
<h3 id="xasl_stat_ticdfm">xASL_stat_ticdf.m</h3>
<h4 id="function_173">Function</h4>
<pre><code class="matlab">function T = xASL_stat_ticdf(P,nu)
</code></pre>

<h4 id="description_173">Description</h4>
<p>Calculates the inverse of cumulative distribution function of the Student's t-distribution for degrees of freedom nu at value P.</p>
<hr />
<h3 id="xasl_stat_ttestm">xASL_stat_ttest.m</h3>
<h4 id="function_174">Function</h4>
<pre><code class="matlab">function [H,P,CI,stats] = xASL_stat_ttest(X,M,alpha,tail,dim)
</code></pre>

<h4 id="description_174">Description</h4>
<p>Performs a t-test that the distribution of the input data X has a mean different from 0 (or from a given mean M, or that the distributions X and Y have different means). A normal distribution of the data with an unknown variance is assumed.</p>
<hr />
<h3 id="xasl_stat_ttest2m">xASL_stat_ttest2.m</h3>
<h4 id="function_175">Function</h4>
<pre><code class="matlab">function [H,P,CI,stats] = xASL_stat_ttest2(X,Y,alpha,tail,vartype,dim)
</code></pre>

<h4 id="description_175">Description</h4>
<p>Performs a unpaired t-test that the distribution of the input data X has a mean different from that of Y.  A normal distribution of the data with an unknown variance is assumed.</p>
<hr />
<h3 id="xasl_stat_varnanm">xASL_stat_VarNan.m</h3>
<h4 id="function_176">Function</h4>
<pre><code class="matlab">function y = xASL_stat_VarNan(x,w,dim)
</code></pre>

<h4 id="description_176">Description</h4>
<p>Calculates variance of values in X while ignoring NaNs.</p>
<hr />
<h3 id="xasl_str2numm">xASL_str2num.m</h3>
<h4 id="function_177">Function</h4>
<pre><code class="matlab">function [DataOut] = xASL_str2num(DataIn)
</code></pre>

<h4 id="description_177">Description</h4>
<p>str2num wrapper, replacing 'n/a' with NaN (BIDS convention) and converting only strings to numbers. Also allows inputting cells.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Requirements/" class="btn btn-neutral float-right" title="Requirements">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../Population_Module/" class="btn btn-neutral" title="Module Population"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../Population_Module/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../Requirements/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
