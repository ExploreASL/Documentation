
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://github.com/ExploreASL/1.6.1/Functions/">
      
      <link rel="icon" href="../img/favicon/favicon-96x96.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.2">
    
    
      
        <title>Functions - ExploreASL</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6f955dcd.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ef6f36e2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#functions" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ExploreASL" class="md-header__button md-logo" aria-label="ExploreASL" data-md-component="logo">
      
  <img src="../img/favicon/brain_icon_500x500.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ExploreASL
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Functions
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/ExploreASL/Documentation/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ExploreASL" class="md-nav__button md-logo" aria-label="ExploreASL" data-md-component="logo">
      
  <img src="../img/favicon/brain_icon_500x500.png" alt="logo">

    </a>
    ExploreASL
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ExploreASL/Documentation/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Modules/" class="md-nav__link">
        Modules
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Import_Module/" class="md-nav__link">
        Module Import
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Structural_Module/" class="md-nav__link">
        Module Structural
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ASL_Module/" class="md-nav__link">
        Module ASL
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Population_Module/" class="md-nav__link">
        Module Population
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Functions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Functions
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#general-functions" class="md-nav__link">
    General Functions
  </a>
  
    <nav class="md-nav" aria-label="General Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_iterationm" class="md-nav__link">
    xASL_Iteration.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#administration" class="md-nav__link">
    Administration
  </a>
  
    <nav class="md-nav" aria-label="Administration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_adm_catchnumbersfromstringm" class="md-nav__link">
    xASL_adm_CatchNumbersFromString.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_checkfilecountm" class="md-nav__link">
    xASL_adm_CheckFileCount.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_checkpermissionsm" class="md-nav__link">
    xASL_adm_CheckPermissions.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_checkspmm" class="md-nav__link">
    xASL_adm_CheckSPM.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_cleanupbeforererunm" class="md-nav__link">
    xASL_adm_CleanUpBeforeRerun.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_comparedatasetsm" class="md-nav__link">
    xASL_adm_CompareDataSets.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_comparelistsm" class="md-nav__link">
    xASL_adm_CompareLists.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_convertdate2nrm" class="md-nav__link">
    xASL_adm_ConvertDate2Nr.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_convertnr2timem" class="md-nav__link">
    xASL_adm_ConvertNr2Time.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_convertsubjsess2subj_sessm" class="md-nav__link">
    xASL_adm_ConvertSubjSess2Subj_Sess.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_converttime2nrm" class="md-nav__link">
    xASL_adm_ConvertTime2Nr.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_copymovefilelistm" class="md-nav__link">
    xASL_adm_CopyMoveFileList.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_correctnamem" class="md-nav__link">
    xASL_adm_CorrectName.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_createfilereportm" class="md-nav__link">
    xASL_adm_CreateFileReport.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_defineaslresolutionm" class="md-nav__link">
    xASL_adm_DefineASLResolution.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_defineaslsequencem" class="md-nav__link">
    xASL_adm_DefineASLSequence.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_deletefilepairm" class="md-nav__link">
    xASL_adm_DeleteFilePair.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_dicom2parmsm" class="md-nav__link">
    xASL_adm_Dicom2Parms.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_doccrawlerm" class="md-nav__link">
    xASL_adm_DocCrawler.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_docinitializem" class="md-nav__link">
    xASL_adm_DocInitialize.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_findbyregexpm" class="md-nav__link">
    xASL_adm_FindByRegExp.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_findstrindexm" class="md-nav__link">
    xASL_adm_FindStrIndex.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_getfslistm" class="md-nav__link">
    xASL_adm_GetFsList.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_getnumfromstrm" class="md-nav__link">
    xASL_adm_GetNumFromStr.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_getphilipsscalingm" class="md-nav__link">
    xASL_adm_GetPhilipsScaling.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_getusernamem" class="md-nav__link">
    xASL_adm_GetUserName.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_hex2numm" class="md-nav__link">
    xASL_adm_Hex2Num.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_lesionreslicelistm" class="md-nav__link">
    xASL_adm_LesionResliceList.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_loadparmsm" class="md-nav__link">
    xASL_adm_LoadParms.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_loadxm" class="md-nav__link">
    xASL_adm_LoadX.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_makestandalonem" class="md-nav__link">
    xASL_adm_MakeStandalone.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_orderfieldsm" class="md-nav__link">
    xASL_adm_OrderFields.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_otherlistspmm" class="md-nav__link">
    xASL_adm_OtherListSPM.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_parreadheaderm" class="md-nav__link">
    xASL_adm_ParReadHeader.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_removelogfilesforrerunm" class="md-nav__link">
    xASL_adm_RemoveLogFilesForRerun.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_remove_1_spmm" class="md-nav__link">
    xASL_adm_Remove_1_SPM.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_replacesymbolsm" class="md-nav__link">
    xASL_adm_ReplaceSymbols.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_resetvisualizationslicesm" class="md-nav__link">
    xASL_adm_ResetVisualizationSlices.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_savexm" class="md-nav__link">
    xASL_adm_SaveX.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_unziporcopym" class="md-nav__link">
    xASL_adm_UnzipOrCopy.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_voxel2realworldcoordinatesm" class="md-nav__link">
    xASL_adm_Voxel2RealWorldCoordinates.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_zipfilelistm" class="md-nav__link">
    xASL_adm_ZipFileList.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_uigetinputm" class="md-nav__link">
    xASL_adm_uiGetInput.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bids" class="md-nav__link">
    BIDS
  </a>
  
    <nav class="md-nav" aria-label="BIDS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_bids_add2participantstsvm" class="md-nav__link">
    xASL_bids_Add2ParticipantsTSV.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_bids2legacym" class="md-nav__link">
    xASL_bids_BIDS2Legacy.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_comparestructuresm" class="md-nav__link">
    xASL_bids_CompareStructures.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_configm" class="md-nav__link">
    xASL_bids_Config.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_createdatasetdescriptiontemplatem" class="md-nav__link">
    xASL_bids_CreateDatasetDescriptionTemplate.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_dro2bidsm" class="md-nav__link">
    xASL_bids_DRO2BIDS.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_dicom2jsonm" class="md-nav__link">
    xASL_bids_Dicom2JSON.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_getphoenixprotocolm" class="md-nav__link">
    xASL_bids_GetPhoenixProtocol.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_jsoncheckm" class="md-nav__link">
    xASL_bids_JsonCheck.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_mergeniftim" class="md-nav__link">
    xASL_bids_MergeNifti.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_mergenifti_deletem" class="md-nav__link">
    xASL_bids_MergeNifti_Delete.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_mergenifti_mergem" class="md-nav__link">
    xASL_bids_MergeNifti_Merge.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_mergenifti_renameparmsm" class="md-nav__link">
    xASL_bids_MergeNifti_RenameParms.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_mergenifti_siemensaslfilesm" class="md-nav__link">
    xASL_bids_MergeNifti_SiemensASLFiles.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_par2jsonm" class="md-nav__link">
    xASL_bids_Par2JSON.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_phoenixprotocolanalyzerm" class="md-nav__link">
    xASL_bids_PhoenixProtocolAnalyzer.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_phoenixprotocolreaderm" class="md-nav__link">
    xASL_bids_PhoenixProtocolReader.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_vendorfieldcheckm" class="md-nav__link">
    xASL_bids_VendorFieldCheck.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_determineimagetypegem" class="md-nav__link">
    xASL_bids_determineImageTypeGE.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_parms2bidsm" class="md-nav__link">
    xASL_bids_parms2BIDS.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_parsem0m" class="md-nav__link">
    xASL_bids_parseM0.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fsl" class="md-nav__link">
    FSL
  </a>
  
    <nav class="md-nav" aria-label="FSL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_fsl_runfslm" class="md-nav__link">
    xASL_fsl_RunFSL.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_fsl_setfsldirm" class="md-nav__link">
    xASL_fsl_SetFSLdir.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_fsl_topupm" class="md-nav__link">
    xASL_fsl_TopUp.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#imaging" class="md-nav__link">
    Imaging
  </a>
  
    <nav class="md-nav" aria-label="Imaging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_im_bilateralfilterm" class="md-nav__link">
    xASL_im_BilateralFilter.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_centerofmassm" class="md-nav__link">
    xASL_im_CenterOfMass.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_cleanupwmhnoisem" class="md-nav__link">
    xASL_im_CleanupWMHnoise.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_clipextremesm" class="md-nav__link">
    xASL_im_ClipExtremes.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_column2imm" class="md-nav__link">
    xASL_im_Column2IM.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_compareniftiresolutionxyzm" class="md-nav__link">
    xASL_im_CompareNIfTIResolutionXYZ.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_computedicem" class="md-nav__link">
    xASL_im_ComputeDice.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_createasldeformationfieldm" class="md-nav__link">
    xASL_im_CreateASLDeformationField.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_createpseudocbfm" class="md-nav__link">
    xASL_im_CreatePseudoCBF.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_createslicegradientm" class="md-nav__link">
    xASL_im_CreateSliceGradient.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_decomposeaffinetransformationm" class="md-nav__link">
    xASL_im_DecomposeAffineTransformation.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_determineflipm" class="md-nav__link">
    xASL_im_DetermineFlip.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_dilateerodefullm" class="md-nav__link">
    xASL_im_DilateErodeFull.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_dilateerodeseparablem" class="md-nav__link">
    xASL_im_DilateErodeSeparable.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_dilateerodespherem" class="md-nav__link">
    xASL_im_DilateErodeSphere.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_dummyorientationniftim" class="md-nav__link">
    xASL_im_DummyOrientationNIfTI.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_estimateresolutionm" class="md-nav__link">
    xASL_im_EstimateResolution.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_flipm" class="md-nav__link">
    xASL_im_Flip.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_hausdorffdistm" class="md-nav__link">
    xASL_im_HausdorffDist.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_im2columnm" class="md-nav__link">
    xASL_im_IM2Column.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_jointhistm" class="md-nav__link">
    xASL_im_JointHist.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_lesion2catm" class="md-nav__link">
    xASL_im_Lesion2CAT.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_lesion2maskm" class="md-nav__link">
    xASL_im_Lesion2Mask.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_m0erodesmoothextrapolatem" class="md-nav__link">
    xASL_im_M0ErodeSmoothExtrapolate.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_masknegativevascularsignalm" class="md-nav__link">
    xASL_im_MaskNegativeVascularSignal.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_maskpeakvascularsignalm" class="md-nav__link">
    xASL_im_MaskPeakVascularSignal.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_modulationm" class="md-nav__link">
    xASL_im_Modulation.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_normalizelabelingterritoriesm" class="md-nav__link">
    xASL_im_NormalizeLabelingTerritories.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_pcam" class="md-nav__link">
    xASL_im_PCA.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_pvcbsplinem" class="md-nav__link">
    xASL_im_PVCbspline.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_pvckernelm" class="md-nav__link">
    xASL_im_PVCkernel.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_presmoothm" class="md-nav__link">
    xASL_im_PreSmooth.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_processm0conventionalm" class="md-nav__link">
    xASL_im_ProcessM0Conventional.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_projectlabelsoverdatam" class="md-nav__link">
    xASL_im_ProjectLabelsOverData.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_replacelabelm" class="md-nav__link">
    xASL_im_ReplaceLabel.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_resamplelinearfairm" class="md-nav__link">
    xASL_im_ResampleLinearFair.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_restoreorientationm" class="md-nav__link">
    xASL_im_RestoreOrientation.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_skullstripm" class="md-nav__link">
    xASL_im_SkullStrip.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_smooth3dm" class="md-nav__link">
    xASL_im_Smooth3D.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_splitimagelabelsm" class="md-nav__link">
    xASL_im_SplitImageLabels.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_upsamplem" class="md-nav__link">
    xASL_im_Upsample.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_zeroedgesm" class="md-nav__link">
    xASL_im_ZeroEdges.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_dilateroim" class="md-nav__link">
    xASL_im_dilateROI.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_rotatem" class="md-nav__link">
    xASL_im_rotate.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initialization" class="md-nav__link">
    Initialization
  </a>
  
    <nav class="md-nav" aria-label="Initialization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_init_defaulteffectiveresolutionm" class="md-nav__link">
    xASL_init_DefaultEffectiveResolution.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_init_definestudydatam" class="md-nav__link">
    xASL_init_DefineStudyData.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_init_filesystemm" class="md-nav__link">
    xASL_init_FileSystem.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_init_initializemutexm" class="md-nav__link">
    xASL_init_InitializeMutex.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_init_loadmetadatam" class="md-nav__link">
    xASL_init_LoadMetadata.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_init_longitudinalregistrationm" class="md-nav__link">
    xASL_init_LongitudinalRegistration.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_init_visualizationsettingsm" class="md-nav__link">
    xASL_init_VisualizationSettings.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-and-output" class="md-nav__link">
    Input and Output
  </a>
  
    <nav class="md-nav" aria-label="Input and Output">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_io_createniftim" class="md-nav__link">
    xASL_io_CreateNifti.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_io_dcmtkreadm" class="md-nav__link">
    xASL_io_DcmtkRead.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_io_exportvtkm" class="md-nav__link">
    xASL_io_ExportVTK.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_io_makenifti4dicomm" class="md-nav__link">
    xASL_io_MakeNifti4DICOM.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_io_pairwisesubtractionm" class="md-nav__link">
    xASL_io_PairwiseSubtraction.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_io_readdataparm" class="md-nav__link">
    xASL_io_ReadDataPar.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_io_readthedicomm" class="md-nav__link">
    xASL_io_ReadTheDicom.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_io_splitaslm" class="md-nav__link">
    xASL_io_SplitASL.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_io_dcm2niim" class="md-nav__link">
    xASL_io_dcm2nii.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_num2strm" class="md-nav__link">
    xASL_num2str.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#qc" class="md-nav__link">
    QC
  </a>
  
    <nav class="md-nav" aria-label="QC">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_qc_asymmetryindexm" class="md-nav__link">
    xASL_qc_AsymmetryIndex.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_cat12_iqrm" class="md-nav__link">
    xASL_qc_CAT12_IQR.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_collectparametersm" class="md-nav__link">
    xASL_qc_CollectParameters.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_collectqc_aslm" class="md-nav__link">
    xASL_qc_CollectQC_ASL.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_collectqc_structuralm" class="md-nav__link">
    xASL_qc_CollectQC_Structural.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_collectqc_funcm" class="md-nav__link">
    xASL_qc_CollectQC_func.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_collectsoftwareversionsm" class="md-nav__link">
    xASL_qc_CollectSoftwareVersions.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_comparetemplatem" class="md-nav__link">
    xASL_qc_CompareTemplate.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_computefovcoveragem" class="md-nav__link">
    xASL_qc_ComputeFoVCoverage.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_computeniftiorientationm" class="md-nav__link">
    xASL_qc_ComputeNiftiOrientation.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_createpdfm" class="md-nav__link">
    xASL_qc_CreatePDF.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_fa_outliersm" class="md-nav__link">
    xASL_qc_FA_Outliers.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_obtainqccategoriesfromjpgm" class="md-nav__link">
    xASL_qc_ObtainQCCategoriesFromJPG.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_pcpstructuralm" class="md-nav__link">
    xASL_qc_PCPStructural.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_printorientationm" class="md-nav__link">
    xASL_qc_PrintOrientation.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_tanimotocoeffm" class="md-nav__link">
    xASL_qc_TanimotoCoeff.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_wadqcdcm" class="md-nav__link">
    xASL_qc_WADQCDC.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_wadqc_generatedescriptorm" class="md-nav__link">
    xASL_qc_WADQC_GenerateDescriptor.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_temporalsnrm" class="md-nav__link">
    xASL_qc_temporalSNR.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantization" class="md-nav__link">
    Quantization
  </a>
  
    <nav class="md-nav" aria-label="Quantization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_quant_agesex2hctm" class="md-nav__link">
    xASL_quant_AgeSex2Hct.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_quant_bsupcalculationm" class="md-nav__link">
    xASL_quant_BSupCalculation.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_quant_basilm" class="md-nav__link">
    xASL_quant_Basil.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_quant_feastm" class="md-nav__link">
    xASL_quant_FEAST.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_quant_getcontrollabelorderm" class="md-nav__link">
    xASL_quant_GetControlLabelOrder.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_quant_hct2bloodt1m" class="md-nav__link">
    xASL_quant_Hct2BloodT1.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_quant_m0m" class="md-nav__link">
    xASL_quant_M0.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_quant_singlepldm" class="md-nav__link">
    xASL_quant_SinglePLD.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_quant_slicetimingm" class="md-nav__link">
    xASL_quant_SliceTiming.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_quant_slicetiming_shortesttrm" class="md-nav__link">
    xASL_quant_SliceTiming_ShortestTR.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spm" class="md-nav__link">
    SPM
  </a>
  
    <nav class="md-nav" aria-label="SPM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_spm_biasfieldcorrectionm" class="md-nav__link">
    xASL_spm_BiasfieldCorrection.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_spm_affinem" class="md-nav__link">
    xASL_spm_affine.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_spm_coregm" class="md-nav__link">
    xASL_spm_coreg.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_spm_defacem" class="md-nav__link">
    xASL_spm_deface.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_spm_deformationsm" class="md-nav__link">
    xASL_spm_deformations.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#statistics" class="md-nav__link">
    Statistics
  </a>
  
    <nav class="md-nav" aria-label="Statistics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_stat_atlasforstatsm" class="md-nav__link">
    xASL_stat_AtlasForStats.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_computediffercovm" class="md-nav__link">
    xASL_stat_ComputeDifferCoV.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_computemeanm" class="md-nav__link">
    xASL_stat_ComputeMean.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_computespatialcovm" class="md-nav__link">
    xASL_stat_ComputeSpatialCoV.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_equalvariancestestm" class="md-nav__link">
    xASL_stat_EqualVariancesTest.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_getroistatisticsm" class="md-nav__link">
    xASL_stat_GetROIstatistics.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_madnanm" class="md-nav__link">
    xASL_stat_MadNan.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_meanssimm" class="md-nav__link">
    xASL_stat_MeanSSIM.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_multiplelinregm" class="md-nav__link">
    xASL_stat_MultipleLinReg.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_psnrm" class="md-nav__link">
    xASL_stat_PSNR.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_pairwisedicem" class="md-nav__link">
    xASL_stat_PairwiseDice.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_printstatsm" class="md-nav__link">
    xASL_stat_PrintStats.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_quantilenanm" class="md-nav__link">
    xASL_stat_QuantileNan.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_robustmeanm" class="md-nav__link">
    xASL_stat_RobustMean.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_shapirowilkm" class="md-nav__link">
    xASL_stat_ShapiroWilk.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_stdnanm" class="md-nav__link">
    xASL_stat_StdNan.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_sumnanm" class="md-nav__link">
    xASL_stat_SumNan.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_uniquepairwisepermutationsm" class="md-nav__link">
    xASL_stat_UniquePairwisePermutations.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_varnanm" class="md-nav__link">
    xASL_stat_VarNan.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_fcdfm" class="md-nav__link">
    xASL_stat_fcdf.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_tcdfm" class="md-nav__link">
    xASL_stat_tcdf.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_ticdfm" class="md-nav__link">
    xASL_stat_ticdf.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_ttestm" class="md-nav__link">
    xASL_stat_ttest.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_ttest2m" class="md-nav__link">
    xASL_stat_ttest2.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_str2numm" class="md-nav__link">
    xASL_str2num.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_test_bidsconversionm" class="md-nav__link">
    xASL_test_BIDSConversion.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_test_bidsflavorsfullm" class="md-nav__link">
    xASL_test_BIDSFlavorsFull.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_test_getlogcontentm" class="md-nav__link">
    xASL_test_GetLogContent.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualization" class="md-nav__link">
    Visualization
  </a>
  
    <nav class="md-nav" aria-label="Visualization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_vis_addim2qcm" class="md-nav__link">
    xASL_vis_AddIM2QC.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_vis_createvisualfigm" class="md-nav__link">
    xASL_vis_CreateVisualFig.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_vis_cropparmsacquirem" class="md-nav__link">
    xASL_vis_CropParmsAcquire.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_vis_cropparmsapplym" class="md-nav__link">
    xASL_vis_CropParmsApply.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_vis_imwritem" class="md-nav__link">
    xASL_vis_Imwrite.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_vis_overlapt1_aslm" class="md-nav__link">
    xASL_vis_OverlapT1_ASL.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_vis_tileimagesm" class="md-nav__link">
    xASL_vis_TileImages.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_vis_transformdata2viewm" class="md-nav__link">
    xASL_vis_TransformData2View.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_vis_visualqc_topupm" class="md-nav__link">
    xASL_vis_VisualQC_TopUp.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_vis_visualizeroism" class="md-nav__link">
    xASL_vis_VisualizeROIs.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_wrp_linearreg_others2t1wm" class="md-nav__link">
    xASL_wrp_LinearReg_Others2T1w.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../SPMxASL/" class="md-nav__link">
        SPM xASL Functions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Tutorials-ASL-BIDS/" class="md-nav__link">
        Tutorials (ASL-BIDS)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Tutorials-Basics/" class="md-nav__link">
        Tutorials (Basics)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Tutorials-QC/" class="md-nav__link">
        Tutorials (QC)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Tutorials-Advanced/" class="md-nav__link">
        Tutorials (Advanced)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../FAQ/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Requirements/" class="md-nav__link">
        Requirements
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../License/" class="md-nav__link">
        License
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../About/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#general-functions" class="md-nav__link">
    General Functions
  </a>
  
    <nav class="md-nav" aria-label="General Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_iterationm" class="md-nav__link">
    xASL_Iteration.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#administration" class="md-nav__link">
    Administration
  </a>
  
    <nav class="md-nav" aria-label="Administration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_adm_catchnumbersfromstringm" class="md-nav__link">
    xASL_adm_CatchNumbersFromString.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_checkfilecountm" class="md-nav__link">
    xASL_adm_CheckFileCount.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_checkpermissionsm" class="md-nav__link">
    xASL_adm_CheckPermissions.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_checkspmm" class="md-nav__link">
    xASL_adm_CheckSPM.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_cleanupbeforererunm" class="md-nav__link">
    xASL_adm_CleanUpBeforeRerun.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_comparedatasetsm" class="md-nav__link">
    xASL_adm_CompareDataSets.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_comparelistsm" class="md-nav__link">
    xASL_adm_CompareLists.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_convertdate2nrm" class="md-nav__link">
    xASL_adm_ConvertDate2Nr.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_convertnr2timem" class="md-nav__link">
    xASL_adm_ConvertNr2Time.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_convertsubjsess2subj_sessm" class="md-nav__link">
    xASL_adm_ConvertSubjSess2Subj_Sess.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_converttime2nrm" class="md-nav__link">
    xASL_adm_ConvertTime2Nr.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_copymovefilelistm" class="md-nav__link">
    xASL_adm_CopyMoveFileList.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_correctnamem" class="md-nav__link">
    xASL_adm_CorrectName.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_createfilereportm" class="md-nav__link">
    xASL_adm_CreateFileReport.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_defineaslresolutionm" class="md-nav__link">
    xASL_adm_DefineASLResolution.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_defineaslsequencem" class="md-nav__link">
    xASL_adm_DefineASLSequence.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_deletefilepairm" class="md-nav__link">
    xASL_adm_DeleteFilePair.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_dicom2parmsm" class="md-nav__link">
    xASL_adm_Dicom2Parms.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_doccrawlerm" class="md-nav__link">
    xASL_adm_DocCrawler.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_docinitializem" class="md-nav__link">
    xASL_adm_DocInitialize.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_findbyregexpm" class="md-nav__link">
    xASL_adm_FindByRegExp.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_findstrindexm" class="md-nav__link">
    xASL_adm_FindStrIndex.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_getfslistm" class="md-nav__link">
    xASL_adm_GetFsList.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_getnumfromstrm" class="md-nav__link">
    xASL_adm_GetNumFromStr.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_getphilipsscalingm" class="md-nav__link">
    xASL_adm_GetPhilipsScaling.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_getusernamem" class="md-nav__link">
    xASL_adm_GetUserName.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_hex2numm" class="md-nav__link">
    xASL_adm_Hex2Num.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_lesionreslicelistm" class="md-nav__link">
    xASL_adm_LesionResliceList.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_loadparmsm" class="md-nav__link">
    xASL_adm_LoadParms.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_loadxm" class="md-nav__link">
    xASL_adm_LoadX.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_makestandalonem" class="md-nav__link">
    xASL_adm_MakeStandalone.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_orderfieldsm" class="md-nav__link">
    xASL_adm_OrderFields.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_otherlistspmm" class="md-nav__link">
    xASL_adm_OtherListSPM.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_parreadheaderm" class="md-nav__link">
    xASL_adm_ParReadHeader.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_removelogfilesforrerunm" class="md-nav__link">
    xASL_adm_RemoveLogFilesForRerun.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_remove_1_spmm" class="md-nav__link">
    xASL_adm_Remove_1_SPM.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_replacesymbolsm" class="md-nav__link">
    xASL_adm_ReplaceSymbols.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_resetvisualizationslicesm" class="md-nav__link">
    xASL_adm_ResetVisualizationSlices.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_savexm" class="md-nav__link">
    xASL_adm_SaveX.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_unziporcopym" class="md-nav__link">
    xASL_adm_UnzipOrCopy.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_voxel2realworldcoordinatesm" class="md-nav__link">
    xASL_adm_Voxel2RealWorldCoordinates.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_zipfilelistm" class="md-nav__link">
    xASL_adm_ZipFileList.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_adm_uigetinputm" class="md-nav__link">
    xASL_adm_uiGetInput.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bids" class="md-nav__link">
    BIDS
  </a>
  
    <nav class="md-nav" aria-label="BIDS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_bids_add2participantstsvm" class="md-nav__link">
    xASL_bids_Add2ParticipantsTSV.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_bids2legacym" class="md-nav__link">
    xASL_bids_BIDS2Legacy.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_comparestructuresm" class="md-nav__link">
    xASL_bids_CompareStructures.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_configm" class="md-nav__link">
    xASL_bids_Config.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_createdatasetdescriptiontemplatem" class="md-nav__link">
    xASL_bids_CreateDatasetDescriptionTemplate.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_dro2bidsm" class="md-nav__link">
    xASL_bids_DRO2BIDS.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_dicom2jsonm" class="md-nav__link">
    xASL_bids_Dicom2JSON.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_getphoenixprotocolm" class="md-nav__link">
    xASL_bids_GetPhoenixProtocol.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_jsoncheckm" class="md-nav__link">
    xASL_bids_JsonCheck.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_mergeniftim" class="md-nav__link">
    xASL_bids_MergeNifti.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_mergenifti_deletem" class="md-nav__link">
    xASL_bids_MergeNifti_Delete.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_mergenifti_mergem" class="md-nav__link">
    xASL_bids_MergeNifti_Merge.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_mergenifti_renameparmsm" class="md-nav__link">
    xASL_bids_MergeNifti_RenameParms.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_mergenifti_siemensaslfilesm" class="md-nav__link">
    xASL_bids_MergeNifti_SiemensASLFiles.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_par2jsonm" class="md-nav__link">
    xASL_bids_Par2JSON.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_phoenixprotocolanalyzerm" class="md-nav__link">
    xASL_bids_PhoenixProtocolAnalyzer.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_phoenixprotocolreaderm" class="md-nav__link">
    xASL_bids_PhoenixProtocolReader.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_vendorfieldcheckm" class="md-nav__link">
    xASL_bids_VendorFieldCheck.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_determineimagetypegem" class="md-nav__link">
    xASL_bids_determineImageTypeGE.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_parms2bidsm" class="md-nav__link">
    xASL_bids_parms2BIDS.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_bids_parsem0m" class="md-nav__link">
    xASL_bids_parseM0.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fsl" class="md-nav__link">
    FSL
  </a>
  
    <nav class="md-nav" aria-label="FSL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_fsl_runfslm" class="md-nav__link">
    xASL_fsl_RunFSL.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_fsl_setfsldirm" class="md-nav__link">
    xASL_fsl_SetFSLdir.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_fsl_topupm" class="md-nav__link">
    xASL_fsl_TopUp.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#imaging" class="md-nav__link">
    Imaging
  </a>
  
    <nav class="md-nav" aria-label="Imaging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_im_bilateralfilterm" class="md-nav__link">
    xASL_im_BilateralFilter.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_centerofmassm" class="md-nav__link">
    xASL_im_CenterOfMass.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_cleanupwmhnoisem" class="md-nav__link">
    xASL_im_CleanupWMHnoise.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_clipextremesm" class="md-nav__link">
    xASL_im_ClipExtremes.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_column2imm" class="md-nav__link">
    xASL_im_Column2IM.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_compareniftiresolutionxyzm" class="md-nav__link">
    xASL_im_CompareNIfTIResolutionXYZ.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_computedicem" class="md-nav__link">
    xASL_im_ComputeDice.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_createasldeformationfieldm" class="md-nav__link">
    xASL_im_CreateASLDeformationField.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_createpseudocbfm" class="md-nav__link">
    xASL_im_CreatePseudoCBF.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_createslicegradientm" class="md-nav__link">
    xASL_im_CreateSliceGradient.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_decomposeaffinetransformationm" class="md-nav__link">
    xASL_im_DecomposeAffineTransformation.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_determineflipm" class="md-nav__link">
    xASL_im_DetermineFlip.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_dilateerodefullm" class="md-nav__link">
    xASL_im_DilateErodeFull.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_dilateerodeseparablem" class="md-nav__link">
    xASL_im_DilateErodeSeparable.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_dilateerodespherem" class="md-nav__link">
    xASL_im_DilateErodeSphere.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_dummyorientationniftim" class="md-nav__link">
    xASL_im_DummyOrientationNIfTI.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_estimateresolutionm" class="md-nav__link">
    xASL_im_EstimateResolution.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_flipm" class="md-nav__link">
    xASL_im_Flip.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_hausdorffdistm" class="md-nav__link">
    xASL_im_HausdorffDist.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_im2columnm" class="md-nav__link">
    xASL_im_IM2Column.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_jointhistm" class="md-nav__link">
    xASL_im_JointHist.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_lesion2catm" class="md-nav__link">
    xASL_im_Lesion2CAT.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_lesion2maskm" class="md-nav__link">
    xASL_im_Lesion2Mask.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_m0erodesmoothextrapolatem" class="md-nav__link">
    xASL_im_M0ErodeSmoothExtrapolate.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_masknegativevascularsignalm" class="md-nav__link">
    xASL_im_MaskNegativeVascularSignal.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_maskpeakvascularsignalm" class="md-nav__link">
    xASL_im_MaskPeakVascularSignal.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_modulationm" class="md-nav__link">
    xASL_im_Modulation.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_normalizelabelingterritoriesm" class="md-nav__link">
    xASL_im_NormalizeLabelingTerritories.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_pcam" class="md-nav__link">
    xASL_im_PCA.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_pvcbsplinem" class="md-nav__link">
    xASL_im_PVCbspline.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_pvckernelm" class="md-nav__link">
    xASL_im_PVCkernel.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_presmoothm" class="md-nav__link">
    xASL_im_PreSmooth.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_processm0conventionalm" class="md-nav__link">
    xASL_im_ProcessM0Conventional.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_projectlabelsoverdatam" class="md-nav__link">
    xASL_im_ProjectLabelsOverData.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_replacelabelm" class="md-nav__link">
    xASL_im_ReplaceLabel.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_resamplelinearfairm" class="md-nav__link">
    xASL_im_ResampleLinearFair.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_restoreorientationm" class="md-nav__link">
    xASL_im_RestoreOrientation.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_skullstripm" class="md-nav__link">
    xASL_im_SkullStrip.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_smooth3dm" class="md-nav__link">
    xASL_im_Smooth3D.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_splitimagelabelsm" class="md-nav__link">
    xASL_im_SplitImageLabels.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_upsamplem" class="md-nav__link">
    xASL_im_Upsample.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_zeroedgesm" class="md-nav__link">
    xASL_im_ZeroEdges.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_dilateroim" class="md-nav__link">
    xASL_im_dilateROI.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_im_rotatem" class="md-nav__link">
    xASL_im_rotate.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initialization" class="md-nav__link">
    Initialization
  </a>
  
    <nav class="md-nav" aria-label="Initialization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_init_defaulteffectiveresolutionm" class="md-nav__link">
    xASL_init_DefaultEffectiveResolution.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_init_definestudydatam" class="md-nav__link">
    xASL_init_DefineStudyData.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_init_filesystemm" class="md-nav__link">
    xASL_init_FileSystem.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_init_initializemutexm" class="md-nav__link">
    xASL_init_InitializeMutex.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_init_loadmetadatam" class="md-nav__link">
    xASL_init_LoadMetadata.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_init_longitudinalregistrationm" class="md-nav__link">
    xASL_init_LongitudinalRegistration.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_init_visualizationsettingsm" class="md-nav__link">
    xASL_init_VisualizationSettings.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-and-output" class="md-nav__link">
    Input and Output
  </a>
  
    <nav class="md-nav" aria-label="Input and Output">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_io_createniftim" class="md-nav__link">
    xASL_io_CreateNifti.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_io_dcmtkreadm" class="md-nav__link">
    xASL_io_DcmtkRead.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_io_exportvtkm" class="md-nav__link">
    xASL_io_ExportVTK.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_io_makenifti4dicomm" class="md-nav__link">
    xASL_io_MakeNifti4DICOM.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_io_pairwisesubtractionm" class="md-nav__link">
    xASL_io_PairwiseSubtraction.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_io_readdataparm" class="md-nav__link">
    xASL_io_ReadDataPar.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_io_readthedicomm" class="md-nav__link">
    xASL_io_ReadTheDicom.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_io_splitaslm" class="md-nav__link">
    xASL_io_SplitASL.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_io_dcm2niim" class="md-nav__link">
    xASL_io_dcm2nii.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_num2strm" class="md-nav__link">
    xASL_num2str.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#qc" class="md-nav__link">
    QC
  </a>
  
    <nav class="md-nav" aria-label="QC">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_qc_asymmetryindexm" class="md-nav__link">
    xASL_qc_AsymmetryIndex.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_cat12_iqrm" class="md-nav__link">
    xASL_qc_CAT12_IQR.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_collectparametersm" class="md-nav__link">
    xASL_qc_CollectParameters.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_collectqc_aslm" class="md-nav__link">
    xASL_qc_CollectQC_ASL.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_collectqc_structuralm" class="md-nav__link">
    xASL_qc_CollectQC_Structural.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_collectqc_funcm" class="md-nav__link">
    xASL_qc_CollectQC_func.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_collectsoftwareversionsm" class="md-nav__link">
    xASL_qc_CollectSoftwareVersions.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_comparetemplatem" class="md-nav__link">
    xASL_qc_CompareTemplate.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_computefovcoveragem" class="md-nav__link">
    xASL_qc_ComputeFoVCoverage.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_computeniftiorientationm" class="md-nav__link">
    xASL_qc_ComputeNiftiOrientation.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_createpdfm" class="md-nav__link">
    xASL_qc_CreatePDF.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_fa_outliersm" class="md-nav__link">
    xASL_qc_FA_Outliers.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_obtainqccategoriesfromjpgm" class="md-nav__link">
    xASL_qc_ObtainQCCategoriesFromJPG.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_pcpstructuralm" class="md-nav__link">
    xASL_qc_PCPStructural.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_printorientationm" class="md-nav__link">
    xASL_qc_PrintOrientation.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_tanimotocoeffm" class="md-nav__link">
    xASL_qc_TanimotoCoeff.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_wadqcdcm" class="md-nav__link">
    xASL_qc_WADQCDC.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_wadqc_generatedescriptorm" class="md-nav__link">
    xASL_qc_WADQC_GenerateDescriptor.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_qc_temporalsnrm" class="md-nav__link">
    xASL_qc_temporalSNR.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantization" class="md-nav__link">
    Quantization
  </a>
  
    <nav class="md-nav" aria-label="Quantization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_quant_agesex2hctm" class="md-nav__link">
    xASL_quant_AgeSex2Hct.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_quant_bsupcalculationm" class="md-nav__link">
    xASL_quant_BSupCalculation.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_quant_basilm" class="md-nav__link">
    xASL_quant_Basil.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_quant_feastm" class="md-nav__link">
    xASL_quant_FEAST.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_quant_getcontrollabelorderm" class="md-nav__link">
    xASL_quant_GetControlLabelOrder.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_quant_hct2bloodt1m" class="md-nav__link">
    xASL_quant_Hct2BloodT1.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_quant_m0m" class="md-nav__link">
    xASL_quant_M0.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_quant_singlepldm" class="md-nav__link">
    xASL_quant_SinglePLD.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_quant_slicetimingm" class="md-nav__link">
    xASL_quant_SliceTiming.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_quant_slicetiming_shortesttrm" class="md-nav__link">
    xASL_quant_SliceTiming_ShortestTR.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spm" class="md-nav__link">
    SPM
  </a>
  
    <nav class="md-nav" aria-label="SPM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_spm_biasfieldcorrectionm" class="md-nav__link">
    xASL_spm_BiasfieldCorrection.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_spm_affinem" class="md-nav__link">
    xASL_spm_affine.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_spm_coregm" class="md-nav__link">
    xASL_spm_coreg.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_spm_defacem" class="md-nav__link">
    xASL_spm_deface.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_spm_deformationsm" class="md-nav__link">
    xASL_spm_deformations.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#statistics" class="md-nav__link">
    Statistics
  </a>
  
    <nav class="md-nav" aria-label="Statistics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_stat_atlasforstatsm" class="md-nav__link">
    xASL_stat_AtlasForStats.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_computediffercovm" class="md-nav__link">
    xASL_stat_ComputeDifferCoV.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_computemeanm" class="md-nav__link">
    xASL_stat_ComputeMean.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_computespatialcovm" class="md-nav__link">
    xASL_stat_ComputeSpatialCoV.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_equalvariancestestm" class="md-nav__link">
    xASL_stat_EqualVariancesTest.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_getroistatisticsm" class="md-nav__link">
    xASL_stat_GetROIstatistics.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_madnanm" class="md-nav__link">
    xASL_stat_MadNan.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_meanssimm" class="md-nav__link">
    xASL_stat_MeanSSIM.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_multiplelinregm" class="md-nav__link">
    xASL_stat_MultipleLinReg.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_psnrm" class="md-nav__link">
    xASL_stat_PSNR.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_pairwisedicem" class="md-nav__link">
    xASL_stat_PairwiseDice.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_printstatsm" class="md-nav__link">
    xASL_stat_PrintStats.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_quantilenanm" class="md-nav__link">
    xASL_stat_QuantileNan.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_robustmeanm" class="md-nav__link">
    xASL_stat_RobustMean.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_shapirowilkm" class="md-nav__link">
    xASL_stat_ShapiroWilk.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_stdnanm" class="md-nav__link">
    xASL_stat_StdNan.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_sumnanm" class="md-nav__link">
    xASL_stat_SumNan.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_uniquepairwisepermutationsm" class="md-nav__link">
    xASL_stat_UniquePairwisePermutations.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_varnanm" class="md-nav__link">
    xASL_stat_VarNan.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_fcdfm" class="md-nav__link">
    xASL_stat_fcdf.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_tcdfm" class="md-nav__link">
    xASL_stat_tcdf.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_ticdfm" class="md-nav__link">
    xASL_stat_ticdf.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_ttestm" class="md-nav__link">
    xASL_stat_ttest.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_stat_ttest2m" class="md-nav__link">
    xASL_stat_ttest2.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_str2numm" class="md-nav__link">
    xASL_str2num.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_test_bidsconversionm" class="md-nav__link">
    xASL_test_BIDSConversion.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_test_bidsflavorsfullm" class="md-nav__link">
    xASL_test_BIDSFlavorsFull.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_test_getlogcontentm" class="md-nav__link">
    xASL_test_GetLogContent.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualization" class="md-nav__link">
    Visualization
  </a>
  
    <nav class="md-nav" aria-label="Visualization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xasl_vis_addim2qcm" class="md-nav__link">
    xASL_vis_AddIM2QC.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_vis_createvisualfigm" class="md-nav__link">
    xASL_vis_CreateVisualFig.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_vis_cropparmsacquirem" class="md-nav__link">
    xASL_vis_CropParmsAcquire.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_vis_cropparmsapplym" class="md-nav__link">
    xASL_vis_CropParmsApply.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_vis_imwritem" class="md-nav__link">
    xASL_vis_Imwrite.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_vis_overlapt1_aslm" class="md-nav__link">
    xASL_vis_OverlapT1_ASL.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_vis_tileimagesm" class="md-nav__link">
    xASL_vis_TileImages.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_vis_transformdata2viewm" class="md-nav__link">
    xASL_vis_TransformData2View.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_vis_visualqc_topupm" class="md-nav__link">
    xASL_vis_VisualQC_TopUp.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_vis_visualizeroism" class="md-nav__link">
    xASL_vis_VisualizeROIs.m
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xasl_wrp_linearreg_others2t1wm" class="md-nav__link">
    xASL_wrp_LinearReg_Others2T1w.m
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ExploreASL/Documentation/edit/master/docs/Functions.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="functions">Functions</h1>
<hr />
<h2 id="general-functions">General Functions</h2>
<hr />
<h3 id="xasl_iterationm">xASL_Iteration.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[bAborted, xOut] = xASL_Iteration(x, moduleName[, dryRun, stopAfterErrors])
</code></pre>

<p><strong>Description:</strong></p>
<p>Parses the settings and runs the DatabaseLoop sub-function.</p>
<h2 id="administration">Administration</h2>
<hr />
<h3 id="xasl_adm_catchnumbersfromstringm">xASL_adm_CatchNumbersFromString.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[OutputNumber] = xASL_adm_CatchNumbersFromString(InputString)
</code></pre>

<p><strong>Description:</strong></p>
<p>Extracts a number from a char array.</p>
<hr />
<h3 id="xasl_adm_checkfilecountm">xASL_adm_CheckFileCount.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[result, files] = xASL_adm_CheckFileCount(path, expr[, mincount, failifmissing])
[result]        = xASL_adm_CheckFileCount(...)
</code></pre>

<p><strong>Description:</strong></p>
<p>Checks the given <strong>PATH</strong> for files corresponding to the <strong>SPM_SELECT</strong> regular expression <strong>EXPR</strong>.
Returns if the number of files is equal to or higher than <strong>MINCOUNT</strong>. If <strong>FAILIFMISSING</strong> is true
and not enough files, then throw and error. If everything goes ok and second output argument is specified
then return also the list of files.</p>
<hr />
<h3 id="xasl_adm_checkpermissionsm">xASL_adm_CheckPermissions.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[FilesList, FilesExeList, FoldersList] = xASL_adm_CheckPermissions(InputPath[, FilesExecutable])
</code></pre>

<p><strong>Description:</strong></p>
<p>This function does a recursive search through the root
folder &amp; makes a list of the attributes of all files and folders.
It tries to reset the attributes to what we desire, which is by default:</p>
<ul>
<li>664 for files (meaning only reading &amp; writing for users &amp; group, &amp; read-only for others)</li>
<li>775 for folders (meaning reading, writing &amp; opening for current user &amp; current group, &amp; for others only reading &amp; opening)</li>
</ul>
<p>For executable files we also want 775.
Note that the permission to 'execute a folder' means opening them.</p>
<ul>
<li>DataOK checks data permissions.</li>
<li>ExeOK checks executable permissions.</li>
<li>DataOK also includes executable permissions for folders.</li>
<li>This runs recursively (but currently skips the contents of the root-folder) .</li>
</ul>
<hr />
<h3 id="xasl_adm_checkspmm">xASL_adm_CheckSPM.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[spm_path, spm_version] = xASL_adm_CheckSPM([modality, proposed_spm_path, check_mode])
[spm_path]              = xASL_adm_CheckSPM(...)
xASL_adm_CheckSPM(...)
</code></pre>

<p><strong>Description:</strong></p>
<p>Checks if the spm function exists and if the reported version matches our development
version (<strong>SPM8</strong> or <strong>SPM12</strong>). If the spm toolbox is not available yet, it will try the
<strong>PROPOSED_SPM_PATH</strong> (if specified) or the user selected directory and add it to <strong>PATH</strong>.
The function will fail if <strong>SPM</strong> cannot be found or if detecting an unsupported version.</p>
<hr />
<h3 id="xasl_adm_cleanupbeforererunm">xASL_adm_CleanUpBeforeRerun.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_adm_CleanupBeforeCompleteRerun(AnalysisDir, iModule, bRemoveWMH, bAllSubjects, SubjectID)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function (partly) reverts previous ExploreASL runs,
deleting derivatives, while keeping raw data intact.
if bAllSubjects==true, then all subjects and all module
derivatives will be removed. This function performs the
following steps:</p>
<ol>
<li>If a Population folder doesn't exist yet but dartel does, rename it</li>
<li>Remove whole-study data files in AnalysisDir if bAllSubjects</li>
<li>Remove lock files/folders for reprocessing</li>
<li>Restore backupped _ORI (original) files</li>
<li>Delete native space CAT12 temporary folders (always, independent of iModule)</li>
<li>Remove native space files for iModule</li>
<li>Remove standard space files for iModule</li>
<li>Remove population module files</li>
<li>Remove or clean up stored x-struct &amp; QC file -&gt; THIS HAS NO SESSION SUPPORT YET</li>
</ol>
<p>NB: still need to add xASL_module_func &amp; xASL_module_dwi for EPAD</p>
<hr />
<h3 id="xasl_adm_comparedatasetsm">xASL_adm_CompareDataSets.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[RMS] = xASL_adm_CompareDataSets(RefAnalysisRoot,SourceAnalysisRoot,x,type,mutexState)
</code></pre>

<p><strong>Description:</strong></p>
<p>Compare data sets is used to ...</p>
<ul>
<li>type 0: Only save</li>
<li>type 1: Save and evaluate</li>
<li>type 2: Only evaluate</li>
</ul>
<hr />
<h3 id="xasl_adm_comparelistsm">xASL_adm_CompareLists.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[NewList] = xASL_adm_CompareLists(list1, list2)
</code></pre>

<p><strong>Description:</strong></p>
<p>This script compares two single dimension lists.</p>
<hr />
<h3 id="xasl_adm_convertdate2nrm">xASL_adm_ConvertDate2Nr.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[Nr DayInYear] = xASL_adm_ConvertDate2Nr(TempDate)
</code></pre>

<p><strong>Description:</strong></p>
<p>Converts date to number input mmdd -&gt; output mm (with days in fractions/floating point).
Inverse from ConvertNrDate.</p>
<hr />
<h3 id="xasl_adm_convertnr2timem">xASL_adm_ConvertNr2Time.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">Time = xASL_adm_ConvertNr2Time(Nr)
</code></pre>

<p><strong>Description:</strong></p>
<p>Converts number to time input hh (with minutes in fractions/floating point) -&gt; output hhmm.
Inverse from xASL_adm_ConvertTime2Nr.</p>
<hr />
<h3 id="xasl_adm_convertsubjsess2subj_sessm">xASL_adm_ConvertSubjSess2Subj_Sess.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[iSubj iSess] = xASL_adm_ConvertSubjSess2Subj_Sess(nSessions, iSubjSess)
</code></pre>

<p><strong>Description:</strong></p>
<p>Converts combined SubjectSession index to subject &amp; session
indices. Useful for data lists in ExploreASL.</p>
<hr />
<h3 id="xasl_adm_converttime2nrm">xASL_adm_ConvertTime2Nr.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">Nr = xASL_adm_ConvertTime2Nr(Time)
</code></pre>

<p><strong>Description:</strong></p>
<p>Converts time to number input hhmm -&gt; output hh (with
minutes in fractions/floating point).
Inverse from xASL_adm_ConvertNr2Time.</p>
<hr />
<h3 id="xasl_adm_copymovefilelistm">xASL_adm_CopyMoveFileList.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[List] = xASL_adm_CopyMoveFileList(OriDir, DstDir, StrRegExp, bMove[, bDir, bRecursive, bOverwrite, bVerbose])
</code></pre>

<p><strong>Description:</strong></p>
<p>Moves a file to a file, a file to a directory, or a directory to a directory.
It keeps the initial extensions, no unzipping or zipping after the move.
But it makes sure that only one of <strong>.nii</strong> and <strong>.nii.gz</strong> exists in the destination directory.
Useful to split a large database.</p>
<hr />
<h3 id="xasl_adm_correctnamem">xASL_adm_CorrectName.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">strOut = xASL_adm_CorrectName(strIn[, bOption, strExclude])
</code></pre>

<p><strong>Description:</strong></p>
<p>Finds and replaces all non-word characters either by empty space or by an underscore.
Optionally leaves in few selected special characters. Note that if '_' is excluded from
replacement, but option 2 is on, then underscores are replaced anyway.</p>
<hr />
<h3 id="xasl_adm_createfilereportm">xASL_adm_CreateFileReport.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">x = xASL_adm_CreateFileReport(x, bHasFLAIR, bHasMoCo, bHasM0, bHasLongitudinal)
</code></pre>

<p><strong>Description:</strong></p>
<p>Prints a summary of created files or the individual modules
(i.e. Structural, Longiutudinal &amp; ASL modules). Provides a quick check to
see what has been skipped, an whether all files are present.</p>
<p>This script iterates across:
Native space 1) subject and 2) session files,
Resampled 3) subject and 4) session files,
5) Lock files and 6) QC Figure files.</p>
<p>For all we perform a:</p>
<ul>
<li>A) Count of the files present, summarized in FileReportSummary.csv</li>
<li>B) List of the missing files in "Missing*.csv" files</li>
</ul>
<p>PM: Simplify/optimize this code, to make filename variable changing,
search within subject-directories, etc. Combine the parts searching for
missing &amp; summarizing count.</p>
<hr />
<h3 id="xasl_adm_defineaslresolutionm">xASL_adm_DefineASLResolution.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">x = xASL_adm_DefineASLResolution(x)
</code></pre>

<p><strong>Description:</strong></p>
<p>If the parameters x.ResolutionEstimation == 1, it initializes the resolution with expected values
per sequence type and then runs the procedure xASL_im_ResolutionEstim to estimate the resolution from the
mismatch between ASL and structural data. For x.ResolutionEstimation == 0, xASL_init_DefaultEffectiveResolution
the educated guess is used for the estimated resolution using previous data and analyzis.</p>
<hr />
<h3 id="xasl_adm_defineaslsequencem">xASL_adm_DefineASLSequence.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x] = xASL_adm_DefineASLSequence(x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This ExploreASL function tries to check what ASL sequence is
being processed, if this was not already defined in x.Sequence.
It does so by checking known combinations of readout dimensionality
(x.readout_dim) and vendor, knowing the product sequences of the vendors.</p>
<hr />
<h3 id="xasl_adm_deletefilepairm">xASL_adm_DeleteFilePair.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">filepaths = xASL_adm_DeleteFilePair(path, ext1[, ext2 [, ext3 ...]])
xASL_adm_DeleteFilePair(path, ext1[, ext2 [, ext3 ...]])
</code></pre>

<p><strong>Description:</strong></p>
<p>Delete the file given in PATH, and also deletes files with the same name, but with extension
given in EXT1, and potentially also EXT2, EXT3...</p>
<hr />
<h3 id="xasl_adm_dicom2parmsm">xASL_adm_Dicom2Parms.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[parms pathDcmDictOut] = xASL_adm_Dicom2Parms(inp[, parmsfile, dcmExtFilter, bUseDCMTK, pathDcmDictIn])
</code></pre>

<p><strong>Description:</strong></p>
<p>The function goes through the <strong>INP</strong> files, reads the <strong>DICOM</strong> or <strong>PAR/REC</strong> files and parses their headers.
It extracts the <strong>DICOM</strong> parameters important for ASL, makes sure they are in the correct format, if missing then
replaces with default value, it also checks if the parameters are consistent across <strong>DICOM</strong> files for a single sequence.</p>
<hr />
<h3 id="xasl_adm_doccrawlerm">xASL_adm_DocCrawler.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_adm_DocCrawler(inputPath)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function checks each individual file header and
extracts the information. The results is saved as a
markdown file.</p>
<p>If you want to use star symbols (*testFile.m e.g.) we
recommend not to use them in the same line with bold text
(which is written like this: <strong>bold text</strong>).</p>
<hr />
<h3 id="xasl_adm_docinitializem">xASL_adm_DocInitialize.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_adm_DocInitialize
</code></pre>

<p><strong>Description:</strong></p>
<p>This function generates all markdown files, which are
necessary for the mkdocs documentation.</p>
<hr />
<h3 id="xasl_adm_findbyregexpm">xASL_adm_FindByRegExp.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xasl_adm_FindByRegExp(root, dirSpecs[, varargin])
</code></pre>

<p><strong>Description:</strong></p>
<p>Recursively find files in the root directory according to the dirSpecs.</p>
<hr />
<h3 id="xasl_adm_findstrindexm">xASL_adm_FindStrIndex.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">INDEX = xASL_adm_FindStrIndex(ARRAY, STRING)
</code></pre>

<p><strong>Description:</strong></p>
<p>Similar to find, but then for a cell array filled with strings.
Only takes 4 dimensions.</p>
<hr />
<h3 id="xasl_adm_getfslistm">xASL_adm_GetFsList.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">RES = xASL_adm_GetFsList([strDirectory, strRegEx, bGetDirNames, bExcludeHidden, bIgnoreCase, nRequired])
</code></pre>

<p><strong>Description:</strong></p>
<p>List files or directories from a given path. And optionally uses regular expressions to filter the result
with options to exclude hidden files, ignore case, and set a minimal requirement on the number of results.
Sorts the results at the end.</p>
<hr />
<h3 id="xasl_adm_getnumfromstrm">xASL_adm_GetNumFromStr.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">num = xASL_adm_GetNumFromStr(str)
</code></pre>

<p><strong>Description:</strong></p>
<p>Obtains single number from string.
<strong>CAVE</strong> there should only be one number!</p>
<hr />
<h3 id="xasl_adm_getphilipsscalingm">xASL_adm_GetPhilipsScaling.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">scaleFactor = xASL_adm_GetPhilipsScaling(pathParmsMat,pathNifti)
</code></pre>

<p><strong>Description:</strong></p>
<p>This script provides the correct scaling factors for a NIfTI file. It checks the header of the NIfTI
that normally has the same scaling as RescaleSlope in DICOM, it checks if dcm2nii (by the info in JSON)
has already converted the scale slopes to floating point. And if not, the derive the correct
scaling factor to be applied.</p>
<hr />
<h3 id="xasl_adm_getusernamem">xASL_adm_GetUserName.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">UserName = xASL_adm_GetUserName()
</code></pre>

<p><strong>Description:</strong></p>
<p>Get the name of the current user.</p>
<hr />
<h3 id="xasl_adm_hex2numm">xASL_adm_Hex2Num.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">outNum = xASL_adm_hex2num(inStr)
</code></pre>

<p><strong>Description:</strong></p>
<p>Takes a hexadecimal string and converts it to number or string. Works
also when the string contains escape characters, and for single-floats and
for a little and big endian. If containing 8 and less
characters than treat as float, if more than as double.</p>
<hr />
<h3 id="xasl_adm_lesionreslicelistm">xASL_adm_LesionResliceList.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[INname, OUTname] = xASL_wrp_LesionResliceList(x,bLesion_T1,bLesion_FLAIR,bROI_T1,bROI_FLAIR)
</code></pre>

<p><strong>Description:</strong></p>
<p>Creates list of structural image paths to reslice.</p>
<hr />
<h3 id="xasl_adm_loadparmsm">xASL_adm_LoadParms.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[Parms, x] = xASL_adm_LoadParms(ParmsPath[, x, bVerbose])
</code></pre>

<p><strong>Description:</strong></p>
<p>This function loads the internal memory x struct, any
legacy *_parms.mat sidecar, any *.json BIDS sidecar, to use scan-specific
parameters for image processing/quantification. Also, per BIDS
inheritance, any x.S.SetsID parameters (from participants.tsv) are loaded
as well. This function performs the following steps:</p>
<ol>
<li>Load .mat parameter file</li>
<li>Load JSON file</li>
<li>Deal with warnings</li>
<li>Find fields with scan-specific data in x.S.Sets, and use this if possible (per BIDS inheritance)</li>
<li>Sync Parms.* with x.(Q.)* (overwrite x/x.Q)</li>
<li>Fix M0 parameter if not set</li>
</ol>
<hr />
<h3 id="xasl_adm_loadxm">xASL_adm_LoadX.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x[, IsLoaded]] = xASL_adm_LoadX(x[, Path_xASL, bOverwrite])
</code></pre>

<p><strong>Description:</strong></p>
<p>This function loads x.Output &amp; x.Output_im struct fields
from the x.mat on the hard drive &amp; adds them to the current x struct
located in memory. If it didnt exist in the x.mat, it will
set IsLoaded to false, which can be catched externally &amp; a warning issued if managed so
in the calling function. If it didnt exist in the memory x
struct, or bOverwrite was requested, the contents of x.mat
will be loaded to the memory x struct</p>
<hr />
<h3 id="xasl_adm_makestandalonem">xASL_adm_MakeStandalone.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_adm_MakeStandalone(outputPath, bCompileSPM, importDCM, markAsLatest);
</code></pre>

<p><strong>Description:</strong></p>
<p>This function creates an output folder including a
standalone version of ExploreASL, which can be used with the Matlab
Runtime outside of Matlab itself.</p>
<p>A quick fix to solve path dependencies etc. is to first
compile SPM (but this can be turned off for speed).</p>
<p>This function performs the following steps:</p>
<ol>
<li>Manage ExploreASL and compiler code folders</li>
<li>Capture version/date/time</li>
<li>File management output folder &amp; starting diary</li>
<li>Handle SPM Specific Options</li>
<li>Manage compilation paths</li>
<li>Run SPM compilation</li>
<li>Run ExploreASL compilation</li>
<li>Print done</li>
</ol>
<hr />
<h3 id="xasl_adm_orderfieldsm">xASL_adm_OrderFields.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">outStruct = xASL_adm_OrderFields(inStruct,orderStruct)
</code></pre>

<p><strong>Description:</strong></p>
<p>Order fields in the structure <strong>inStruct</strong> to match <strong>orderStruct</strong>,
unmatching fields in inStruct are copied as
they are at the end, unmatching fields in <strong>orderStruct</strong> are
ignored. This is just a cosmetic change and no values are
edited.</p>
<hr />
<h3 id="xasl_adm_otherlistspmm">xASL_adm_OtherListSPM.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[OtherListSPM, OtherListOut] = xASL_adm_OtherListSPM(OtherList, bList4D)
</code></pre>

<p><strong>Description:</strong></p>
<p>bPadComma1 is to add the ,1 to the end of the pathstring, which SPM uses
to assign the first image of a 4D image array (OPTIONAL, DEFAULT = true)
bList4D: boolean, true for listing multiple 4D volumes separately in the
list (OPTIONAL, DEFAULT=true).</p>
<hr />
<h3 id="xasl_adm_parreadheaderm">xASL_adm_ParReadHeader.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">info =xASL_adm_ParReadHeader(filename)
</code></pre>

<p><strong>Description:</strong></p>
<p>Function for reading the header of a Philips Par /
Rec  MR V4.* file.</p>
<hr />
<h3 id="xasl_adm_removelogfilesforrerunm">xASL_adm_RemoveLogFilesForRerun.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_adm_RemoveLogFilesForRerun(rootDir);
</code></pre>

<p><strong>Description:</strong></p>
<p>Removes all log files from any directory containing .log files.</p>
<hr />
<h3 id="xasl_adm_remove_1_spmm">xASL_adm_Remove_1_SPM.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[OtherList] = xASL_adm_Remove_1_SPM(OtherList)
</code></pre>

<p><strong>Description:</strong></p>
<p>Remove ,1 at end of OtherLists, if exists.
These are appended in CoregInit, OldNormalizeWrapper etc,
since this should allow 4rd dim (e.g. as in ASL4D).</p>
<hr />
<h3 id="xasl_adm_replacesymbolsm">xASL_adm_ReplaceSymbols.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">strOut = xASL_adm_ReplaceSymbols(strIn, symbolTable[, bracketLeft, bracketRight])
</code></pre>

<p><strong>Description:</strong></p>
<p>It takes the STRIN on input, then looks for symbols between BRACKETLEFT and BRACKETRIGHT and replaces these symbols in
in the string by the values provided in the SYMBOLTABLE as SYMBOLTABLE.SYMBOL, SYMBOLTABLE.D.SYMBOL, or SYMBOLTABLE.P.SYMBOL</p>
<hr />
<h3 id="xasl_adm_resetvisualizationslicesm">xASL_adm_ResetVisualizationSlices.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x] = xASL_adm_ResetVisualizationSlices(x)
</code></pre>

<p><strong>Description:</strong></p>
<p>Removes any predefined slices that should be visualized,
allowing to show the default slices. Comes in handy when different
pipeline visualization parts are repeated.</p>
<hr />
<h3 id="xasl_adm_savexm">xASL_adm_SaveX.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_adm_SaveX(x[, Path_xASL, bOverwrite])
</code></pre>

<p><strong>Description:</strong></p>
<p>This function saves the x.mat either to the predefined path or the the subject x.mat</p>
<hr />
<h3 id="xasl_adm_unziporcopym">xASL_adm_UnzipOrCopy.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">unpackedFiles = xASL_adm_UnzipOrCopy(srcDir, wildCard, destDir [, bOverwrite])
</code></pre>

<p><strong>Description:</strong></p>
<p>This is a simple wrapper function to (g)unzip one or more files to the specified destination
directory. Existing files or directories will not be overwritten, unless forced with bOverwrite.
A regular file-copy will be used if the source files don't have gz or zip filename extensions.</p>
<hr />
<h3 id="xasl_adm_voxel2realworldcoordinatesm">xASL_adm_Voxel2RealWorldCoordinates.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[X Y Z] = xASL_adm_Voxel2RealWorldCoordinates(X,Y,Z,VoxelSize)
</code></pre>

<p><strong>Description:</strong></p>
<p>Converts MNI coordinates from voxel coordinates/indices.
Assumes X Y Z = LR LeftRight AP AnteriorPosterior IS InferiorSuperior.
VoxelSize should be [1 3]-sized input.</p>
<hr />
<h3 id="xasl_adm_zipfilelistm">xASL_adm_ZipFileList.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">filepaths = xASL_adm_ZipFileList(strDirectory, strRegExp[, bRecurse, bUseGzip, nRequired])
xASL_adm_ZipFileList(strDirectory, strRegExp[, bRecurse, bUseGzip, nRequired])
</code></pre>

<p><strong>Description:</strong></p>
<p>Zip the files that match regular expression STRREGEXP in the given directory STRDIRECTORY.
Zips recursively if specified in BRECURSE. Zips all files unless the number is specified
by NREQUIRED, if the number is not met, then does not zip anything and throws an error.</p>
<hr />
<h3 id="xasl_adm_uigetinputm">xASL_adm_uiGetInput.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[Parms] = xASL_adm_uiGetInput(Parms)
</code></pre>

<p><strong>Description:</strong></p>
<p>Checks whether input fields are present, or requests them.</p>
<h2 id="bids">BIDS</h2>
<hr />
<h3 id="xasl_bids_add2participantstsvm">xASL_bids_Add2ParticipantsTSV.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_bids_Add2ParticipantsTSV(DataIn, DataName, x, bOverwrite)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function adds metadata/statistical variables to the
participants.tsv in the root/analysis folder, by the following steps.
This function will iterate over Data provided at DataIn and fill them
in the participants.tsv, overwriting if allowed.
Empty data is filled in as 'n/a', and the first column "participants_id"
is sorted for participants.</p>
<p>This function runs the following steps:</p>
<ol>
<li>Admin - Validate that there are not too many columns</li>
<li>Admin - Detect nSubjectsSessions</li>
<li>Admin - Load pre-existing participants.tsv or create one</li>
<li>Admin - Get column number of data</li>
<li>Add data to CellArray</li>
<li>Sort rows on subjects</li>
<li>Fill empty cells</li>
<li>Write data to participants.tsv</li>
</ol>
<hr />
<h3 id="xasl_bids_bids2legacym">xASL_bids_BIDS2Legacy.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_bids_BIDS2Legacy(pathStudy[, bOverwrite, dataPar])
</code></pre>

<p><strong>Description:</strong></p>
<p>This function converts BIDS rawdata (in pathStudy/rawdata/)
to xASL legacy derivative format (e.g. pathStudy/derivatives/ExploreASL/)</p>
<p>Can be updated step-by-step when ExploreASL's derivative structure moves to BIDS
NB: ask how Visits/session layer is defined in bids-matlab (should be
separate layer within subjects, but now isn't?)</p>
<p>This function performs the following steps:</p>
<ol>
<li>Parse a folder using bids-matlab</li>
<li>Define Subject</li>
<li>Define SubjectVisit</li>
<li>Parse modality</li>
<li>Parse scantype</li>
<li>Compile paths for copying</li>
<li>Manage sidecars to copy</li>
<li>Copy files</li>
<li>Parse M0</li>
<li>Create DataPar.json</li>
<li>Clean up</li>
</ol>
<hr />
<h3 id="xasl_bids_comparestructuresm">xASL_bids_CompareStructures.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[identical,results] = xASL_bids_CompareStructures(pathDatasetA,pathDatasetB,[bPrintReport,threshRmseNii]);
</code></pre>

<p><strong>Description:</strong></p>
<p>Function that compares two BIDS folders with several subfolders and studies and prints the differences.
We recommend to set bPrintReport to true, because you otherwise can't see significant file content differences.</p>
<hr />
<h3 id="xasl_bids_configm">xASL_bids_Config.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">bidsPar = xASL_bids_Config()
</code></pre>

<p><strong>Description:</strong></p>
<p>Creates several structures necessary for configuring the DICOM to BIDS conversion and saving of BIDS JSON files and NII structure.</p>
<hr />
<h3 id="xasl_bids_createdatasetdescriptiontemplatem">xASL_bids_CreateDatasetDescriptionTemplate.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[json] = xASL_bids_CreateDatasetDescriptionTemplate(draft)
</code></pre>

<p><strong>Description:</strong></p>
<p>This script creates a JSON structure which can be saved
using spm_jsonwrite to get a dataset_description.json template.
Missing fields that are required are added. BIDSVersion checked against the current configured version.
Remaining fields will be validated. Other fields not belonging to dataset_description.json are ignored.</p>
<hr />
<h3 id="xasl_bids_dro2bidsm">xASL_bids_DRO2BIDS.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_bids_DRO2BIDS(droTestPatient,[droSubject])
</code></pre>

<p><strong>Description:</strong></p>
<p>Prepare DRO test patient for BIDS2RAW conversion.
This script uses the output of the asldro python script and
converts it into a bids structure that can be read by our
xASL_bids_BIDS2Legacy script.
An exemplary usage is shown in the unit test called
xASL_ut_UnitTest_function_BIDS2Legacy.</p>
<hr />
<h3 id="xasl_bids_dicom2jsonm">xASL_bids_Dicom2JSON.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[parms pathDcmDictOut] = xASL_bids_Dicom2Parms(imPar, pathIn[, pathJSON, dcmExtFilter, bUseDCMTK, pathDcmDictIn])
</code></pre>

<p><strong>Description:</strong></p>
<p>The function goes through the pathIn files, reads the DICOM or PAR/REC files
and parses their headers. It extracts the DICOM parameters important for ASL,
makes sure they are in the correct format, if missing then replaces with default
value, it also checks if the parameters are consistent across DICOM files for a
single sequence.</p>
<ol>
<li>Admin</li>
<li>Set up the default values</li>
<li>Recreate the parameter file from raw data</li>
</ol>
<hr />
<h3 id="xasl_bids_getphoenixprotocolm">xASL_bids_GetPhoenixProtocol.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[xasl,parameters,parameterList,phoenixProtocol] = xASL_bids_GetPhoenixProtocol(pathData,bUseDCMTK)
</code></pre>

<p><strong>Description:</strong></p>
<p>Function that reads raw DICOM data (".dcm" or ".IMA") and extracts the phoenix protocol parameters.
Only works for Siemens DICOM data with phoenix protocol (tag = [0x29,0x1020]).</p>
<hr />
<h3 id="xasl_bids_jsoncheckm">xASL_bids_JsonCheck.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">jsonOut = xASL_bids_JsonCheck(jsonIn,fileType)
</code></pre>

<p><strong>Description:</strong></p>
<p>It checks the existence of all BIDS fields, removes superfluous fields, checks all the conditions and orderes
the structure on the output. It works according to the normal BIDS, or ASL-BIDS definition</p>
<hr />
<h3 id="xasl_bids_mergeniftim">xASL_bids_MergeNifti.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">NiftiPaths = xASL_bids_MergeNifti(NiftiPaths, seqType)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function takes a list of M0 or ASL4D files and concatenates them together in a longer 4D volume if possible
following certain patterns: works only with 3D and 4D files; all files in the list must have the same size of the
first three dimensions; files are generarily sorted according to the last number in the filename and outputted
to M0.nii or ASL4D.nii; first JSON is taken and renamed, all other JSONs and NIIs are deleted after merging;
M0*_parms.m or ASL*_parms.mat is renamed to M0_parms.m or ASL4D_parms.m; M0 files are checked if the field
PhaseEncodingAxis is consistent through all the volumes, if not the nothing is merged; this is applied to a generic case
and 3 other specific Siemens scenarios are implemented:</p>
<ul>
<li>i) All NII files have two volumes, then simply concatenate according to the last number.</li>
<li>ii) Two files with a single volume each are merged according to the last number in the file name.</li>
<li>iii) Multiple files with each containing a single volume are sorted to tags ASL4D_x_x_Y and controls ASL4D_Y and merged in the order
of the last number in the filename (Y) alternating the tags and controls</li>
</ul>
<p>This function performs the following steps in subfunctions:</p>
<ol>
<li>xASL_bids_MergeNifti_M0Files Generic merging of M0 files</li>
<li>xASL_bids_MergeNifti_GEASLFiles Merge GE ASL files and extract scan order from DICOM tags</li>
<li>xASL_bids_MergeNifti_SiemensASLFiles Merge Siemens ASL files with specific filename pattern</li>
<li>xASL_bids_MergeNifti_AllASLFiles Merge any ASL files</li>
<li>xASL_bids_MergeNifti_Merge Merge NiftiPaths &amp; save to pathMerged</li>
<li>xASL_bids_MergeNifti_Delete Delete NiftiPaths and associated JSONs</li>
<li>xASL_bids_MergeNifti_RenameParms Find *_parms.m files in directory and shorten to provided name</li>
</ol>
<hr />
<h3 id="xasl_bids_mergenifti_deletem">xASL_bids_MergeNifti_Delete.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_bids_MergeNifti_Delete(NiftiPaths);
</code></pre>

<p><strong>Description:</strong></p>
<p>Delete NiftiPaths and associated JSONs.</p>
<hr />
<h3 id="xasl_bids_mergenifti_mergem">xASL_bids_MergeNifti_Merge.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">pathOut = xASL_bids_MergeNifti_Merge(NiftiPaths,indexSortedFile,nameMerged,bAlternatingControlLabel)
</code></pre>

<p><strong>Description:</strong></p>
<p>Merge NiftiPaths &amp; save to pathOut.</p>
<hr />
<h3 id="xasl_bids_mergenifti_renameparmsm">xASL_bids_MergeNifti_RenameParms.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_bids_MergeNifti_RenameParms(Fpath,Fname);
</code></pre>

<p><strong>Description:</strong></p>
<p>Find *_parms.m files in directory and shorten to provided name.</p>
<hr />
<h3 id="xasl_bids_mergenifti_siemensaslfilesm">xASL_bids_MergeNifti_SiemensASLFiles.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">pathOut = xASL_bids_MergeNifti_SiemensASLFiles(NiftiPaths)
</code></pre>

<p><strong>Description:</strong></p>
<p>Take a list of NIfTI files and concatenates 3D/4D files into a 4D sequence if possible (Siemens).</p>
<hr />
<h3 id="xasl_bids_par2jsonm">xASL_bids_Par2JSON.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">parms = xASL_bids_Par2JSON(pathPar, pathJSON)
</code></pre>

<p><strong>Description:</strong></p>
<p>Opens the Philips PAR file. Reads the relevant DICOM headers and saves them to JSON sidecar in a BIDS format.
The JSON file is created automatically by the dcm2nii readout, so it always looks for this JSON file and
add the same time reads the PAR file and adds further parameters to the JSON that were not identified by
the dcm2nii tool.</p>
<hr />
<h3 id="xasl_bids_phoenixprotocolanalyzerm">xASL_bids_PhoenixProtocolAnalyzer.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[bidsPar,sourcePar] = xASL_bids_PhoenixProtocolAnalyzer(parameterList);
</code></pre>

<p><strong>Description:</strong></p>
<p>This function analyzes the parameter list of the phoenix protocol (tag = [0x29,0x1020]).
This function is usually called from xASL_bids_GetPhoenixProtocol.</p>
<hr />
<h3 id="xasl_bids_phoenixprotocolreaderm">xASL_bids_PhoenixProtocolReader.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[parameterList,phoenixProtocol] = xASL_bids_PhoenixProtocolReader(rawPhoenixProtocol)
</code></pre>

<p><strong>Description:</strong></p>
<p>Function to parse the raw phoenix protocol. This function is usually called from xASL_bids_GetPhoenixProtocol.</p>
<hr />
<h3 id="xasl_bids_vendorfieldcheckm">xASL_bids_VendorFieldCheck.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">jsonOut = xASL_bids_VendorFieldCheck(jsonIn,bIsASL)
</code></pre>

<p><strong>Description:</strong></p>
<p>It checks all the JSON fields, make sure that they are renamed from vendor specific names to common BIDS names</p>
<hr />
<h3 id="xasl_bids_determineimagetypegem">xASL_bids_determineImageTypeGE.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">imageType = xASL_bids_determineImageTypeGE(jsonPar)
</code></pre>

<p><strong>Description:</strong></p>
<p>Determine the image type of a GE DICOM.</p>
<hr />
<h3 id="xasl_bids_parms2bidsm">xASL_bids_parms2BIDS.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">outBids = xASL_bids_parms2BIDS(inXasl[, inBids, bOutBids, priorityBids])
</code></pre>

<p><strong>Description:</strong></p>
<p>This functions takes two parameter structures and merges them. At the same time, renames all fields
according to the output type (note that only some fields have two standardised names different between the two formats.
In case of duplicities, takes the field value from the preferred format.
Also takes into account that the units in BIDS are s, but in xASL ms.
This function performs the following steps:</p>
<ol>
<li>Define field names that need to be convert/renamed/merged</li>
<li>Convert XASL fields to the output format (BIDS or XASL)</li>
<li>Convert BIDS fields to the output format (BIDS or XASL)</li>
<li>Merge the BIDS and XASL fields, convert field values</li>
</ol>
<hr />
<h3 id="xasl_bids_parsem0m">xASL_bids_parseM0.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_bids_parseM0(pathASLNifti)
</code></pre>

<p><strong>Description:</strong></p>
<p>Check the .JSON and aslContext.tsv sidecards of an ASL file in BIDS format and find the
specified M0 possibilities. Then it converts the ASL file to ExploreASL legacy format including
splitting of ASL and M0 NIFTIes if needed. Note that the sidecars are in BIDS, but the file-structure
is already expected to be in Legacy format</p>
<h2 id="fsl">FSL</h2>
<hr />
<h3 id="xasl_fsl_runfslm">xASL_fsl_RunFSL.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x] = xASL_adm_RunFSL(FSLCommand, x[, OutputZipping])
</code></pre>

<p><strong>Description:</strong></p>
<p>This function runs an FSL command from ExploreASL:</p>
<ol>
<li>Checking the FSL dir</li>
<li>Manage CUDA/CPU parallelization (currently disabled, WIP)</li>
<li>Setting up FSL environment</li>
<li>Running the command</li>
</ol>
<p>Supports .nii &amp; .nii.gz, Linux, MacOS &amp; Windows (WSL)</p>
<hr />
<h3 id="xasl_fsl_setfsldirm">xASL_fsl_SetFSLdir.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[FSLdir[, x, RootWSLdir]] = xASL_adm_SetFSLdir(x, bUseLatestVersion)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function finds the FSLdir &amp; puts it out, also in
x.FSLdir to allow repeating this function without having to repeat
searching.
If the FSLdir &amp; RootFSLDir are already defined in x.FSLdir &amp; x.RootFSLDir, this function
is skipped.
Supports Linux, MacOS &amp; Windows (WSL), &amp; several different
default installation folders for different Linux
distributions</p>
<hr />
<h3 id="xasl_fsl_topupm">xASL_fsl_TopUp.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_fsl_TopUp(InDir[, ScanType], x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function runs FSL TopUp. It assumes that there are 2
TopUp images, i.e. 1 blip up &amp; 1 blip down.</p>
<ol>
<li>Admin: manage ScanType, NIfTI paths, create TopUp
parameter file for image to apply TopUp to &amp; for the TopUp NIfTIs,
delete files from previous run, define the image with the
same acquisition parameters as TopUp (does the image
we apply TopUp to, have the Blip up or down?)</li>
<li>Register images to image that we apply TopUp to
(registration between blip up/down images is performed by
TopUp)</li>
<li>Run TopUp estimate (i.e. estimate the geometric distortion field from B0 NIfTI &amp;
parameters file), this takes quite long. Also has a x.Quality=0 option that is very fast
but inaccurate, to try out this pipeline part. Before
TopUp, NaNs (e.g. from resampling) are removed from the images
TopUp is run with default settings</li>
<li>Apply TopUp</li>
</ol>
<h2 id="imaging">Imaging</h2>
<hr />
<h3 id="xasl_im_bilateralfilterm">xASL_im_BilateralFilter.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[ovol] = xASL_im_BilateralFilter(volIM, mask, VoxelSize, x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function runs a spatial lowpass temporally
highpass filter, and removes outliers within this signal, and adapts the
time-series accordingly.</p>
<hr />
<h3 id="xasl_im_centerofmassm">xASL_im_CenterOfMass.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_im_CenterOfMass(PathNIfTI, OtherList, AllowedDistance)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function estimates the center of mass of the image
matrix, and if this is too far off the current orientation
matrix center, the center will be reset.
This fixes any incorrect orientation outputted by the
scanner.
The realignment is only applied when any of the X/Y/Z
dimensions have a higher offset than AllowedDistance.</p>
<hr />
<h3 id="xasl_im_cleanupwmhnoisem">xASL_im_CleanupWMHnoise.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_im_CleanupWMHnoise(InputPath, OutputPath, MinLesionVolume, pThresh)
</code></pre>

<p><strong>Description:</strong></p>
<p>Threshold white matter lesions,
acknowledging the fact that they may be confluent with subresolution connection
through a dilation. This part is executed conservatively, as FLAIR hyperintensities
inside the GM can be erroneously segmented as WMH, and should not be lesion-filled
(otherwise these cannot be fixed later in the Structural module).</p>
<p>Note that LST lesion filling expects a probability map, doesnt work nicely with binary mask</p>
<hr />
<h3 id="xasl_im_clipextremesm">xASL_im_ClipExtremes.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[NewIM] = xASL_im_ClipExtremes(InputIm[, ThreshHigh, ThreshLow, bVerbose, bNormalize])
</code></pre>

<p><strong>Description:</strong></p>
<p>This function clips an image to a given percentile. The percentile is found
using non-zeros sorted intensities, so both isfinite &amp; non-zeros.
This function performs the following steps:</p>
<ol>
<li>Constrain clippable intensities</li>
<li>Clip high intensities</li>
<li>Clip low intensities</li>
<li>Normalize to 4096 (12 bit, 12^2)</li>
<li>Save as NIfTI if the input was a NIfTI</li>
</ol>
<hr />
<h3 id="xasl_im_column2imm">xASL_im_Column2IM.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[ImageOut] = xASL_im_Column2IM(ColumnIn, BrainMask)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function "decompresses" an image matrix (or multiple matrices)
from a single-dimensional column, by reconstructing the image matrix
from the voxel positions within the BrainMask.
NB: Important to use the same BrainMask as used for converting the
image matrix to the column!
See also: xASL_im_IM2Column.m</p>
<p>The mask mostly used for xASL_im_IM2Column is x.WBmask, which completely
engulfes pGM, pWM &amp; pCSF.</p>
<hr />
<h3 id="xasl_im_compareniftiresolutionxyzm">xASL_im_CompareNIfTIResolutionXYZ.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[IsEqualResolution] = xASL_im_CompareNIfTIResolutionXYZ(PathNIfTI1, PathNIfTI2)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function checks whether the X, Y and Z resolution of a
NIfTI with any number of dimensions is equal. It rounds for 2 floating
points, for both NIfTIs, to ensure that the same precision is compared.</p>
<hr />
<h3 id="xasl_im_computedicem">xASL_im_ComputeDice.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[DiceCoeff] = xASL_im_ComputeDice(imA, imB)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function calculates the Dice coefficient of image overlap.</p>
<hr />
<h3 id="xasl_im_createasldeformationfieldm">xASL_im_CreateASLDeformationField.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_im_CreateASLDeformationField(x, bOverwrite, EstimatedResolution)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function smooths a transformation flow field to a lower
resolution. Usually, we use a high resolution anatomical
image (e.g. <strong>3D T1w</strong>) to obtain the flowfields from native
space to standard space, and apply these to the lower
resolution ASL images. Because of the resolution
differences, the flowfields need to be downsampled/smoothed,
to avoid deformation effects that are crispier than the
functional image that is investigated. This function
performs the following steps:</p>
<ol>
<li>Obtain resolutions</li>
<li>Fill NaNs at edges y_T1.nii flowfield to prevent interpolation artifact</li>
<li>Smooth flowfield</li>
<li>Fill NaNs at edges y_ASL.nii</li>
</ol>
<p>Note that if the resolution of ASL is not significantly (i.e. &gt;0.5 mm in
any dimension) lower than T1w, the y_T1.nii is copied to y_ASL.nii</p>
<hr />
<hr />
<h3 id="xasl_im_createpseudocbfm">xASL_im_CreatePseudoCBF.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_im_CreatePseudoCBF(x, spatialCoV[, bPVC])
</code></pre>

<p><strong>Description:</strong></p>
<p>This function creates a pseudo-CBF image from mean CBF template,
arterial transit time (ATT) bias field &amp; vascular artifacts, weighted through spatial CoV
The first part of this code puts templates in the native space and
creates a pseudoCBF image from a downsampled pGM &amp; pWM tissue (PseudoTissue). The latter
is used for registration but also as reference for the template
registration, to speed this up.
The second part of this code computes a pseudoCBF image based on the
pseudoTissue &amp; the CBF templates of CBF, ATT biasfield and vascular peaks, based on spatial CoV.</p>
<p>This submodule performs the following steps:</p>
<ol>
<li>Create the pseudoTissue CBF reference image, if it doesnt exist already</li>
<li>Create the native space copies of ASL templates, if they dont exist already</li>
<li>Spatial CoV input argument check</li>
<li>Load native space copies of templates</li>
<li>Create pseudoTissue from segmentations, mix this with the mean CBF template depending on spatial CoV</li>
<li>Create pseudoCBF reference image used for CBF-based registration</li>
<li>Scale mean_PWI_Clipped source image to the same range as PseudoCBF</li>
</ol>
<hr />
<h3 id="xasl_im_createslicegradientm">xASL_im_CreateSliceGradient.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_im_CreateSliceGradient(x)
</code></pre>

<p><strong>Description:</strong></p>
<ol>
<li>Create slice gradient in same space as input file</li>
<li>Reslice slice gradient to MNI (using existing ASL matrix changes from e.g. registration to MNI, motion correction, registration to GM)</li>
<li>Creating average slice gradient</li>
</ol>
<hr />
<h3 id="xasl_im_decomposeaffinetransformationm">xASL_im_DecomposeAffineTransformation.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[M, P] = xASL_im_DecomposeAffineTransformation(Mtransformation)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function splits a transformation matrix into individual
components, which can be useful to guide the SPM reslicing.
The components are the same as in spm_(i)matrix.m, except for
the shearing: these are included in the rotations, and
the 90 degree rotations, these are separated.</p>
<p>Reason for the separation of the 90 degree rotations, is
that these indicate if orientations (transversal, coronal &amp;
sagittal) have been switched in the NIfTI.</p>
<p>This can be useful to correct for any erroneous 90degree rotations from registration,
or to put two images in the same orientation order or voxelsize without applying
their subtle realignment (e.g. for manipulating registration references)</p>
<p>THEORY 90 degree rotations:
Any rotation will always swap the other dims (X rotation swaps Y/Z, Y
rotation swaps X/Z etc.) because they are perpendicular (haaks)</p>
<p>Dims X Y Z care for LR, AP and IS translation.
- X-rotation will rotate the transverse slice (LR &lt;-&gt; AP)
swapping Y (coronal) &amp; Z (saggital)
- Y-rotation will rotate the coronal slice (IS &lt;-&gt; LR) slice,
swapping X (transversal) and Z (sagittal)
- Z-rotation will rotate the sagittal slice (AP &lt;-&gt; IS)
swapping X (transversal) and Y (sagittal)</p>
<p>E.g., MPRAGE is acquired in sagittal slices, and ASL/fMRI/BOLD in
transversal slices. This is an Y rotation (you look into the coronal
plane, rotate this, which will swap the sagittal slices into transversal)</p>
<p>This function performs the following steps:</p>
<ol>
<li>Start with an output P and M struct</li>
<li>Obtain translations</li>
<li>Obtain zoom</li>
<li>Obtain 90degree rotations</li>
<li>Obtain subtle rotations &amp; shearing</li>
<li>Check the rounding errors of the decomposition</li>
</ol>
<hr />
<h3 id="xasl_im_determineflipm">xASL_im_DetermineFlip.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[QCstruct] = xASL_im_DetermineFlip(x,iS,PathOrientationResults,QCstruct)
</code></pre>

<p><strong>Description:</strong></p>
<p>Check determinants, should be the same
before &amp; after registration, otherwise a left-right flip is applied
This is not visible, but detrimental for image analysis/stats.</p>
<hr />
<h3 id="xasl_im_dilateerodefullm">xASL_im_DilateErodeFull.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">imOut = xASL_im_DilateErodeFull(imIn, type, kernel)
</code></pre>

<p><strong>Description:</strong></p>
<p>Runs dilation or erosion on a binary imIn in full three dimensions.
It uses its own dilate_erode function and crops the image so that it
contains only the mask. The size of all three dimensions of the kernel needs to be an odd number.</p>
<hr />
<h3 id="xasl_im_dilateerodeseparablem">xASL_im_DilateErodeSeparable.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">imOut = xASL_im_DilateErodeSeparable(imIn, type, kernel_x, kernel_y, kernel_z)
</code></pre>

<p><strong>Description:</strong></p>
<p>Runs dilation or erosion on a binary imIn separably in three dimensions. Dilation/erosion
in each dimension is done by using the specified kernels. It uses its own dilate_erode function
and crops the image so that it contains only the mask.
Works only with odd sized kernels</p>
<hr />
<h3 id="xasl_im_dilateerodespherem">xASL_im_DilateErodeSphere.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">el = xASL_im_DilateErodeSphere(R)
</code></pre>

<p><strong>Description:</strong></p>
<p>Creates a 3D structuring element (binary) sphere with the given diameter (R) and size 2*R+1</p>
<hr />
<h3 id="xasl_im_dummyorientationniftim">xASL_im_DummyOrientationNIfTI.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_im_DummyOrientationNIfTI(PathSrc, PathRef, PathDummyOut[, bApplyRotationMinor, bApplyRotation90, bApplyZoom, bApplyTranslation])
</code></pre>

<p><strong>Description:</strong></p>
<p>This function creates a dummy image as reference for xASL_spm_reslice,
allowing to only apply specific parts of the transformation between the
two images. E.g. only the rotation, or only the zooming.
This can be useful to correct for any erroneous rotations from registration,
or to put two images in the same space without applying their
realignment. This function performs the following steps:</p>
<ol>
<li>Load orientations &amp; calculate transformation</li>
<li>Calculate the desired transformation</li>
<li>Calculate new orientation matrix</li>
<li>Calculate the new image size</li>
<li>Save the dummy NIfTI</li>
</ol>
<hr />
<h3 id="xasl_im_estimateresolutionm">xASL_im_EstimateResolution.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[resFWHM, resSigma, resErr, imSmo, imMask] = xASL_im_EstimateResolution(imCBF, imGM, imWM[, imMaskOrig, PSFtype, maxIter])
</code></pre>

<p><strong>Description:</strong></p>
<p>Creates a high-resolution pseudo-CBF image based on segmented GM and WM maps and iteratively adjusts its resolution
by smoothing until reaching a perfect fit with the CBF image thus obtaining the resolution difference between the GM and CBF image and
uses this to calculate the estimated effective resolution of hte CBF. Note that all the calculations are done using voxels as measures
and not mm, so the output resolution is also in voxels and has to be transfered to mm by using the knowledge about the voxel size.
It is assumed that for imGM and imWM, the voxel size equals the resolution, and the imCBF is upsampled to the smaller voxels of imGM.</p>
<hr />
<h3 id="xasl_im_flipm">xASL_im_Flip.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[MatrixOut] = xASL_im_Flip(MatrixIn, varargin)
</code></pre>

<p><strong>Description:</strong></p>
<p>Backwards compatibility for flipping left-right in standard
space (NB: this can be different than in native space!).</p>
<hr />
<h3 id="xasl_im_hausdorffdistm">xASL_im_HausdorffDist.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_im_HausdorffDist(imIn1,imIn2)
</code></pre>

<p><strong>Description:</strong></p>
<p>Calculate Hausdorff and modified Hausdorff distance between two ROIs in volumes imIn1, imIn2.
Input images are binarized as 0 and non-0</p>
<hr />
<h3 id="xasl_im_im2columnm">xASL_im_IM2Column.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[ColumnOut] = xASL_im_IM2Column(ImageIn, BrainMask[, ApplyShiftDim])
</code></pre>

<p><strong>Description:</strong></p>
<p>This function "compresses" an image matrix (or multiple matrices)
for optimization of memory and CPU resources. The output column only includes
voxels that lie within the BrainMask. This excludes extracranial
zero-information voxels from computations and memory use.
NB: Important to use the same BrainMask for converting the
column back to an image matrix!
See also: xASL_im_Column2IM.m</p>
<p>The mask mostly used for xASL_im_IM2Column is x.WBmask, which completely
engulfes pGM, pWM &amp; pCSF</p>
<hr />
<h3 id="xasl_im_jointhistm">xASL_im_JointHist.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">imHist = xASL_im_JointHist(imA,imB[,imMask,minA,maxA,minB,maxB,nBins])
</code></pre>

<p><strong>Description:</strong></p>
<p>It calculates a joint histogram of two images of any dimensions over a mask of the same size.
The boundaries and number of bins can either be given or min and max values are used. Values
outside of the bins are counted to the first/last bin.</p>
<hr />
<h3 id="xasl_im_lesion2catm">xASL_im_Lesion2CAT.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">LesionPathOut = xASL_im_Lesion2CAT(PathIn)
</code></pre>

<p><strong>Description:</strong></p>
<p>For all lesion masks in the anatomical directory, load
them, merge them and save them for the CAT segmentation.
If there are no lesions found, the images are untouched.</p>
<hr />
<h3 id="xasl_im_lesion2maskm">xASL_im_Lesion2Mask.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">LesionIM = xASL_im_Lesion2Mask(LesionPath, x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function takes a mask and adds several ROIs, to be used as custom "atlas", e.g. when computing region-average CBF values.
The mask % can be an ROI or lesion, if we assume it is a lesion, the following masks are created:</p>
<ol>
<li>Intralesional</li>
<li>Perilesional (15 mm rim around the lesion)</li>
<li>Hemisphere (ipsilateral to lesion)</li>
<li>Contralateral version of 1</li>
<li>Contralateral version of 2</li>
<li>Contralateral version of 3</li>
</ol>
<p>All these masks are masked by a brainmask (pGM+pWM)&gt;0.5</p>
<p>This function performs the following steps:</p>
<ol>
<li>If lesion is empty, skip this &amp; delete the file</li>
<li>BrainMasking</li>
<li>Create hemispheres</li>
<li>Save mutually exclusive masks</li>
<li>Create tsv-sidecar containing the names of the ROIs</li>
<li>Visual QC</li>
</ol>
<hr />
<h3 id="xasl_im_m0erodesmoothextrapolatem">xASL_im_M0ErodeSmoothExtrapolate.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[ImOut] = xASL_im_M0ErodeSmoothExtrapolate(ImIn, x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function erodes, smooths &amp; extrapolates M0 in standard space.
It assumes that the M0 image is in standard space &amp; that the GM &amp; WM probability maps
are aligned. Here, we mask the M0, to remove high CSF signal and low extracranial signal,
enabling us to smooth the image without inserting wrong signal. See also
the ExploreASL manuscript for a more extensive explanation. This function
performs the following steps:</p>
<ol>
<li>Mask: Load segmentations, create structural mask</li>
<li>Mask: Create intensity-based mask to remove extracranial signal</li>
<li>Mask: Erode the combined masks</li>
<li>Mask: Determine any odd borders</li>
<li>Smoothing</li>
<li>Extrapolating only</li>
<li>Scale back to the GM M0</li>
<li>Print visual QC figure</li>
</ol>
<p>A visual QC figure is created, showing the M0 image processing steps for a single transversal slice (slice 53 in 1.5 mm MNI standard space)
OutputFile = fullfile(x.D.M0regASLdir,['M0_im_proc_' x.P.SubjectID '.jpg']);
The original M0 image (a) is masked with a (pGM+pWM)&gt;50% mask (b)
eroded with a two-voxel sphere to limit the influence of the ventricular and extracranial signal (c)
and thresholded to exclude significantly high (i.e. median + 3*mean absolute deviation (MAD)) border region values (d)
This masked M0 image is smoothed with a 16x16x16 mm full- width-half-maximum Gaussian filter (Mutsaerts et al., 2018) (e)
after which the signal at the border is smoothly extrapolated until the full image is filled (f).
Whereas the masking avoids mixing with cerebrospinal fluid or extracranial signal, the extrapolation avoids M0 division artifacts</p>
<hr />
<h3 id="xasl_im_masknegativevascularsignalm">xASL_im_MaskNegativeVascularSignal.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[NegativeMask, TreatedPWI] = xASL_quant_DetectNegativeVascularSignal(x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function segments clusters with significant negative
ASL signal. This can be tricky as there is also the negative tail of Gaussian noise
from the ASL subtraction. The image feature we use here, is that negative
vascular signal will be a relatively large region with
significant median negative value, whereas noise will be
regions with relatively small negative signal.
Negative signal from wrong background suppression timing
(e.g. in the first slice with 2D EPI) can be masked out with
this as well.
The procedure works as follows:</p>
<ol>
<li>Obtain mask of negative voxels within pGM&gt;0.5 mask</li>
<li>Obtain distribution of subzero clusters</li>
<li>Define the negative threshold</li>
<li>Create mask by thresholding whole image</li>
</ol>
<p>Note that the definition of the threshold is obtained within
the GM only, but that this threshold is applied to the full image.</p>
<p>Note that instead of the PWI path input, a CBF image should
work equally well, as we don't expect a smooth M0 biasfield
to change the distribution of negative clusters</p>
<hr />
<h3 id="xasl_im_maskpeakvascularsignalm">xASL_im_MaskPeakVascularSignal.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[MaskIM, CBF] = xASL_quant_VascularContrast(PathPWI, Path_M0, CompressionRate, ClipThresholdValue, bClip)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function searches for an acceptable high
threshold as definition of high intra-vascular ASL signal.
It also allows to compress the values here (when
bClip==true). Compression retains some variability, but limits their outlying influence
on statistics.
The procedure works as follows:</p>
<ol>
<li>Segment <strong>GM</strong> on <strong>ASL</strong> image at 80th percentile of <strong>CBF</strong> image distribution</li>
<li>For PWI &amp; CBF images, select voxels higher than median + ClipThresholdValue <strong>MAD</strong>
Vascular artifacts will have a high intensity in both images, whereas errors by division by M0 will only have a high
intensity on the M0 image, and high values due to a biasfield will only be noticeable on the PWI image</li>
<li>Combine the two created masks</li>
<li>Obtain average clipping value from selected voxels from the combined masks</li>
<li>Apply compression if requested. If not, output image will
have NaNs for intra-vascular voxels.</li>
</ol>
<p>Note that the definition of the threshold is obtained within
the GM only, but that this threshold is applied to the full
image to also remove extracranial extreme values.</p>
<p>Note that the performance may change when using this script
with or without M0, as this will change the distribution
that determines where the threshold for extremes lies.</p>
<hr />
<h3 id="xasl_im_modulationm">xASL_im_Modulation.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_im_Modulation(x)
</code></pre>

<p><strong>Description:</strong></p>
<p>Combines the transformations to create Jacobians, &amp;
multiplies the standard space segmentations with these to create volumetric
images for volumetric analyses.</p>
<hr />
<h3 id="xasl_im_normalizelabelingterritoriesm">xASL_im_NormalizeLabelingTerritories.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">image_out = xASL_im_NormalizeLabelingTerritories( imageIN, GMmask, x)
</code></pre>

<p><strong>Description:</strong></p>
<p>Normalizes per perfusion territory mask should be GM mask.</p>
<hr />
<h3 id="xasl_im_pcam">xASL_im_PCA.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[pc, score, eigenvalues, tsquare, loadings, Xmean] = xASL_im_PCA(dataIn)
</code></pre>

<p><strong>Description:</strong></p>
<p>Perform a Principal Component Analysis.</p>
<hr />
<h3 id="xasl_im_pvcbsplinem">xASL_im_PVCbspline.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[imPVEC,imCBFrec,imResidual,FWHM] = xASL_im_PVCbspline(imCBF,imPV[,bsplineNum])
</code></pre>

<p><strong>Description:</strong></p>
<p>PVC of ASL data using prior GM-,WM-partial volume maps.
Follows the principles of the PVEc algorithm by I. Asllani (MRM, 2008).
The PV-corrected CBF_GM and CBF_WM maps are approximated using an
uniformly sampled cubic B-splines.</p>
<hr />
<p>REFERENCES:
-Asllani I, Borogovac A, Brown TR. Regression algorithm correcting for
partial volume effects in arterial spin labeling MRI. Magnetic Resonance
in Medicine. 2008 Dec 1;60(6):1362-71.
-Petr J, Mutsaerts HJ, De Vita E, Steketee RM, Smits M, Nederveen AJ,
Hofheinz F, van den Hoff J, Asllani I. Effects of systematic partial
volume errors on the estimation of gray matter cerebral blood flow with
arterial spin labeling MRI. MAGMA 2018. DOI:10.1007/s10334-018-0691-y</p>
<hr />
<h3 id="xasl_im_pvckernelm">xASL_im_PVCkernel.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[imPVC,imCBFrec,imResidual] = xASL_im_PVCkernel(imCBF, imPV [,kernel,mode])
</code></pre>

<p><strong>Description:</strong></p>
<p>Partial volume correction (PVC) of ASL data using prior GM-,WM-partial volume maps.
Follows the principles of the PVC algorithm by I. Asllani (MRM, 2008).</p>
<hr />
<h3 id="xasl_im_presmoothm">xASL_im_PreSmooth.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">pathOut = xASL_im_PreSmooth(pathRef,pathSrc[,pathSmo,resRef,resSrc,srcAffinePath, bInvAffine])
</code></pre>

<p><strong>Description:</strong></p>
<p>It assumes that the FWHM is equal to voxel size, unless the real resolution is given.
Then takes into account the voxel sizes and orientation difference between the volumes, but
performs the smoothing according to the given real resolution (it is possible to supply the
resolution for just one image) - this should be helpful primarily when the
It creates a Gaussian covariance matrix for the reference, transforms it according to
the difference between the two images a produces the Gaussian covariance matrix
of the pre-smoothing in the source space. Then it performs the smoothing.</p>
<p>The following steps are performed:</p>
<ol>
<li>Obtain the voxel size</li>
<li>Skip this function if reference resolution is equal to, or lower than source resolution</li>
<li>Deal with affine transformation</li>
<li>Obtain the transformation matrix from the Reference to the Source space</li>
<li>Apply the smoothing filter on the source image(s)</li>
<li>Save the smoothed image</li>
</ol>
<hr />
<h3 id="xasl_im_processm0conventionalm">xASL_im_ProcessM0Conventional.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[Corr_M0] = xASL_im_ProcessM0Conventional(ImIn, x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function uses the conventional M0 masking,
and only a little smoothing, following what Philips uses for its 3D
{{GRASE}}. Advantages of the newer M0 processing in ExploreASL are the lack
of use of <strong>M0</strong> threshold-based masking, the removal of high CSF values and
higher <strong>SNR</strong> for <strong>ASL</strong> division.</p>
<hr />
<h3 id="xasl_im_projectlabelsoverdatam">xASL_im_ProjectLabelsOverData.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">OutputIM = xASL_im_ProjectLabelsOverData(DataIM,LabelIM,x,ScaleFactorData,ScaleFactorLabel)
</code></pre>

<p><strong>Description:</strong></p>
<p>This script projects labels over an image,
but works only in 2D. Make sure to make a 2D image from a 3D or 4D image
using xASL_vis_TransformData2View.m
can be used in combination with xASL_vis_Imwrite.m</p>
<hr />
<h3 id="xasl_im_replacelabelm">xASL_im_ReplaceLabel.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_im_ReplaceLabel(pathNifti, LabelNumbersOld, LabelNumbersNew, pathNewNifti)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function replaces label values/numbers inside a NIfTI
image, by the following steps:</p>
<ol>
<li>Load NIfTI</li>
<li>Replace numbers</li>
<li>Save NIfTI</li>
</ol>
<hr />
<h3 id="xasl_im_resamplelinearfairm">xASL_im_ResampleLinearFair.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[output_res]=xASL_im_ResampleLinearFair(im_input,newsize)
</code></pre>

<p><strong>Description:</strong></p>
<p>Downsample (or upsample, works similarly) old_res image to
low_res image, trilinear.
We recommend using "xASL_spm_Resample" instead, because of
better performance.</p>
<p><strong>NB:</strong> new_res should fit exactly integer fold in old_res</p>
<p><strong>NB:</strong> all dimensions of new_res should have equal size</p>
<hr />
<h3 id="xasl_im_restoreorientationm">xASL_im_RestoreOrientation.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_im_RestoreOrientation(PathNIfTI)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function reverts the NIfTI header orientation matrix
to the original orientation from the scanner/dcm2nii conversion.</p>
<hr />
<h3 id="xasl_im_skullstripm">xASL_im_SkullStrip.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_im_SkullStrip(InPath, PathMNIMask, x, OutPath)
</code></pre>

<p><strong>Description:</strong></p>
<p>Creates skull-stripped <strong>T1w</strong> image based on <strong>MNI</strong> -&gt; native
space registration from segmentation.</p>
<hr />
<h3 id="xasl_im_smooth3dm">xASL_im_Smooth3D.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[imSmo, imGaussX, imGaussY, imGaussZ] = xASL_im_Smooth3D(imIn, sigma[, PSFtype])
</code></pre>

<p><strong>Description:</strong></p>
<p>It smooths the 3D image with a 3D kernels that has defined the shape and SD of the smoothing separably in three dimension.</p>
<hr />
<h3 id="xasl_im_splitimagelabelsm">xASL_im_SplitImageLabels.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_im_SplitImageLabels(ImagePaths, LabelTable[, OutputFolder, bOverwrite, ResampleDir, SubRegExp])
</code></pre>

<p><strong>Description:</strong></p>
<p>This function allows extracting of labels from a NIfTI file
containing multiple labels, into single NIfTI files each
containing a single label.
Not all existing labels need to be extracted.</p>
<p>The following steps are performed:</p>
<ol>
<li>Load TSV file</li>
<li>Process images</li>
</ol>
<hr />
<h3 id="xasl_im_upsamplem">xASL_im_Upsample.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_im_Upsample(PathOrig, PathDest, NewVoxelSize, LeaveEmpty, PaddingDim, Kernel)
</code></pre>

<p><strong>Description:</strong></p>
<p>Upsamples an ASL image, without changing the orientation
matrix, which can be used e.g. for PVEc in higher
resolution but same space.</p>
<hr />
<h3 id="xasl_im_zeroedgesm">xASL_im_ZeroEdges.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[IM] = xASL_im_ZeroEdges(IM[, EdgeThicknessPerc])
</code></pre>

<p><strong>Description:</strong></p>
<p>Resampling can sometimes give some strange errors near image edges. These should be NaNs,
but sometimes can be zeros or ones, or even weird numbers. For resampling, NaNs should be set to 0 (this is done
in another function) as they can influence the resampling (depending on the transformation matrix). To be sure
that the edges are nicely fixed, this function sets a border at the image matrix edges to zero.</p>
<hr />
<h3 id="xasl_im_dilateroim">xASL_im_dilateROI.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_im_dilateROI(PathIn, [PathOut, minVolume])
</code></pre>

<p><strong>Description:</strong></p>
<p>The function loads a binary image from PathIn and if smaller than the defined volume (40 mL by default) it
dilates it with a 3x3 sphere element until a minimal volume is reached. When it is small enough, it is saved to PathOut.
40 mm^3 is equal to 3 voxels in all directions in DARTEL space, or around the highest obtainable ASL effective resolution (3x3x4 mm).</p>
<hr />
<h3 id="xasl_im_rotatem">xASL_im_rotate.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">rotated = xASL_im_rotate(im, angle)
</code></pre>

<p><strong>Description:</strong></p>
<p>Simple rotation of the first two dimension of a ND image by
0, 90, 180, 270 degrees.</p>
<h2 id="initialization">Initialization</h2>
<hr />
<h3 id="xasl_init_defaulteffectiveresolutionm">xASL_init_DefaultEffectiveResolution.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[EffectiveResolution] = xASL_init_DefaultEffectiveResolution(PathASL, x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This ExploreASL module provides an educated guess on
the effective spatial resolution of ASL. This may depend on the
combination of acquisition PSF, reconstruction filter, head motion.
Note that the derived/processed images may have a lower effective
resolution because of smoothing effects from interpolation. Note that
this remains an educated-guess, the actual FWHM may still differ,
especially for 3D GRASE sequences, where e.g. the choice of number of
segments can affect the smoothness.</p>
<p>This function conducts the following steps:</p>
<ol>
<li>Educated-guess FWHM</li>
<li>Attempt accounting for in-plane interpolation in reconstruction</li>
<li>Calculate and report effective spatial resolution</li>
</ol>
<hr />
<h3 id="xasl_init_definestudydatam">xASL_init_DefineStudyData.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x] = xASL_init_DefineStudyData(x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This initialization wrapper initializes the parameters for
this pipeline run, i.e. subjects, sessions (runs), timepoints (visits),
exclusions, sites, cohorts etc.</p>
<p>Note that ASL sessions are defined here as what BIDS calls "runs".</p>
<p>The "longitudinal_Registration functions here manage different
TimePoints, which is what BIDS calls "visits".
With different structural scans, from the same participant. This is
managed by subject name suffixes _1 _2 _n, and can be used for comparing
visits in the population module, or running SPM's longitudinal within-subject
registration.</p>
<p>Parallelization is allowed here by calling ExploreASL different times,
where it divides the subjects/images for processing across the nWorkers,
using iWorker as the reference for the part that the current ExploreASL
call will process. This requires having a Matlab license that can be
started multiple times on a server, or alternatively running the
ExploreASL compilation, and doesn't require the Matlab parallel toolbox.</p>
<p>This function exists from the following parts:</p>
<ol>
<li>Manage included &amp; excluded subjects</li>
<li>Create dummy defaults (exclusion list, ASL sessions)</li>
<li>Create list of total baseline &amp; follow-up subjects, before exclusions</li>
<li>Create TimePoint data-lists</li>
<li>Manage exclusions</li>
<li>Add sessions as statistical variable, if they exist</li>
<li>Parallelization: If running parallel, select cases for this worker</li>
<li>Add Longitudinal TimePoints (different T1 volumes) as covariate/set, after excluding</li>
<li>Load &amp; add statistical variables</li>
<li>Make x.S.SetsOptions horizontal if vertical by transposing</li>
<li>Create single site dummy, if there were no sites specified</li>
<li>Check for time points sets</li>
<li>Create list of baseline &amp; follow-up subjects (i.e. after exclusion)</li>
<li>Check what excluded from which TimePoints</li>
</ol>
<hr />
<h3 id="xasl_init_filesystemm">xASL_init_FileSystem.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x] = xASL_init_FileSystem(x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function initializes the file system used throughout ExploreASL, for processing a single dataset/scan.
It is repeated for each scan, and runs the following parts:</p>
<ol>
<li>Create folders</li>
<li>Subject/session definitions</li>
<li>Add prefixes &amp; suffixes</li>
<li>Add Subject-specific prefixes</li>
<li>Add sidecars</li>
<li>Add atlas paths</li>
</ol>
<hr />
<h3 id="xasl_init_initializemutexm">xASL_init_InitializeMutex.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x] = xASL_init_InitializeMutex(x, ModuleName)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function initializes the mutex/lock system of
ExploreASL for a module. Mutex (for mutual exclusion) is a
synchronization mechanism for enforcing limits of access to data (here a
module for a single scan) to allow parallelization. It also allows
stopping and continuing of ExploreASL. This function runs the following
steps:</p>
<ol>
<li>Lock folder management</li>
<li>Initialize mutex object</li>
</ol>
<hr />
<h3 id="xasl_init_loadmetadatam">xASL_init_LoadMetadata.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x] = xASL_init_LoadMetadata(x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function loads all metadata used in the study, either statistical
covariates (age, MMSE) or groups to compare between (site, sequence,
cohort), or parameters to be used in quantification/image processing</p>
<p>These parameters should be provided in .mat files in the root analysis
folder. Each .mat file should contain a single type of metadata, and
the filename should equal the variable name.
Metadata content should be a cell array
with subjects as first column and metadata as last column.
Sessions (runs) can be included as second column.</p>
<p>Metadata can be in any string or numerical format.</p>
<p>participants.tsv is now added per BIDS. It looks for metadata in participants.tsv first,
before going through the mat-files</p>
<p>This function iterates through the following steps for each variable:</p>
<ol>
<li>Admin (what nOptions do we call ordinal, convert subject numeric to string, remove white spaces from data)</li>
<li>Get unique list of data options &amp; check for missing data</li>
<li>Deal with data format (correct NaNs, deal with numeric vs strings)</li>
<li>Distinguish continous data (e.g. age) or ordinal data (groups to compare, e.g. cohort)</li>
<li>Check if data is complete for all subjects</li>
<li>Include complete data in x.S.SETS</li>
</ol>
<hr />
<h3 id="xasl_init_longitudinalregistrationm">xASL_init_LongitudinalRegistration.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[SubjectNlist, TimePoint, IsSubject, SubjectID_FirstVolume] = xASL_init_LongitudinalRegistration(x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function initializes the longitudinal registration for ExploreASL,
which implements the SPM longitudinal registration.</p>
<p>This function recognizes and defines visits (i.e. multiple scans per
subject) in the initialization of ExploreASL, based on the suffixes _1 _2
_n in the subject names (identified as foldernames).</p>
<p>Specifically, this function is called in the registration modules LongReg and DARTEL,
the first carrying out within-subject registration and
the second between-subject registration, based on the first time point
only.
For the first function, we specify here a list of visits/timepoints that
should be registered longitudinally, for the second function we specify a
list of first visits only, as the between-subject registration in
ExploreASL is based on the first scan (as opposed to the average
subject's scan).</p>
<p>This function runs the following steps:</p>
<ol>
<li>Get TimePoint-list (list of visits)</li>
<li>Find subject IDs</li>
</ol>
<hr />
<h3 id="xasl_init_visualizationsettingsm">xASL_init_VisualizationSettings.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x] = xASL_init_VisualizationSettings(x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function defines several visualization settings are
used throughout ExploreASL's pipeline and tools, assuming a [121 145 121]
matrix with 1.5 mm isotropic resolution in MNI space.</p>
<h2 id="input-and-output">Input and Output</h2>
<hr />
<h3 id="xasl_io_createniftim">xASL_io_CreateNifti.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_io_CreateNifti(pathNewNifti, imNew, resMat, nBits, bGZip)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function creates a new NIfTI file, using the SPM "nifti" functionality, with the parameters
specified as input arguments. This function performs the
following steps:</p>
<ol>
<li>Initialize NIfTI</li>
<li>Choose datatype (bit resolution)</li>
<li>Create scale slopes</li>
<li>Create orientation matrix</li>
<li>Write the new NIfTI, image matrix &amp; scale slopes</li>
<li>Zip and deal with zipping (.nii vs. .nii.gz)</li>
</ol>
<hr />
<h3 id="xasl_io_dcmtkreadm">xASL_io_DcmtkRead.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">header = xASL_io_DcmtkRead(filepath, bPixel)
</code></pre>

<p><strong>Description:</strong></p>
<p>SHORT  Reads DICOM headers using DCMTK</p>
<p>FORMAT: header = xASL_io_DcmtkRead(filepath, bPixel)</p>
<p>INPUT:
filepath (string) - full path to the DICOM file
bPixel (bool) - read pixel data, default 0
OUTPUT:
header (structure) - structure containing parsed DICOM header</p>
<p>Calls the MEX function that uses DCMTK library to read the DICOM header.
To change which parameters are read and their names - the MEX file needs to be edited.
This function also corrects formating of certain parameters.</p>
<hr />
<h3 id="xasl_io_exportvtkm">xASL_io_ExportVTK.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_io_ExportVTK(nifti, [mask, exportPath])
</code></pre>

<p><strong>Description:</strong></p>
<p>Export a VTK image file based on a 3D NIFTI or a 3D/4D image matrix.
4D images will be exported as a VTK time series (export-1.vtk, export-2.vtk, etc.).
This script uses vtkwrite (MIT License, Copyright 2016, Joe Yeh).</p>
<hr />
<h3 id="xasl_io_makenifti4dicomm">xASL_io_MakeNifti4DICOM.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_io_MakeNifti4DICOM(PathIn, x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function converts a NIfTI file to one that is ready to convert to DICOM for
PACS visualization purposes:</p>
<p>For scaling/visualization:</p>
<ol>
<li>Remove peak signal</li>
<li>Remove valley signal</li>
<li>Remove NaNs</li>
<li>Rescale to 12 bit integers</li>
<li>Save NIfTI. We also zip the NIfTI as this NIfTI won't be opened by ExploreASL</li>
<li>Manage scale slope/datatype</li>
<li>Apply original orientation</li>
<li>Zip NIfTI</li>
</ol>
<hr />
<h3 id="xasl_io_pairwisesubtractionm">xASL_io_PairwiseSubtraction.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_io_PairwiseSubtraction(InputFile,outputPath,do_mask,switch_sign)
</code></pre>

<p><strong>Description:</strong></p>
<p>Subtracts controls from labels and takes mean.
Creates new perfusion-weighted delta_M file, prefaced with 's'.
Converts into single precision floating point values (32 bit), removes scale slope.
Only runs if ['s' input_file_ASL] doesn't exist.
Remember to consider motion correction/ SPM realign (isotropically).
Alternative to this function is robust fit (Camille Maumet).</p>
<hr />
<h3 id="xasl_io_readdataparm">xASL_io_ReadDataPar.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x] = xASL_io_ReadDataPar(pathDataPar)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function reads the data-parameter file, which is a file containing settings specific to processing a certain dataset or study
(abbreviated as DataPar) and creates the x-structure out of it. The file can be in .json or .m format.
The input file name pathDataPar is given as a string or character array. The output is the x structure. It only loads the data, removes the x-prefixes,
but keeps all the field names and units. It doesn't do any conversions to or from BIDS. The
only added value to normal json-read is that it detects invalid entries (numbers in strings, and
weird arrays), converts them correctly and reports this incorrect entries so that they can be manually
fixed. Also, if an .m file is provided, it converts and saves it to a JSON file (doesn't overwrite)
and reports that you should stop using .m files.</p>
<hr />
<h3 id="xasl_io_readthedicomm">xASL_io_ReadTheDicom.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[Info] = xASL_io_ReadTheDicom(bUseDCMTK, DicomPath)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function tries to read a DICOM and throws a warning if it fails to</p>
<hr />
<h3 id="xasl_io_splitaslm">xASL_io_SplitASL.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_io_SplitASL(inPath[, iM0, iDummy])
</code></pre>

<p><strong>Description:</strong></p>
<p>This function splits ASL4D &amp; M0 &amp; Dummy images if they were in the same sequence.
If dcm2niiX has already splitted the ASL4D NIfTI, this is reconstructed first.
If no M0 exists, or only ASL splitting is desired, leave iM0 empty ([]).
The dummy scans can be excluded from the ASL sequence during the splitting. Both iM0 and iDummy
are the absolute positions of both in the original time series</p>
<p>Vendor product sequence examples:
GE 3D spiral sometimes puts the M0 at the last volume of the series -&gt; iM0 = [2];
Philips 3D GRASE puts the M0 as control-label volume pair -&gt; iM0 = [1 2];
Siemens 3D GRASE puts the M0 as the first volume -&gt; iM0 = 1;
Some Siemens 3D GRASE puts a second Dummy control image -&gt; iDummy = 2;</p>
<ol>
<li>Input parameter admin</li>
<li>Prepare paths</li>
<li>First concatenate NIfTIs</li>
<li>Save M0 NIfTI</li>
<li>Determine ASL indices</li>
<li>Save ASL4D NIfTI</li>
<li>Split relevant JSON parameters/arrays</li>
<li>Split ASL4D_aslContext.tsv</li>
<li>Modify JSON fields</li>
<li>Copy sidecars</li>
</ol>
<hr />
<h3 id="xasl_io_dcm2niim">xASL_io_dcm2nii.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[niifiles, ScanNameOut, usedinput, msg] = xASL_io_dcm2nii(inpath, destdir, series_name, varargin)
</code></pre>

<p><strong>Description:</strong></p>
<p>Convert DICOM NIfTI/BIDS format using the dcm2nii command line utility.</p>
<ol>
<li>Initial settings</li>
<li>Parse parameters</li>
<li>Locate dcm2nii executable</li>
<li>Set default arguments dcm2nii</li>
<li>Set dcm2niiX initialization loading</li>
<li>Check if we are reading a DICOM folder</li>
<li>Check for existing targets</li>
<li>Create temporary subfolder for converting</li>
<li>Run dcm2nii and move files to final destination using specified series name</li>
<li>Cleanup temp</li>
<li>Optionally return the used input file</li>
</ol>
<hr />
<h3 id="xasl_num2strm">xASL_num2str.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[DataOut] = xASL_num2str(DataIn[, f, bConcatenate, strDelimiter])
</code></pre>

<p><strong>Description:</strong></p>
<p>When the provided data is numeric, this function will convert the number to string/characters,
rewriting NaN into 'n/a' (BIDS convention) but otherwise preserving the Matlab builtin functionality, also for the second argument "f".
If non-numeric data is provided, it is bypassed (avoiding any issues "num2str" will have with non-numeric data).
It can concatenate an array/matrix of strings, taking first the columns in the first row, and then going across the rows.
See builtin num2str for more details</p>
<h2 id="qc">QC</h2>
<hr />
<h3 id="xasl_qc_asymmetryindexm">xASL_qc_AsymmetryIndex.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[AI_perc] = xASL_qc_AsymmetryIndex(ImageIn)
</code></pre>

<p><strong>Description:</strong></p>
<p>Extract voxel-wise asymmetry index for QC purposes.</p>
<hr />
<h3 id="xasl_qc_cat12_iqrm">xASL_qc_CAT12_IQR.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[QA_Output] = xASL_qc_CAT12_IQR(InputImage, InputC1, InputC2, InputC3, bFLAIR)
</code></pre>

<p><strong>Description:</strong></p>
<p>Prepare and run CAT12s QC parameters (also for other images).</p>
<hr />
<h3 id="xasl_qc_collectparametersm">xASL_qc_CollectParameters.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">x = xASL_qc_CollectParameters(x, iSubject, ScanType, CollectQCFunction)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function collects QC parameters for a module.</p>
<hr />
<h3 id="xasl_qc_collectqc_aslm">xASL_qc_CollectQC_ASL.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x] = xASL_qc_CollectQC_ASL(x, iSubject)
</code></pre>

<p><strong>Description:</strong></p>
<p>This functions collects QC parameters for the ASL module</p>
<p>These are stored in x.Output.ASL:</p>
<p>ID - SubjectName
ASL_LR_flip_YesNo - Checks whether any image processing changed the left-right orientation
by checking whether the determinant differs between nii.mat &amp; nii.mat0
SPM realign (too much motion is suspicious)
MotionMean_mm    - mean motion
MotionExcl_Perc  - percentage of excluded outliers
MotionMax_mm     - max motion
MotionSD_mm      - SD motion</p>
<p>ASL quantification (strange average CBF, or strange GM-WM contrast)
ASL acquisition parameters (should be fairly consistent over subjects/scans):
TE - echo time
TR - repetition time
RescaleSlope - Philips
Scaleslope - Philips
Matrix X Y Z - matrix size
Matrix Z - number of slices
VoxelSize X Y - in plane resolution
VoxelSize Z - slice thickness
RigidBody2Anat_mm - Net Displacement Vector (RMS) from ASL to T1w image (mm) from registration</p>
<hr />
<h3 id="xasl_qc_collectqc_structuralm">xASL_qc_CollectQC_Structural.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x] = xASL_qc_CollectQC_Structural(x, iSubject)
</code></pre>

<p><strong>Description:</strong></p>
<p>This functions collects QC parameters for the structural module
These are stored in x.Output.Structural:
ID - SubjectName
T1w_LR_flip_YesNo - Checks whether any image processing changed the left-right orientation
by checking whether the determinant differs between nii.mat &amp; nii.mat0
LST output:
WMH_vol_mL        - WMH volume
WMH_n             - WMH number of lesions
CAT12 output:
T1w_IQR_Perc      - CAT12 IQR quality parameter for T1w
volumetric: GM_vol_mL, WM_vol_mL, CSF_vol_mL, ICV_vol_mL, GM_ICV_Ratio</p>
<hr />
<h3 id="xasl_qc_collectqc_funcm">xASL_qc_CollectQC_func.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x] = xASL_qc_CollectQC_func(x, iSubject)
</code></pre>

<p><strong>Description:</strong></p>
<p>This functions collects QC parameters for the func module</p>
<p>These are stored in x.Output.func:</p>
<p>ID - SubjectName
func_LR_flip_YesNo - Checks whether any image processing changed the left-right orientation
by checking whether the determinant differs between nii.mat &amp; nii.mat0
SPM realign (too much motion is suspicious)
MotionMean_mm    - mean motion
MotionExcl_Perc  - percentage of excluded outliers
MotionMax_mm     - max motion
MotionSD_mm      - SD motion
func quantification (strange average CBF, or strange GM-WM contrast)
CBF_GM_Median_mL100gmin - median GM CBF
CBF_WM_Median_mL100gmin - median WM CBF
SpatialCoV_GM_Perc      - GM spatial CoV
SpatialCoV_WM_Perc      - WM spatial CoV
CBF_GM_WM_Ratio         - GM-WM CBF ratio</p>
<p>func acquisition parameters (should be fairly consistent over subjects/scans):
TE - echo time
TR - repetition time
RescaleSlope - Philips
Scaleslope - Philips
Matrix X Y Z - matrix size
Matrix Z - number of slices
VoxelSize X Y - in plane resolution
VoxelSize Z - slice thickness
RigidBody2Anat_mm - Net Displacement Vector (RMS) from func to T1w image (mm) from registration</p>
<hr />
<h3 id="xasl_qc_collectsoftwareversionsm">xASL_qc_CollectSoftwareVersions.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x] = xASL_qc_CollectSoftwareVersions(x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This functions collects software versions for Matlab, SPM, CAT, LST &amp; ExploreASL
If FSL is installed, it will obtain its version as well.
These are stored in x.Output.Software.</p>
<hr />
<h3 id="xasl_qc_comparetemplatem">xASL_qc_CompareTemplate.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[QC] = xASL_qc_CompareTemplate(x, ModPrefix, iSubjectSession)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function computes several advanced template-based QC parameters:
RMSE_Perc        - Root Mean Square Error between image and template (%)
nRMSE_Perc       - Same but then normalized
AI_Perc          - Asymmetry Index between image and template (%)
Mean_SSIM_Perc   - mean structural similarity index -&gt; xASL_stat_MeanSSIM.m
PeakSNR_Ratio    - peak signal-to-noise ratio -&gt; xASL_stat_PSNR.m</p>
<hr />
<h3 id="xasl_qc_computefovcoveragem">xASL_qc_ComputeFoVCoverage.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[CoveragePerc] = xASL_qc_ComputeFoVCoverage(InputPath, x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function computes the intersection/overlap between
brainmask on field-of-view (FoV) of low resolution image
(native space) &amp; the same brainmask with expanded FoV.
It uses the pGM+pWM+pCSF as brainmask
This assumes that the structural reference image has full brain coverage,
and was properly segmented into GM, WM and CSF
Also, we assume that the InputPath contains a single 3D volume</p>
<hr />
<h3 id="xasl_qc_computeniftiorientationm">xASL_qc_ComputeNiftiOrientation.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[structOut] = xASL_qc_ComputeNiftiOrientation(PathNIfTI[, structIn])
</code></pre>

<p><strong>Description:</strong></p>
<p>It loads the input Nifti, finds its dimension, voxel size and a net vector distance from its
original position before registration. Adds all these information into an output structure structOut
while copying all from structIn and keeping it intact.</p>
<hr />
<h3 id="xasl_qc_createpdfm">xASL_qc_CreatePDF.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_qc_CreatePDF(x[, DoSubject])
</code></pre>

<p><strong>Description:</strong></p>
<p>This function iterates over all values in x.Output and all
images in x.Output_im, and prints them in a PDF file.
x.Output &amp; x.Output_im should contain the QC/result output
of all ExploreASL pipeline steps.</p>
<p>Further code explanation:
Below, using the Matlab &amp; SPM Figure tools we create an image, which is
then printed to a PDF file</p>
<ul>
<li>fg = the main Figure handle</li>
<li>ax = "axes" handles, these are objects containing either 1) text or 2)
images, with fg as "parent" (1) &amp; (2) images have ax as "parent"
Positions are calculated in such a way that 4 categories can be printed,
which will be the first 4 fields found in x.Output
then allowing 8 single slice images, and 15 text lines (name &amp; value
columns)</li>
</ul>
<hr />
<h3 id="xasl_qc_fa_outliersm">xASL_qc_FA_Outliers.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[FA_Outliers_mL] = xASL_qc_FA_Outliers(InputFA)
</code></pre>

<p><strong>Description:</strong></p>
<p>Extract the number of FA outliers, i.e. values of FA
above 1 or below 0, from a FA image.</p>
<hr />
<h3 id="xasl_qc_obtainqccategoriesfromjpgm">xASL_qc_ObtainQCCategoriesFromJPG.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_qc_ObtainQCCategoriesFromJPG(x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function obtains QC categories as covariant/set,
based on the JPGs in //Population/ASLCheck. These are initially sorted by
spatial CoV, and should be visually checked &amp; put in the correct folder.</p>
<hr />
<hr />
<h3 id="xasl_qc_pcpstructuralm">xASL_qc_PCPStructural.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[anatQA] = xASL_qc_PCPStructural(PathT1, Pathc1T1, Pathc2T1, x, PopPathT1)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function computes several anatomical QC parameters as proposed in SPM Univariate Plus:</p>
<ul>
<li>WM_ref_vol_mL    - volume of the WM reference region (mL)</li>
<li>WMref_vol_Perc   - same but as percentage of total WM volume</li>
<li>SNR_GM           - GM signal-to-Noise Ratio (SNR), ie the mean intensity within GM divided
by SD of WM reference region. Higher = better.</li>
<li>CNR_GM_WM        - GM-WM Contrast-to-Noise Ratio (CNR), i.e. the mean of GM - mean of WM
divided by the SD of the WM reference region. Higher = better.</li>
<li>FBER_WMref_Ratio - Foreground to Background Energy Ratio (FBER), i.e. the variance of voxels within the brain (in pGM+pWM mask)
divided by the variance of voxels in the WM reference region. Higher = better.</li>
<li>EFC_bits         - Shannon Entropy Focus Criterion (EFC), i.e. the entropy of voxel intensities proportional to the maximum
possibly entropy for a similarly sized image. Indicates ghosting and head motion-induced blurring. Lower = better.</li>
<li>Mean_AI_Perc     - mean relative voxel-wise absolute Asymmetry Index (AI) within the brain (pGM+pWM mask) (%)</li>
<li>SD               - same but SD (%)</li>
</ul>
<p>REFERENCES:
Preprocessed Connectome Project Quality Assurance Protocol (QAP):
http://preprocessed-connectomes-project.org/quality-assessment-protocol/
http://ieeexplore.ieee.org/document/650886/</p>
<hr />
<h3 id="xasl_qc_printorientationm">xASL_qc_PrintOrientation.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_qc_PrintOrientation(DIR, reg_exp_INPUT,OUTPUT_DIR,Name);
</code></pre>

<p><strong>Description:</strong></p>
<p>Check orientation of niftis, useful to detect
accidental left-right flips (all other flips will be visible).
translations, rotations or shears are not to be worried about,
only negative zooms. This can be detected by negative determinants.
So orientation parameters and determinants should be similar across
all scans from single scanner/coil, and registration should not
give negative determinant.</p>
<hr />
<h3 id="xasl_qc_tanimotocoeffm">xASL_qc_TanimotoCoeff.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">TC = xASL_qc_TanimotoCoeff(Image1, Image2[, imMask, type])
</code></pre>

<p><strong>Description:</strong></p>
<p>Compares images Image1 and Image2 within the mask imMask. TYPE specifies the input data type.</p>
<p>RATIONALE:   Note that the Tanimoto Coefficient is a measure of image
overlap/intersection, similar to the Dice coefficient. With
the option type 3, this is a fuzzy coefficient, which
doesn't require to convert the two images to a binary mask.
The TC can be interpreted as a stringent Kappa, ranging from
0 (completely dissimilar) to 100% (identical images).
Assuming that perfect registration should not lead to
identical images but still retain physiological differences,
TC&gt;70% can be regarded as excellent image agreement. The TC
will be overestimated when smoothing, but this may lead to more stable artifact detection.</p>
<hr />
<h3 id="xasl_qc_wadqcdcm">xASL_qc_WADQCDC.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_qc_WADQCDC(x, iSubject[, ScanType])
</code></pre>

<p><strong>Description:</strong></p>
<p>This QC function runs WAD-QC specific Python script to zip QC information &amp;
incorporate this into a DICOM field for analysis on the
WAD-QC server, by the following:</p>
<ol>
<li>Define QCDC script: this is the Python script written by
Gaspare, edited by Joost Kuijer &amp; copied to the EPAD
CustomScripts folder of ExploreASL</li>
<li>Python installation location is checked, with several known
locations, for several servers. If we cannot find it,
the QCDC is not ran</li>
<li>Previous QCDC results are cleaned. QCDC stores all its
results in a separate folder (Something like 2 layers up from the current
folder, here referred to as QCDCDir = [x.D.ROOT 'qcdc_output'])
from these result files, only the filled DICOM file is
interesting, all the rest are copies of the QC results
that we embedded into the DICOM</li>
<li>Run QCDC (if Python installation detected)
The following files need to be set as executable:
('QCDC', 'src', 'qc_data_collector.py')
('QCDC', 'src', 'bash', 'create_dcm_only_wadqc.sh')
('QCDC', 'src', 'bash', 'sendwadqc.sh')</li>
<li>Clean up new QCDC results (as above) &amp; move the filled
DICOM to ['qcdc_' DummyFile] within the current ScanType
folder</li>
<li>Sending the DICOM to the WAD-QC server using storescu</li>
</ol>
<hr />
<h3 id="xasl_qc_wadqc_generatedescriptorm">xASL_qc_WADQC_GenerateDescriptor.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_qc_WADQC_GenerateDescriptor(x, iSubject)
</code></pre>

<p><strong>Description:</strong></p>
<p>This QC function generates a JSON descriptor for Gaspare'
QCDC script, by the following steps:</p>
<ul>
<li>a) include information about where to find the dummy DICOM (i.e. placeholder DICOM)</li>
<li>b) For ExploreASL' QC fields (as passed through in
x.Output), here we note all these QC fields for each
ScanType, as the x.Output should have been collected
equally in the QC file 'QC_collection_SubjectName.json'
by function xASL_qc_CollectParameters</li>
<li>c) Subfunction xASL_qc_WADQC_images - Includes visual standard space QC
images, by searching them on prescribed paths within the
Population folder (where currently all derivatives reside)</li>
<li>d) Insert the PDF report; this PDF report is
subject-specific, not scan-specific. For completeness it
is added to each QCDC descriptor</li>
<li>e) Add WAD-QC server details (i.e. IP address etc)</li>
<li>f) Save the Descriptor JSON file.</li>
</ul>
<hr />
<h3 id="xasl_qc_temporalsnrm">xASL_qc_temporalSNR.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">tSNR = xASL_qc_temporalSNR(pathIm4D,pathImTissueProb)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function computes several temporal SNR QC parameters as proposed in SPM Univariate Plus:
tSNR.tSNR_GM_Ratio      : mean GM signal / std GM over time
tSNR.tSNR.tSNR_WM_Ratio : mean WM signal / std WM over time
tSNR.tSNR.tSNR_CSF_Ratio: mean CSF signal / std CSF over time
tSNR.tSNR_WMref_Ratio   : mean signal/std over time in eroded deep WM
tSNR.tSNR_GMWM_Ratio    : mean (GM+WM) signal / sqrt(std(GM+WM)^2+std(WMref)^2)
tSNR.tSNR_GMWM_WMref_Ratio: mean (GM+WM) signal / std WMref over time
tSNR.tSNR_Physio2Thermal_Ratio: sqrt((tSNR(GM+WM)/tSNR_GMWM_WMref_Ratio))^2-1)
tSNR.tSNR_Slope_Corr:</p>
<p>Differences to the SPM U+ suggestion:</p>
<ul>
<li>eroded WM is used for estimating background noise</li>
<li>Brainmask is determined in the same way as the structural anatQC,</li>
<li>CSF is determined from the pGM&amp;pWM maps;</li>
</ul>
<p>REFERENCES:
1. Thomas Liu (2016). Noise contributions to the fMRI signal: An overview NeuroImage, 343, 141-151
http://dx.doi.org/10.1016/j.neuroimage.2016.09.008
2. Cesar Caballero-Gaudes and Richard C. Reynolds (2016). Methods For Cleaning The BOLD fMRI Signal. NeuroImage, 154,128-149
3. Lawrence Wald and Jonathan R Polimeni (2016). Impacting the effect of fMRI noise through
hardware and acquisition choices ??? Implications for controlling false positive rates. NeuroImage, 154,15-22
4. SPM Utility + toolbox. Cyril Pernet. https://osf.io/wn3h8/</p>
<h2 id="quantization">Quantization</h2>
<hr />
<h3 id="xasl_quant_agesex2hctm">xASL_quant_AgeSex2Hct.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[Hematocrit] = xASL_quant_AgeSex2Hct([age, sex])
</code></pre>

<p><strong>Description:</strong></p>
<p>This function estimates a participants hematocrit, based on
literature-based values for age and sex. It performs the following steps:</p>
<ol>
<li>Warning unknown age/sex</li>
<li>Imputing unknown age/sex</li>
<li>Define hematocrit per age for unknown sex</li>
<li>Define Hematocrit per age for males</li>
<li>Define Hematocrit per age for females</li>
</ol>
<hr />
<h3 id="xasl_quant_bsupcalculationm">xASL_quant_BSupCalculation.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">signalPercentage = xASL_quant_BSupCalculation(BackgroundSuppressionPulseTime, ReadoutTime[, PresaturationTime, T1Time, SliceTime, PathGraph])
</code></pre>

<p><strong>Description:</strong></p>
<p>This function computes the tissue signal percentage that
remains after background suppression pulses are played in the ASL
acquisition.
It assumes that the signal is, at first, optionally saturated by a 90 degree flip at PresaturationTime before readout.
Then follows a series of BSup pulses (times before readout are given) that do a 180 degree flip. The observed tissue relaxes with time
T1time and the signal attenuation is calculated for several slices acquired at times relative to the readout.</p>
<hr />
<h3 id="xasl_quant_basilm">xASL_quant_Basil.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[CBF_nocalib] = xASL_quant_Basil(PWI, x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This script performs quantification of the PWI using the FSL Basil pipeline. Final calibration to
physiological units is performed by dividing the quantified PWI by the M0 image/value.
This function performs the following steps:
1. Define paths
2. Delete previous BASIL output
3. Write the PWI as Nifti file for Basil to read as input
4. Create option_file that contains options which are passed to Fabber
5. Run Basil and retrieve CBF output
6. Scaling to physiological units
7. Householding</p>
<hr />
<h3 id="xasl_quant_feastm">xASL_quant_FEAST.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_quant_FEAST(x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function quantifies ATT using the FEAST equations,
using crushed and non-crushed sessions, of which the ratio is
proportional to ATT.
Note that the order of sessions should be 1) crushed 2) non-crushed</p>
<p>This function runs the following steps:</p>
<ol>
<li>Skip this function if no FEAST data available</li>
<li>Admin</li>
<li>Load data &amp; correct for timing differences (PLD etc)</li>
<li>Smooth and clip CBF maps &amp; FEAST ratio</li>
<li>Compute TT maps</li>
</ol>
<hr />
<h3 id="xasl_quant_getcontrollabelorderm">xASL_quant_GetControlLabelOrder.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[ControlIM, LabelIM, OrderContLabl] = xASL_quant_GetControlLabelOrder(FramesIn, x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function automatically checks (and corrects if required)
the control and label order of ASL timeseries
based on the larger signal in control volumes.
It supposes that data is acquired in pairs.</p>
<hr />
<h3 id="xasl_quant_hct2bloodt1m">xASL_quant_Hct2BloodT1.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">BloodT1 = xASL_quant_Hct2BloodT1(Hematocrit, Y, B0, bVerbose)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function converts hematocrit to blood T1, according to
calculations defined by Patrick Hales. With courtesy and thanks!
Note that we assume a venous O2 saturation of 68% (Yv=0.68)</p>
<p>This function performs the following steps:</p>
<ol>
<li>Check fraction vs percentage hematocrit &amp; Y, should be between 0 and 1</li>
<li>Specify defaults (Hb, Fe)</li>
<li>Perform calculation</li>
<li>Convert s to ms</li>
<li>Print what we did</li>
</ol>
<hr />
<hr />
<h3 id="xasl_quant_m0m">xASL_quant_M0.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[M0IM] = xASL_quant_M0(inputM0, x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function quantifies the M0, except for the difference in voxel size
between the M0 and ASL source data (which is scaled in
xASL_wrp_ProcessM0.m). This function runs the following steps:</p>
<ol>
<li>Correct scale slopes, if Philips</li>
<li>Convert control image with background suppression to pseudo-M0</li>
<li>Skip M0 quantification if ~x.ApplyQuantification(4)</li>
<li>Set TR specifically for GE</li>
<li>Check for correct TR values</li>
<li>Quantify the M0, either for single 3D volume or slice-wise</li>
<li>Apply custom scalefactor if requested (x.M0_GMScaleFactor)</li>
</ol>
<hr />
<h3 id="xasl_quant_singlepldm">xASL_quant_SinglePLD.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[ScaleImage[, CBF]] = xASL_quant_SinglePLD(PWI, M0_im, imSliceNumber, x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This script performs a multi-step quantification, by
initializing a ScaleImage that travels through this script &amp; gets changed by the following quantification
factors:</p>
<ol>
<li><strong>PLD scalefactor</strong> (gradient if 2D multi-slice) (if x.ApplyQuantification(3))</li>
<li><strong>Label decay scale factor</strong> for single (blood T1) - or dual-compartment (blood+tissue T1) model, CASL or PASL
Single-compartment model: Alsop MRM 2014
Dual-compartment model: Wang MRM 2002: Gevers JMRI 2012 (if x.ApplyQuantification(3))</li>
<li><strong>Scaling to physiological units</strong> [ml/gr/ms =&gt;ml/100gr/min =&gt;(60,000 ms=&gt;min)(1 gr=&gt;100gr)]
(if x.ApplyQuantification(3))</li>
<li><strong>Vendor-specific scalefactor</strong> (if x.ApplyQuantification(1) -&gt; future move to dcm2niiX stage)
Finally, we:</li>
<li>Divide PWI/M0 (if x.ApplyQuantification(5))</li>
<li>Print parameters used</li>
</ol>
<p>Note that the output always goes to the CBF image (in the
future this could go to different stages, e.g. dcm2niiX or
PWI stage)</p>
<p>Note that BASIL is also implemented, but it doesn't allow a
standard space quantification yet (it would need to use
imSliceNumber)</p>
<hr />
<h3 id="xasl_quant_slicetimingm">xASL_quant_SliceTiming.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">SliceTiming = xASL_quant_SliceTiming(x, inputIm)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function takes the x.Q.SliceReadoutTime and returns the SliceTiming parameter.
The function creates a vector (of the relatives timings for each slices) out of it with the correct
length corresponding to the number of slices in the inputIm
corresponding to the BIDS definition. It also checks the x.readout_dim, and for 3D readouts it returns 0.
It loads the image from inputIm and calculates the SliceTiming according to the number of slices in the third dimension
If a path is given, it also checks if it can find a JSON sidecar, then it loads the JSON sidecar, and looks for SliceTiming inside it. If
SliceTiming/SliceReadoutTime is found in the JSON sidecar, it prioritize it over the value in the x-struct
For reference, we use these terms:</p>
<p>SliceTiming (the BIDS parameter) - it is a vector with the same length as the number of slices and contains the timing of the start
of the readout of each slice relative to the first slice
SliceReadoutTime - Legacy xASL parameter that will be phased out. It contains either a vector matching the BIDS definition of SliceTiming
or a scalar with difference in readout times between the consecutives slices (i.e. the xASL legacy definition of SliceTiming)
SliceTimingDiff - Internal parameter in this function for calculating the time difference between consecutive slices.</p>
<ol>
<li>Admin</li>
<li>ShortestTR</li>
<li>Assign the vector value and check for vector consistency</li>
</ol>
<hr />
<h3 id="xasl_quant_slicetiming_shortesttrm">xASL_quant_SliceTiming_ShortestTR.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x] = xASL_quant_SliceTiming_ShortestTR(x)
</code></pre>

<p><strong>Description:</strong></p>
<p>When the TR is set to "shortestTR" in the ASL acquisition,
each ASL scan will have its unique TR. As this is shortest,
there won't be a delay between the readout of the last slice
and the end of the TR. Therefore, the time to read out all
slices is TR - InitialPostLabelDelay - LabelingDuration, and
dividing this by the number of slices gives the
SliceReadoutTime</p>
<h2 id="spm">SPM</h2>
<hr />
<h3 id="xasl_spm_biasfieldcorrectionm">xASL_spm_BiasfieldCorrection.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_spm_BiasfieldCorrection(PathIn, SPMdir, Quality, MaskName, PathOut)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function is a wrapper around the SPM "old segment"
function, for biasfield removal. It is tested for M0 and mean control
images. It conducts the following steps:</p>
<ol>
<li>Create implicit mask</li>
<li>Define SPM 'old segmentation' settings</li>
<li>Run SPM 'old segmentation'</li>
<li>Delete temporary files</li>
<li>Rename temporary SPM file into output file</li>
</ol>
<hr />
<h3 id="xasl_spm_affinem">xASL_spm_affine.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_spm_affine(srcPath, refPath, fwhmSrc, fwhmRef[,otherList, bDCT, bQuality])
</code></pre>

<p><strong>Description:</strong></p>
<p>This SPM wrapper runs SPM's old normalize-estimate function, which calculates the affine transformation (i.e. linear + zooming and shearing) that is required to
align the source image with the reference image. By default it does not estimate the low-degree Discrete Cosine Transform (DCT) to have a simple affine transformation
but this can be enabled in this wrapper. Also note that this affine transformation uses a correlation cost function, hence it requires the source and reference images
to have similar contrasts and resolution - or provide the resolution estimates so the smoothing can be done.
This function does not change the orientation header by default, but it allows to change those of others through the otherList. If bDCT is used or no otherList given,
it stores its estimated affine transformation as orientation difference matrix in a file with the same path but _sn.mat extension.
For the provided smoothing FWHM, note that smoothnesses combine with Pythagoras' rule (i.e. square summing).</p>
<hr />
<h3 id="xasl_spm_coregm">xASL_spm_coreg.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_spm_coreg(refPath, srcPath[, OtherList, x, sep, FastReg])
</code></pre>

<p><strong>Description:</strong></p>
<p>This SPM wrapper runs SPMs coregister-estimate function, which calculates the 6 parameter rigid-body transformation (a.k.a. linear) that is required to
align the source image with the reference image. This 6 parameter transformation (i.e. 3 XYZ translations and 3 rotations) is applied to
the orientation header of the source NIfTI image, and also to the images provided in OtherList (optional).
Note that this SPM registration function uses a normalized mutual information (NMI) by default, enabling registration between two images
with different contrast.
Note that this algorithm will use the first volume of a multi-volume NIfTI</p>
<hr />
<h3 id="xasl_spm_defacem">xASL_spm_deface.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_spm_deface(PathIn, bReplace)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function removes the face from an anatomical NIfTI
image, e.g. T1w or FLAIR, for disidentification/privacy purposes.
When this script is run after the ExploreASL structural
module, it does a pretty good job even for 2D images.
However, note that this can always fail, strip part of
the brain, or change the output of pipelines. So best not
to compare results from defaced and non-defaced images.
Also, note that defacing makes it difficult to ensure that
the FLAIR and T1w are from the same subject.</p>
<hr />
<h3 id="xasl_spm_deformationsm">xASL_spm_deformations.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_spm_deformations([x,] PathIn, PathOut[, Interpolation, InverseSpace, AffineTrans, DeformationPath])
</code></pre>

<p><strong>Description:</strong></p>
<p>This ExploreASL wrapper manages the SPM deformation tool.
It takes multiple (ExploreASL pipeline) transformations and combines/concatenates them
into a single transformation prior to applying it to the input images.
This allows to apply multiple transformations with a single interpolation, avoiding
propagation of undesired interpolation effects. Mainly used to get native
space images into standard space, or vice versa.
Best to combine as many files as possible within this function, since the
deformation calculation (which is the most computation intensive part) needs to be performed once for multi-file resampling
This function runs the following steps:</p>
<h2 id="statistics">Statistics</h2>
<hr />
<h3 id="xasl_stat_atlasforstatsm">xASL_stat_AtlasForStats.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x] = xASL_stat_AtlasForStats(x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function loads atlases, checks them, and
their ROI names, for later use as ROI definition in xASL_stat_GetROIstatistics
Note that the atlases should be integer values, or different 4rd
dimensions (i.e. multiple images), that are mutually
exclusive. This function takes the following steps:</p>
<ol>
<li>Load atlas ROI names
There should be a TSV sidecar to the atlas NIfTI file, as
explained above.</li>
<li>deal with memory mapping</li>
<li>Resample atlas 50 1.5 mm^3 MNI</li>
<li>Converted atlas with integers to 4D binary image</li>
<li>Convert/compress masks into Columns</li>
<li>Print atlas overview image</li>
</ol>
<hr />
<h3 id="xasl_stat_computediffercovm">xASL_stat_ComputeDifferCoV.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">diffCoV = xASL_stat_ComputeDifferCoV(imCBF)
diffCoV = xASL_stat_ComputeDifferCoV(imCBF,imMask)
diffCoV = xASL_stat_ComputeDifferCoV(imCBF,imMask,bPVC,imGM,imWM)
diffCoV = xASL_stat_ComputeDifferCoV(imCBF,imMask,bPVC,imGM,imWM,b3D)
</code></pre>

<p><strong>Description:</strong></p>
<p>It calculates the spatial DiffCoV value on finite part of imCBF. Optionally a mask IMMASK is provide,
and PVC is done for bPVC==2 using imGM and imWM masks and constructing
pseudoCoV from pseudoCBF image. For bPVC~=2, imGM and imWM are ignored. It is calculated in 2D or assuming also 3D edges based on B3D.
Calculate derivate spatial CoV, by summing up differences in CBF between neighbors.
The derivative uses Sobels filter.</p>
<hr />
<h3 id="xasl_stat_computemeanm">xASL_stat_ComputeMean.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[CBF_GM CBF_WM] = xASL_stat_ComputeMean(imCBF[, imMask, nMinSize, bPVC, bParametric, imGM, imWM])
</code></pre>

<p><strong>Description:</strong></p>
<p>It calculates mean or median of CBF over the mask imMask if the mask volume exceeds nMinSize. It calculates either
a mean, a median, or a mean after PVC, depending on the settings of bPVC. For the PVC options, it needs also imGM and imWM and returns the
separate PV-corrected values calculated over the entire ROI.</p>
<ol>
<li>Admin</li>
<li>Mask calculations</li>
<li>Calculate the ROI statistics
3a. No PVC and simple mean
3b. No PVC and median
3c. Simple PVC
3d. Full PVC on a region</li>
</ol>
<hr />
<h3 id="xasl_stat_computespatialcovm">xASL_stat_ComputeSpatialCoV.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">sCov = xASL_stat_ComputeSpatialCoV(imCBF[, imMask, nMinSize, bPVC, bParametric, imGM, imWM])
</code></pre>

<p><strong>Description:</strong></p>
<p>It calculates the spatial CoV value on finite part of imCBF. Optionally a mask IMMASK is provide,
ROIs of size &lt; NMINSIZE are ignored, and PVC is done for bPVC==2 using imGM and imWM masks and constructing
pseudoCoV from pseudoCBF image. For bPVC~=2, imGM and imWM are ignored</p>
<ol>
<li>Admin</li>
<li>Create masks</li>
<li>sCoV computation</li>
</ol>
<hr />
<h3 id="xasl_stat_equalvariancestestm">xASL_stat_EqualVariancesTest.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[resTest, P] = xASL_stat_EqualVariancesTest(X[, alpha, type])
</code></pre>

<p><strong>Description:</strong></p>
<p>Brown-Forsythe or Levene's test for equality of variances. The response variable is
transformed (yij = abs(xij - median(xj)) for Brown-Forsythe and yij = abs(xij - mean(xj))
for Levene's test). And then runs a one-way ANOVA F-test to check if the variances are equal.</p>
<hr />
<h3 id="xasl_stat_getroistatisticsm">xASL_stat_GetROIstatistics.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x] = xASL_stat_GetROIstatistics(x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function computes mean and spatial CoV for each ROI,
in a [1.5 1.5 1.5] mm MNI space,
with several ASL-specific adaptions:</p>
<ol>
<li>Skip ROI masks that are smaller than 1 mL
as this would be too noisy for ASL (ignored when x.S.IsASL==false)</li>
<li>Expand each ROI mask such that it has sufficient WM
content (skipped when IsASL==false)</li>
<li>Create for each ROI mask a left, right and bilateral copy</li>
<li>Iterate over all subjects:</li>
<li>a) Load partial volume maps</li>
<li>b) Correct for WMH SEGM -&gt; IS THIS STILL REQUIRED???</li>
<li>c) Load data</li>
<li>d) Show ROIs projected on ASL image</li>
<li>e) Actual data computations
Partial Volume Correction (PVC) options:
PVC==0 -&gt; perform masking only, no regression
PVC==1 -&gt; single compartment regression, for pGM
PVC==2 -&gt; dual compartment regression for pGM &amp; pWM (i.e. normal
PVC)
Here we mask out susceptibility artifacts (including
outside FoV) for all ASL computations, and also mask
out vascular artifacts for computing the mean.</li>
</ol>
<p>While other artifacts/FoV can be masked out on population
level (i.e. &gt;0.95 subjects need to have a valid signal in a
certain voxel), vascular artifacts differ too much in their
location between subjects, so we mask this on subject-level.</p>
<p>Note that the words "mask" and "ROI" are used
interchangeably throughout this function, where they can
have a different or the same meaning</p>
<p>PM: WE COULD CHANGE THIS, INTO MASK BEING USED TO EXCLUDE
VOXELS AND ROI FOR INCLUDING VOXELS</p>
<hr />
<h3 id="xasl_stat_madnanm">xASL_stat_MadNan.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">y = xASL_stat_MadNan(x[,flag, dim])
</code></pre>

<p><strong>Description:</strong></p>
<p>Calculates a Median/Mean Absolute deviation, but ignoring NaNs in the calculation.
xASL_stat_MadNan(X) or xASL_stat_MadNan(X,0) computes xASL_stat_MeanNan(ABS(X-xASL_stat_MeanNan(X))
xASL_stat_MadNan(X,1) computes xASL_stat_MedianNan(ABS(X-xASL_st_MedianNan(X)).</p>
<hr />
<h3 id="xasl_stat_meanssimm">xASL_stat_MeanSSIM.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">mssim=xASL_stat_MeanSSIM(imRef,imSrc[,dynRange])
</code></pre>

<p><strong>Description:</strong></p>
<p>Calculates the similarity index according to Want et al.</p>
<hr />
<h3 id="xasl_stat_multiplelinregm">xASL_stat_MultipleLinReg.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[b,CI,pval,stats] = xASL_stat_MultipleLinReg(X,Y[,bIntercept])
</code></pre>

<p><strong>Description:</strong></p>
<p>Performs a multiple linear regression Y=b*X+a and provides the intercept and regression coefficients beta
including their significance and confidence intervals. It calculates additionally the goodness of the fit.</p>
<hr />
<h3 id="xasl_stat_psnrm">xASL_stat_PSNR.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">PSNR=xASL_stat_PSNR(imRef,imSrc)
</code></pre>

<p><strong>Description:</strong></p>
<p>Calculates the PSNR, needs two input arguments - 3D images of the same size.
Uses 95% percentile instead of MAX.</p>
<hr />
<h3 id="xasl_stat_pairwisedicem">xASL_stat_PairwiseDice.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[DiceCoeff] = xASL_stat_PairwiseDice(GroupA, GroupB)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function obtains for two lists of images Dice
coefficients, for all possible permutations of both lists, by the
following steps:
1. Admin (check cell, image exist etc)
2. Obtain matrix of pair-wise permutations
3. Obtain DICE scores</p>
<p>PM: Allow entering one group only
PM: could extend with xASL_qc_TanimotoCoeff</p>
<hr />
<h3 id="xasl_stat_printstatsm">xASL_stat_PrintStats.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x] = xASL_stat_PrintStats(x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function prints an overview of statistics from
data that were acquired per ROI, in a TSV file. It starts by
printing covariates (called "Sets"). Rows will be
subjects/sessions, columns will be the sets and
ROI-statistics.
Any missing data will be skipped (setting them to NaN should
have happened in a previous function).</p>
<p>This function performs the following steps:</p>
<ol>
<li>First remove previous TSV-file, if already existed
printing to a TSV file can be tricky if it is opened by
Excel. Make sure to close previous versions first,
otherwise this part will crash.</li>
<li>Print overview of sets to TSV
as explained above. Uses subfunction
xASL_stat_CreateLegend to put legends. Aim is to create a
single TSV file that has a proper overview of the data,
&amp; is self-explanatory to those reading/using it.</li>
<li>Define number of ASL sessions, force to 1 in case of TT or volume metrics</li>
<li>Print the overview</li>
</ol>
<hr />
<h3 id="xasl_stat_quantilenanm">xASL_stat_QuantileNan.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">y = xASL_stat_QuantileNan(x[,quant, dim])
</code></pre>

<p><strong>Description:</strong></p>
<p>Calculates a quantile, but ignoring NaNs in the calculation</p>
<hr />
<h3 id="xasl_stat_robustmeanm">xASL_stat_RobustMean.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[NoOutliers, iOutliers, ThresholdDeviation] = xASL_stat_RobustMean(IM, ParameterFunction)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function detects outlier images, that can be used to create
a robust average, e.g. for template or biasfield creation. This is based either on the sum-of-squares
with the mean image (SoS), or on the average relative asymmetry index (AI). Images that are
median+/-3 mad off are defined as outliers. MAD = median/mean absolute difference</p>
<hr />
<h3 id="xasl_stat_shapirowilkm">xASL_stat_ShapiroWilk.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[H, P, W] = xASL_stat_ShapiroWilk(x[, alpha])
</code></pre>

<p><strong>Description:</strong></p>
<p>Performs the statistical test of normality - null hypothesis is that the sample is from normal
distribution with unspecified mean and variance. Based on the sample kurtosis it performs either
Shapiro-Wilk (for platykurtic) or Shapiro-Francia test (for leptokurtic).</p>
<hr />
<h3 id="xasl_stat_stdnanm">xASL_stat_StdNan.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">y = xASL_stat_StdNan(x[,w,dim])
</code></pre>

<p><strong>Description:</strong></p>
<p>It behaves in a similar way as VAR - it directly passes all arguments to xASL_stat_VarNan.</p>
<hr />
<h3 id="xasl_stat_sumnanm">xASL_stat_SumNan.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">y = xASL_stat_SumNan(x[,dim])
</code></pre>

<p><strong>Description:</strong></p>
<p>It uses the function SUM, but it sets all the NaNs to zero before calling it.</p>
<hr />
<h3 id="xasl_stat_uniquepairwisepermutationsm">xASL_stat_UniquePairwisePermutations.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[PermutationList] = xASL_stat_UniquePairwisePermutations(GroupA, GroupB)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function lists for one or two samples of indices
all possible permutations of indices,
performing the following steps:</p>
<ol>
<li>One sample permutations</li>
<li>Two sample permutations</li>
<li>Print conclusion</li>
</ol>
<p>PM: Allow entering one group only
PM: could extend with xASL_qc_TanimotoCoeff</p>
<hr />
<h3 id="xasl_stat_varnanm">xASL_stat_VarNan.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">y = xASL_stat_VarNan(x[,w,dim])
</code></pre>

<p><strong>Description:</strong></p>
<p>It behaves in a similar way as VAR.</p>
<hr />
<h3 id="xasl_stat_fcdfm">xASL_stat_fcdf.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">F = xASL_stat_fcdf(F,M,N)
</code></pre>

<p><strong>Description:</strong></p>
<p>Calculates the cumulative distribution function of the F-distribution for degrees of freedom M,N at value F.</p>
<hr />
<h3 id="xasl_stat_tcdfm">xASL_stat_tcdf.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">F = xASL_stat_tcdf(T,nu)
</code></pre>

<p><strong>Description:</strong></p>
<p>Calculates the cumulative distribution function of the Student's t-distribution for degrees of freedom nu at value T.</p>
<hr />
<h3 id="xasl_stat_ticdfm">xASL_stat_ticdf.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">T = xASL_stat_ticdf(P,nu)
</code></pre>

<p><strong>Description:</strong></p>
<p>Calculates the inverse of cumulative distribution function of the Student's t-distribution for degrees of freedom nu at value P.</p>
<hr />
<h3 id="xasl_stat_ttestm">xASL_stat_ttest.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[H,P,CI,stats] = xASL_stat_ttest(X[,M,alpha,tail,dim])
</code></pre>

<p><strong>Description:</strong></p>
<p>Performs a t-test that the distribution of the input data X has a mean different from 0 (or from a
given mean M, or that the distributions X and Y have different means). A normal distribution of the data
with an unknown variance is assumed.</p>
<hr />
<h3 id="xasl_stat_ttest2m">xASL_stat_ttest2.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[H,P,CI,stats] = xASL_stat_ttest2(X,Y[,alpha,tail,vartype,dim])
</code></pre>

<p><strong>Description:</strong></p>
<p>Performs a unpaired t-test that the distribution of the input data X has a mean different from that of Y.
A normal distribution of the data with an unknown variance is assumed.</p>
<hr />
<h3 id="xasl_str2numm">xASL_str2num.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[DataOut] = xASL_str2num(DataIn[, bKeepCell, bReplaceNonNumerical])
</code></pre>

<p><strong>Description:</strong></p>
<p>str2num wrapper, which only converts strings to numbers, and allows inputting cells.
Also, it replaces 'n/a' with NaN (BIDS convention). And it
has some other functionality as described in bKeepCell &amp;
bReplaceNonNumerical above.</p>
<hr />
<h3 id="xasl_test_bidsconversionm">xASL_test_BIDSConversion.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_test_BIDSConversion(baseDirImport[, baseDirReference, bImport, bComparison])
</code></pre>

<p><strong>Description:</strong></p>
<p>Runs the DICOM to ASL-BIDS import for all data in the baseDirImport directory. Study directories are supposed to be in, containing a 'sourcedata' folder - this folder
can contain subject directories and also sourceStructure.json and studyPar.json specifying the directory structure and the additional study parameters, respectively.
The import creates first the 'analysis' subfolder with data after dcm2nii and with all tags read and saved to JSON. Then it assembles everything with the
studyParameters and makes sure all is in BIDS format and saves it correctly in the 'rawdata' subdirectory.</p>
<p>This function runs the following sections:
1.  Initialization
2. DICOM -&gt; NII+JSON (i.e. dcm2niiX)
3. Manual curation for certain flavors
3a. Siemens_PCASL_3DGRASE_vascular
3b. Philips_PCASL_3DGRASE_R5.4_TopUp
3c. Siemens_PCASL_volunteer
3d. Siemens_PCASL_multiTI
4. Convert NII+JSON -&gt; BIDS
5. Run the comparison with the reference directory</p>
<hr />
<h3 id="xasl_test_bidsflavorsfullm">xASL_test_BIDSFlavorsFull.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_test_BIDSFlavorsFull(pathExploreASL,pathTest)


</code></pre>

<p><strong>Description:</strong></p>
<p>Runs the full testing on import and processing of the FlavorsDatabase. The testing directory
path has to be provided with the FlavorsDatabase subdirectory containig the Flavors - this
subdirectory is read, but not modified. New directories are created for that inside the test
directory.</p>
<hr />
<h3 id="xasl_test_getlogcontentm">xASL_test_GetLogContent.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[logContent] = xASL_test_GetLogContent(rootDir, [printContent], [storeRelativePath], [exportTable])
</code></pre>

<p><strong>Description:</strong></p>
<p>Get warnings and errors from log files.</p>
<ol>
<li>Input check</li>
<li>Load all log files</li>
<li>Iterate over log files</li>
<li>Optional: Print log content</li>
<li>Optional: Export (0 = no export, 1 = TSV export, 2 = XLSX export)</li>
</ol>
<h2 id="visualization">Visualization</h2>
<hr />
<h3 id="xasl_vis_addim2qcm">xASL_vis_AddIM2QC.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[x] = xASL_vis_AddIM2QC(x,parms);
</code></pre>

<p><strong>Description:</strong></p>
<p>Checks which images already are loaded, and  adds new image.</p>
<hr />
<h3 id="xasl_vis_createvisualfigm">xASL_vis_CreateVisualFig.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[ImOut, FileName] = xASL_vis_CreateVisualFig(x, ImIn, DirOut, IntScale, NamePrefix, ColorMap, bClip)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function creates a visualization Figure by merging flexibly rearranging NIfTI slices, input matrix or
path, managing colormaps for different merged image layers. Current use is for visual QC figures and overview in papers.
Function is structured as:</p>
<ol>
<li>Admin, deal with input arguments</li>
<li>Process image layers separately
* xASL_im_TransformData2View: Reshapes image data into visualization figure
* xASL_im_ClipExtremes: Clips image to given percentile
also we scale for peak intensity, we make sure that there is no
visible clipping/distortion
* Convert to colors, using any input colormaps</li>
<li>combine image layers, using input argument IntScale</li>
<li>print figure</li>
</ol>
<p>This function assumes that the first image is a grayscale background
image (e.g. for transparancy reasons), if there are multiple
images</p>
<hr />
<h3 id="xasl_vis_cropparmsacquirem">xASL_vis_CropParmsAcquire.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[xmin xmax ymin ymax] = xASL_vis_CropParmsAcquire(temp_image)
</code></pre>

<p><strong>Description:</strong></p>
<p>Goes from outside to inside to acquire crop settings.
Works with grayscale images (2 dimensions per slice).
Image position information (2D matrix) should be first
2 dimensions. Could include colordimension later on.</p>
<hr />
<h3 id="xasl_vis_cropparmsapplym">xASL_vis_CropParmsApply.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">ImageOut = xASL_vis_CropParmsApply(ImageIn,CropParameters)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function crops 2D image matrices.</p>
<hr />
<h3 id="xasl_vis_imwritem">xASL_vis_Imwrite.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[ImOut] = xASL_vis_Imwrite(ImIn, PathOut[, ColorMap, bRescale])
</code></pre>

<p><strong>Description:</strong></p>
<p>This functions takes an input image matrix, interpolates it
to HD resolution (1920x1080) for visibility, and saves the image as jpg.
This function avoids the graphic interface of Matlab, for running from CLI
Careful: this function overwrites any existing PathOut.</p>
<hr />
<h3 id="xasl_vis_overlapt1_aslm">xASL_vis_OverlapT1_ASL.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_vis_OverlapT1_ASL( x, ASL)
</code></pre>

<p><strong>Description:</strong></p>
<p>Part of ExploreASL.
Shows spatial agreement ASL and probability maps.</p>
<hr />
<h3 id="xasl_vis_tileimagesm">xASL_vis_TileImages.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[ImOut] = xASL_vis_TileImages(ImIn, nColumns)
</code></pre>

<p><strong>Description:</strong></p>
<p>Merges selected slices (3D) into one single 2D picture.
Plots all slices in one figure with specified rows and
columns, aiming for a square tile.</p>
<p>PM: can be extended to multiple slices</p>
<hr />
<h3 id="xasl_vis_transformdata2viewm">xASL_vis_TransformData2View.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">FigureOut = xASL_vis_TransformData2View(ImagesIn, x)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function changes the dimensionality and reshapes the input images
in such a way that they are nicely tiled in a mosaic for visualization purposes.
Reshaping a series of images with this function can be useful for
visualization of SPM/voxel-based analyses.</p>
<hr />
<h3 id="xasl_vis_visualqc_topupm">xASL_vis_VisualQC_TopUp.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">[MeanAI_PreTopUp_Perc, MeanAI_PostTopUp_Perc] = xASL_vis_VisualQC_TopUp(PathPopB0, PathPopUnwarped, x, iSubject, CheckDir)
</code></pre>

<p><strong>Description:</strong></p>
<p>This function creates a Figure that showes the effect of TopUp
with 6 images with axial slices: the NormPE, RevPE and
their difference image in colorscale, and this before (upper
row) &amp; after (lower row) TopUp.</p>
<hr />
<h3 id="xasl_vis_visualizeroism">xASL_vis_VisualizeROIs.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_vis_VisualizeROIs(x, ROI_list)
</code></pre>

<p><strong>Description:</strong></p>
<p>Creates for each subject a JPEG image containing
the original T1w, WMH_SEGM and T1w after lesion-filling.</p>
<hr />
<h3 id="xasl_wrp_linearreg_others2t1wm">xASL_wrp_LinearReg_Others2T1w.m</h3>
<p><strong>Format:</strong></p>
<pre><code class="matlab">xASL_wrp_LinearReg_Others2T1w(x[, bAutoACPC])
</code></pre>

<p><strong>Description:</strong></p>
<p>This submodule registers T1c and T2 linearly to the T1w</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../Population_Module/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Module Population
            </div>
          </div>
        </a>
      
      
        <a href="../SPMxASL/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              SPM xASL Functions
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.fe42c31b.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.4ea5477f.min.js"></script>
      
    
  </body>
</html>